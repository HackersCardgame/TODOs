(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{Jd6J:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("ERkP"),r=a("TIdA"),n=a("A91F");const o={composeDirectMessage:({recipient:e,welcomeMessageId:t,messageText:a})=>{},composeTweet:(e,t,a)=>{},getCtaString:e=>{switch(e){case"play":return"Play";case"shop":return"Shop";case"book":return"Book";case"connect":return"Connect";case"order":return"Order";case"open":return"Open";case"install":default:return"Install"}},getFetchIntervalSeconds:()=>30,getMessageMeString:e=>{switch(e){case"message_me_card_cta_1":return"Message us";case"message_me_card_cta_3":return"Send us a private message";case"message_me_card_cta_4":return"Send me a private message";case"message_me_card_cta_2":default:return"Send a private message"}},getMobileOS:()=>"android",getBroadcastLink:e=>"https://twitter.com/i/broadcasts/"+e,getEventLink:e=>"https://twitter.com/i/events/"+e,getMomentLink:e=>"https://twitter.com/i/moments/"+e,renderImage:(e,t,a,o,s,d)=>{const{uri:l,width:c,height:_}=e;return i.createElement(r.a,{accessibilityLabel:d,aspectMode:n.a.exact(t||1),cropCandidates:s,image:{url:l,width:c||1e3,height:_||1e3}})},renderTwemojiText:e=>e,renderNumVotesLabel:e=>`${e.toLocaleString()} vote${1===e?"":"s"}`,renderFinalResultsLabel:()=>"Final results",renderRatingsLabel:({appStarRating:e,appNumRatings:t})=>`${e}/5.0 stars – ${t} ratings`,renderStartingTimeLabel:e=>"Starting "+new Date(parseInt(e,10)).toLocaleString("default",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),renderTimeLeftLabel:e=>"Ends at "+new Date(e).toLocaleString(),renderTweetActionLabel:e=>"Tweet "+e,renderVoteLabel:()=>"Vote",shouldLimitTextToSingleLine:()=>!1,storeCardState:(e,t)=>{},storeCarouselIndex:(e,t)=>{}};t.b={init:e=>{for(const t in e)o[t]=e[t]},setRenderImage:e=>{o.renderImage=e},setRenderTwemojiText:e=>{o.renderTwemojiText=e},setRenderNumVotesLabel:e=>{o.renderNumVotesLabel=e},setRenderFinalResultsLabel:e=>{o.renderFinalResultsLabel=e},setRenderTimeLeftLabel:e=>{o.renderTimeLeftLabel=e},setRenderTweetActionLabel:e=>{o.renderTweetActionLabel=e},setRenderRatingsLabel:e=>{o.renderRatingsLabel=e},setRenderVoteLabel:e=>{o.renderVoteLabel=e}}},"aX4+":function(e,t,a){"use strict";a.r(t),a.d(t,"HWCard",(function(){return Fe}));a("IAdD"),a("kYxP");var i=a("LdEA"),r=a.n(i),n=a("97Jx"),o=a.n(n),s=a("KEM+"),d=a.n(s),l=a("+/5o"),c=a("ERkP"),_=a("v6aA"),p=a("Tb0w"),u=a("6rlp"),m=a("vjRr"),b=a("/Ikv"),I=a("rxPX"),T=a("0KEI"),g=a("P1r1"),E=a("oEOe"),h=a("/kEJ");const y=E.a("rweb/cards",""),A=(e,t)=>(a,i,{api:r})=>E.b(a,{params:{ids:[t]},request:r.Broadcasts.fetchBroadcast})({actionTypes:y,context:"FETCH_BROADCAST",meta:{}},t=>{if(t){const a=t.result.broadcasts[0],r=t.entities.broadcasts[a],n=m.a.select(i(),e);if(!n)return[];const o=v(r,n);return[Object(h.c)({cards:{[e]:Object.assign({},o)}})]}}),v=(e,t)=>{const{pre_live_slate_url:a,scheduled_start_ms:i,state:r,status:n,twitter_user_id:o,user_display_name:s}=e,{binding_values:d}=t;return{binding_values:Object.assign({},d,{broadcast_state:{type:"STRING",string_value:r},broadcast_title:{type:"STRING",string_value:n},site:{type:"USER",user_value:{id_str:o}},broadcaster_display_name:{type:"STRING",string_value:s},broadcast_scheduled_start_time:{type:"STRING",string_value:i}},a?{broadcast_pre_live_slate:{type:"IMAGE",image_value:{url:a}}}:null)}},S=(e,t)=>{var a;return t.cardState||(null==(a=p.b(e,t.card.url))?void 0:a.cardState)},D=(e,t)=>{var a;return t.initialCarouselIndex||(null==(a=p.b(e,t.card.url))?void 0:a.carouselIndex)},C=(e,t)=>b.a.getBindingValue(t.card.binding_values,"broadcast_id");var O=Object(I.a)().propsFromState(()=>({cardState:S,initialCarouselIndex:D,isDataSaverEnabled:g.j,broadcastId:C})).propsFromActions(()=>({createLocalApiErrorHandler:Object(T.d)("CARD_CONTAINER"),requestCardUpdate:m.a.fetchOne,log:u.a,updateBroadcastCard:A,vote:m.a.vote,remindMeButtonSubscribe:m.a.eventSubscribe,remindMeButtonUnsubscribe:m.a.eventUnsubscribe,updateCardState:p.c})).withAnalytics({element:"platform_card"}),L=a("TrHT"),N=a("wrlS"),M=a("F3pd");var R=(e,t,a,i)=>{switch(e){case"card_url_click":return{event:"card_url_click"};case"install_app":return{event:"install_app"};case"dm_button_click":return{event:"card_url_click",engagement_metadata:JSON.stringify({direct_message_card_details:{button_index:a}})};case"convo_button_click":return{event:"card_click",engagement_metadata:JSON.stringify({conversational_card_details:{button_index:a}})};case"poll_card_vote":return{event:"poll_card_vote"};case"unified_card_component_url_click":return Object.assign({event:"unified_card",uc_event:JSON.stringify({event:"click",component:t,destination:"browser"})},"button_group"===t||i?{engagement_metadata:JSON.stringify(Object.assign({uc_button_group_details:{button_index:a}},i?{uc_event_metadata:i}:null))}:null);case"unified_card_component_app_store_click":return{event:"unified_card",uc_event:JSON.stringify({event:"click",component:"details"===t?"app_store_details":t,destination:"app_store"}),engagement_metadata:JSON.stringify({uc_event_metadata:Object.assign({},i,{app_event:"install_app"},"button_group"===t?{button_index:a}:null)})};case"unified_card_carousel_swipe_next":case"unified_card_carousel_swipe_previous":return{event:"unified_card",uc_event:JSON.stringify({event:"unified_card_carousel_swipe_next"===e?"swipe_next":"swipe_previous",component:t}),engagement_metadata:JSON.stringify({uc_event_metadata:i})};default:return null}},f=a("3XMw"),w=a.n(f);const P=w.a.d37a42ad,x=w.a.c2818323,U=w.a.ef1f709d,B=w.a.ia24dc8c,k=w.a.ecd234cd,F=w.a.d1318fbc;var Y=a("nT9l"),G=a("aITJ"),j=a("TIdA"),V=a("Jd6J"),W=a("A91F"),z=a("t62R");let H=!1;const q=w.a.ic1e826e,J=w.a.c8b4bcaf,$=w.a.b62956a9,K=w.a.b5298d91,X=w.a.i3ea806a,Q=w.a.fd00a769,Z=w.a.e0aa5848,ee=w.a.d3f6b1a6,te=w.a.b0e322cc,ae=w.a.cb8bddc7,ie=w.a.cb8c547e,re=w.a.d980e29e,ne=w.a.f93bb3ee,oe=w.a.fc209bb7,se=G.a.isIOS()?"ios":G.a.isAndroid()?"android":"other",de={},le=e=>(t,a,i)=>{const r=0===t.indexOf("card://"),n=a||!r?`${a||""}${a&&!r?" ":""}${r?"":t}`:null;e.push(Object.assign({pathname:"/compose/tweet"},n?{query:{text:n}}:null,{state:{convoCardData:{cardId:t,cardUrl:r?t:null,nextState:i}}}))};function ce(e){H||(H=!0,V.b.init(function({history:e,updateCardState:t}){return[{composeDirectMessage:({recipient:t,welcomeMessageId:a,messageText:i})=>{const r={recipient_id:t};a&&(r.welcome_message_id=a),i&&(r.text=i),e.push({pathname:"/messages/compose",query:Object.assign({},r)})},composeTweet:le(e),getFetchIntervalSeconds:()=>30,getCtaString:e=>{switch(e){case"play":return q;case"shop":return J;case"book":return $;case"connect":return K;case"order":return X;case"open":return Q;case"install":default:return Z}},getMessageMeString:e=>{switch(e){case"message_me_card_cta_1":return ee;case"message_me_card_cta_3":return ae;case"message_me_card_cta_4":return ie;case"message_me_card_cta_2":default:return te}},getMobileOS:()=>se,renderImage:(e,t,a,i,r,n)=>{const{uri:o,width:s,height:d}=e,l=i?(e=>{if(de[e])return de[e];{const t=j.a.createLayoutCache();return de[e]=t,t}})(i):void 0,_=({useMinimumData:e})=>c.createElement(j.a,{accessibilityLabel:n,aspectMode:W.a.exact(t||1),cropCandidates:r,image:{url:o,width:s||1e3,height:d||1e3},layoutCache:l,previewMode:e});return"preview"===a?c.createElement(Y.a,{acceptLabel:ne,renderContent:_,resourceId:o}):_({useMinimumData:!1})},renderTwemojiText:e=>c.createElement(z.c,null,e),renderNumVotesLabel:e=>k({count:e,formattedCount:B(e)}),renderFinalResultsLabel:()=>F,renderTimeLeftLabel:e=>(e=>{const t=new Date(e).getTime()-Date.now(),a=Math.floor(t/864e5),i=Math.floor(t/36e5),r=Math.floor(t/6e4);return i>=24?U(w.a.ia24dc8c(a)):r>=60?x(w.a.ia24dc8c(i)):P(w.a.ia24dc8c(r))})(e),renderStartingTimeLabel:e=>{const t=new Date(parseInt(e,10));return re({date:oe(t)})},storeCardState:(e,a)=>t(e,{cardState:a}),storeCarouselIndex:(e,a)=>t(e,{carouselIndex:a})}]}(e)[0]))}a("JtPf");var _e=a("zb92");const pe=Object(_e.a)({loader:()=>a.e(141).then(a.bind(null,"tpds"))});function ue(e){return c.createElement(pe,{player:e})}var me=a("cFuS"),be=a("Rp9C"),Ie=a("Jkc4"),Te={wrapper:"card.wrapper",layoutLarge:{media:"card.layoutLarge.media",detail:"card.layoutLarge.detail"},layoutSmall:{media:"card.layoutSmall.media",detail:"card.layoutSmall.detail"}},ge=a("v/3V"),Ee=a("XOJV");const he=(e,t)=>t.media_tweet_id,ye=(e,t)=>{const a=he(0,t);return a?Ee.a.selectFetchStatus(e,a):void 0};var Ae=Object(I.a)().propsFromState(()=>({videoTweetFetchStatus:ye,videoTweet:Ee.a.createHydratedTweetSelector(he)})).propsFromActions(()=>({createLocalApiErrorHandler:Object(T.d)("EVENT_CARD_CONTEXT"),fetchTweetIfNeeded:Ee.a.fetchOneIfNeeded})),ve=a("v//M"),Se=a("W5XZ"),De=a("fUT7"),Ce=a("Modb"),Oe=a("lklz"),Le=a("MWbm"),Ne=a("9Xij"),Me=a("rHpw");const Re=w.a.a1979463;class fe extends c.Component{constructor(...e){super(...e),d()(this,"_renderInlinePlayer",()=>{var e;const{aspect_ratio:t,event_id:a,media_tweet_id:i,poster_image:r,promotedContent:n,videoTweet:s}=this.props,d=null==s||null==(e=s.extended_entities)?void 0:e.media[0],l=Oe.b.forTweet(i);return d?c.createElement(Ce.a,o()({},Object(L.a)(l,d,a),{aspectRatio:t,poster:r,promotedContent:n})):null}),d()(this,"_handleFetchTweet",()=>{const{createLocalApiErrorHandler:e,fetchTweetIfNeeded:t,media_tweet_id:a}=this.props;De.a.preload(),t(a).catch(e(Se.a))})}componentDidMount(){this._handleFetchTweet()}render(){const{aspect_ratio:e,media_tweet_id:t,videoTweetFetchStatus:a}=this.props;return t?c.createElement(Ne.a,{ratio:e},c.createElement(Le.a,{style:Me.a.absoluteFill},c.createElement(ve.a,{accessibilityLabel:Re,fetchStatus:a,onRequestRetry:this._handleFetchTweet,render:this._renderInlinePlayer}))):null}}var we=Ae(fe),Pe=a("TnY3"),xe=a("bU1N");const Ue=G.a.isTwitterLiteAPK(),Be=w.a.ac4c73d8,ke={objectFitVideo:"cover"};class Fe extends c.Component{constructor(e,t){super(e,t),d()(this,"_getCardState",()=>{const{cardState:e,card:t}=this.props,a=N.b.isTrue("responsive_web_eu_compliance_player_card_disabled");return t.name!==b.a.CardNames.PLAYER||b.a.isVineCard(t)||!a&&!Ue?e:"static"}),d()(this,"_updateBroadcastCard",([e])=>{const{broadcastId:t,updateBroadcastCard:a,createLocalApiErrorHandler:i}=this.props;t&&a(e,t).catch(i())}),d()(this,"_handleRequestCardUpdate",()=>{const{loggedInUserId:e}=this.context,{card:t,requestCardUpdate:a,createLocalApiErrorHandler:i}=this.props;return t.name===b.a.CardNames.BROADCAST?this._updateBroadcastCard:e?(e,t)=>{let r=Object.assign({},t);a(e,r).catch(i())}:void 0}),d()(this,"_handlePromotedLogEvent",({action:e,componentType:t,buttonIndex:a,isAuthRequired:i,ucPromotedMetadata:r})=>{const{createLocalApiErrorHandler:n,cardContext:o,log:s,promotedContent:d}=this.props,{loggedInUserId:l}=this.context;if((!i||l)&&d&&o){const{disclosure_type:i,impression_id:l}=d;s({disclosureType:i,itemId:o.tweetId,itemType:me.c.TWEET,params:Object.assign({impression_id:l},R(e,t,a,r))}).catch(n())}}),d()(this,"_handleScribeEvent",({action:e,componentType:t,cardName:a,cardUrl:i,ctaIndex:r,element:n,isMessageMe:o,isAuthRequired:s})=>{const{analytics:d,cardContext:l,promotedContent:c}=this.props,{loggedInUserId:_}=this.context,p="unified_card_app_store_open_link"===e?"open_link":e,u=c&&"earned"!==Object(M.a)(c)?c.impression_id:void 0;if(s&&!_)return;const m={action:p,data:{items:[be.a.getHWCardItem(Object.assign({componentType:t,cardName:a,cardUrl:i,ctaIndex:r,tweetId:l.tweetId,tweetUserId:l.tweetUserId},o?{viewingUserId:_}:null,{isUCAppInstall:"unified_card_app_store_open_link"===e,impressionId:u}))]}};d.scribe(n?Object.assign({element:n},m):m)}),d()(this,"_handlePollVote",({choice:e,cardId:t})=>{const{cardContext:{tweetId:a},vote:i}=this.props;i(t,{selectedIndex:e,tweetId:a})}),d()(this,"_handleEventReminderClick",({cardId:e,eventId:t,notificationId:a,remindMe:i})=>{const{remindMeButtonSubscribe:r,remindMeButtonUnsubscribe:n}=this.props;i?r(e,t,{remind_me:i,notification_id:a}):n(e,t,{remind_me:i,notification_id:a})}),d()(this,"_transformUrl",(e,t)=>{var a;if(!t)return Object(ge.a)(e,null==(a=this.props.promotedContent)?void 0:a.click_tracking_info);const{promotedContent:i,analytics:r}=this.props,{page:n,section:o,component:s,element:d,action:l}=t;return{pathname:Object(ge.a)(e,null==i?void 0:i.click_tracking_info),state:{referringScribeNamespace:Object.assign({},r.contextualScribeNamespace,void 0!==n?{page:n}:null,void 0!==o?{section:o}:null,void 0!==s?{component:s}:null,void 0!==d?{element:d}:null,void 0!==l?{action:l}:null)}}}),d()(this,"_renderVideoPlayer",(e,t,a)=>{const{cardContext:{tweetId:i},promotedContent:n}=this.props,{impression_id:s}=n||{};if("live_broadcast"===e.type){const{broadcast_id:r,aspect_ratio:o,content_id:d,poster_image:l,timecode:_}=e;return c.createElement(Ce.a,{accessibilityLabel:Be,aspectRatio:a||o,customOverlay:ue,displayOptions:ke,forceFullPreviewImage:"suboptimal"===t,poster:l,promotedContent:n,source:{contentId:d,videoId:Oe.b.forBroadcast(r,i,s)},timecode:_,videoType:"video"})}if("tweet_video"===e.type)return c.createElement(we,o()({},e,{promotedContent:n}));if("uc_video"===e.type){const{original_info:d}=e,l=r()(e,["type","original_info"]),_=Object(L.a)(Oe.b.forTweet(i||"",s),Object.assign({},l,{original_info:Object.assign({},d),type:"video"})),p=r()(_,["accessibilityLabel","backgroundColor","primaryLabel","secondaryLabel"]);return a&&(p.aspectRatio=a),c.createElement(Ce.a,o()({forceFullPreviewImage:"suboptimal"===t},p,{accessibilityLabel:Be,promotedContent:n}))}{const{aspect_ratio:r,content_id:o,duration_ms:s,poster_image:d,variants:l,vmap_url:_}=e,p=l&&l.filter(e=>!!e.src);return i?c.createElement(Ce.a,{accessibilityLabel:Be,aspectRatio:a||r,durationMs:s,forceFullPreviewImage:"suboptimal"===t,poster:d,promotedContent:n,source:Object.assign({contentId:o},p&&p.length>0?{variants:p.map(e=>({content_type:e.type,url:e.src}))}:null,{videoId:{type:"tweet",id:i},vmapUrl:_}),videoType:"vine"===e.type?"vine":"video"}):null}}),ce({history:e.history,updateCardState:e.updateCardState})}render(){const{dmSentOrReceived:e,isDataSaverEnabled:t,promotedContent:a,card:i,cardContext:r,isInteractive:n,withSquareBottomBorderRadius:o,nativeID:s,initialCarouselIndex:d}=this.props,_=N.b.isTrue("unified_cards_cta_color_blue_cta"),p={cardMediaDomId:l.c,cardDetailDomId:l.a};return c.createElement(Ie.a,null,l=>c.createElement(xe.a,{a11yDomIds:p,card:i,cardContext:r,cardState:this._getCardState(),dmSentOrReceived:e,initialCarouselIndex:d,isDataSaverEnabled:t,isInteractive:n,isPromoted:!!a,nativeID:s,onEventReminderClick:l(this._handleEventReminderClick),onPollVote:l(this._handlePollVote),onPromotedLogEvent:this._handlePromotedLogEvent,onScribeEvent:this._handleScribeEvent,promotedContent:a,renderVideoPlayer:this._renderVideoPlayer,requestCardUpdate:this._handleRequestCardUpdate(),testIDs:Te,transformUrl:this._transformUrl,useBlueButtonForAppDetails:_,withSquareBottomBorderRadius:o}))}}d()(Fe,"contextType",_.a);const Ye=O(Object(Pe.a)(Fe));t.default=Ye},bU1N:function(e,t,a){"use strict";a("wFPu"),a("IAdD");var i=a("97Jx"),r=a.n(i),n=a("KEM+"),o=a.n(n),s=a("ERkP"),d=a("Jd6J");class l extends s.Component{render(){return null}componentDidMount(){this._startTimer()}componentWillUnmount(){this._stopTimer()}_startTimer(){const{requestCardUpdate:e}=this.props,t=d.a.getFetchIntervalSeconds();this._timer=setInterval(e,1e3*t)}_stopTimer(){clearInterval(this._timer)}}var c=l,_=(a("jQ/y"),a("9Xij")),p=(a("kYxP"),a("/yvb")),u=a("oECP"),m=a("YXv0");class b extends s.Component{constructor(...e){super(...e),o()(this,"_extractCardActionParams",(e,t)=>[t&&void 0!==t.index?t.index:void 0,e.type===m.f.ACTION&&e.data.auth_required]),o()(this,"_scribeAndLogAction",(e,t,a)=>{const{scribeCardAction:i}=this.props,[r,n]=this._extractCardActionParams(e,a);i&&i({action:e.data.scribe,componentType:t,ctaIndex:r,isAuthRequired:n}),this._logPromotedCardAction({action:e.data.promoted_log,componentType:t,ctaIndex:r,isAuthRequired:n})}),o()(this,"_scribeUnifiedCardClick",(e,t,a)=>{const{scribeCardAction:i}=this.props,[r,n]=this._extractCardActionParams(e,a);i&&i({action:"click",element:e.data.scribe_element||void 0,componentType:t,ctaIndex:r,isAuthRequired:n})}),o()(this,"_voteForChoice",e=>{const{card:t,onPollVote:a}=this.props;a&&t&&a({cardId:t.id,choice:e})}),o()(this,"_toggleEventReminder",e=>{const{card:t,onEventReminderClick:a}=this.props;if(e.eventId&&e.notificationId){const{eventId:i,isSelected:r=!1,notificationId:n}=e;a&&t&&a({cardId:t.id,eventId:i,notificationId:n,remindMe:!r})}}),o()(this,"_updateCardStateAndPersistIfNeeded",(e,t,a)=>{const{updateCardState:i}=this.props;a&&(i&&i(a),t&&d.a.storeCardState(e,a))}),o()(this,"_logPromotedCardAction",({action:e,componentType:t,ctaIndex:a,isAuthRequired:i})=>{const{card:r,onPromotedLogEvent:n}=this.props;r&&n&&n(Object.assign({action:e,componentType:t},"number"==typeof a?{buttonIndex:a}:null,{isAuthRequired:i}))})}render(){const{buttonData:e,card:t,children:a,componentType:i,destinationKey:r,isInteractive:n,media:o,promotedContent:s,transformUrl:l}=this.props;if(!t||!r||!n)return a({});const c=t.destinations[r],_=null!=l?l:u.a;if(!c)return a({});switch(c.type){case m.f.BROWSER:case m.f.BROWSER_WITH_DOCKED_MEDIA:case m.f.BROWSER_WITH_MEDIA:{const r=t.card_name===m.a.UNIFIED_CARD;return a({link:r&&l?l(c.data.url_data.url,Object.assign({},c.data.scribe_element?{element:c.data.scribe_element}:null,{action:"click"})):_(c.data.url_data.url),onClick:()=>{this._scribeAndLogAction(c,i,e),r&&this._scribeUnifiedCardClick(c,i,e)}})}case m.f.MOMENT:return a({link:d.a.getMomentLink(c.data.moment_data.moment),onClick:()=>this._scribeAndLogAction(c,i,e)});case m.f.EVENT:return a({link:{pathname:d.a.getEventLink(c.data.event_data.id),state:{promotedCardState:{media:o,promotedContent:s}}},onClick:()=>this._scribeAndLogAction(c,i,e)});case m.f.BROADCAST:return a({link:{pathname:d.a.getBroadcastLink(c.data.broadcast_data.id),state:{promotedContent:s}},onClick:()=>this._scribeAndLogAction(c,i,e)});case m.f.ACTION:{const{action_data:r}=c.data,{next_state:n,persist:o}=r;return a({onClick:a=>{switch(this._scribeAndLogAction(c,i,e),r.type){case"compose":e&&d.a.composeTweet(t.id,e.tweet||void 0,n);break;case"dm":r.recipient&&d.a.composeDirectMessage({recipient:r.recipient,welcomeMessageId:e&&e.wm_id||void 0,messageText:e&&e.composer_text||void 0});break;case"vote":e&&this._voteForChoice(e.index);break;case"reminder":e&&this._toggleEventReminder(e);break;default:this._updateCardStateAndPersistIfNeeded(t.id,o,n),a.stopPropagation()}}})}default:return a({})}}}o()(b,"defaultProps",{isInteractive:!0});var I,T=(I=b,e=>s.createElement(gt.Context.Consumer,null,t=>s.createElement(I,r()({},e,t)))),g=a("rHpw"),E=a("MWbm"),h=a("SOvA"),y=a("I/9y");class A extends s.Component{constructor(...e){super(...e),o()(this,"_renderButton",(e,t)=>{const{buttonSize:a,useBlueButtonForAppDetails:i}=this.props,r=this._getButtonIcon(e.icon)||void 0,n=t>0,o=i&&e.isAppDetails||e.isSelected?"primary":"secondary";return s.createElement(T,{buttonData:e,componentType:"button_group",destinationKey:e.destination,key:e.cta},({link:t,onClick:i})=>s.createElement(p.a,{icon:r,key:e.cta,link:t,onClick:i,size:a,style:[v.button,n&&v.buttonTopMargin],type:o},e.cta))})}render(){const{chromeless:e,buttons:t}=this.props;return s.createElement(E.a,{style:!e&&v.wrapperPadding},t.map(this._renderButton))}_getButtonIcon(e){switch(e){case"dm":return s.createElement(h.a,null);case"link":return s.createElement(y.a,null);default:return null}}}o()(A,"displayName","@twitter/CardButtons");const v=g.a.create(e=>({wrapperPadding:{padding:e.spaces.xSmall},button:{flexGrow:1},buttonTopMargin:{marginTop:e.spaces.xxSmall}}));var S=A,D=a("n4Eu");var C=e=>{const t=e.ext_media_color&&e.ext_media_color.palette,a=t&&D.a.get(t);return a?`rgb(${a.rgb.red}, ${a.rgb.green}, ${a.rgb.blue})`:void 0},O=a("cm6r"),L=a("a6qo"),N=a("mXq/"),M=(a("aWzz"),a("PU7B")),R=a("GcQN");class f extends s.Component{render(){const{componentType:e,destination:t,importantForAccessibility:a,locationKey:i,mediaEntity:r,ratio:n,renderPlaceholder:o,style:l}=this.props,{media_url_https:c,original_info:{width:p,height:u}={},cropCandidates:m,altText:b=""}=r||{},I=r&&C(r),g=s.createElement(s.Fragment,null,s.createElement(gt.Context.Consumer,null,({isDataSaverEnabled:e,isPromoted:t})=>{const a=e?t?"suboptimal":"preview":void 0;return d.a.renderImage({uri:c,width:p,height:u},n,a,i,m,b)}),this._renderOverlay()),h=s.createElement(_.a,{ratio:n||1},s.createElement(E.a,{style:[w.image,w.mediaMissingIconContainer]},s.createElement(M.a,{style:w.newsIcon}))),y=c&&!o,A=[l,w.root,{backgroundColor:I}],v=[w.root,w.mediaMissing],S=y?A:v,D=y?g:h;return s.createElement(T,{componentType:e,destinationKey:t},({link:e,onClick:t})=>s.createElement(O.a,{importantForAccessibility:a,interactive:!1,link:e,onClick:t,style:S},D))}_renderOverlay(){const{overlay:e,playOverlaySize:t}=this.props;if(!e)return null;switch(e.type){case m.g.MOMENTS:return s.createElement(L.a,{align:"left",square:!0},s.createElement(R.a,null));case m.g.PLAY:return s.createElement(E.a,{style:w.playOverlay},s.createElement(N.a,{size:t}));case m.g.LABEL:return s.createElement(L.a,{align:"left"},e.text);default:return null}}}o()(f,"defaultProps",{playOverlaySize:"small",componentType:"image"}),f.propTypes={};const w=g.a.create(e=>({root:{width:"100%",height:"100%",overflow:"hidden"},image:{width:"100%",height:"100%"},playOverlay:{position:"absolute",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},momentsIcon:{height:e.spaces.small,color:e.colors.white},mediaMissing:{backgroundColor:e.colors.faintGray},mediaMissingIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},newsIcon:{color:e.colors.deepGray,height:"2em"}}));var P=f,x=a("uavX"),U=a("3XMw"),B=a.n(U);const k=B.a.b74bf8b7,F=B.a.a7cd5cf4,Y=B.a.df8cd2af;class G extends s.Component{constructor(e){super(e),o()(this,"_renderPhotoType",(e,t,a,i)=>{if("photo"!==t.type)return null;const{width:r,height:n}=t.original_info;return s.createElement(P,{componentType:"swipeable_media",destination:i,importantForAccessibility:this.state.currentSlide!==e?"no-hide-descendants":void 0,key:e,mediaEntity:t,overlay:a,playOverlaySize:this.props.playOverlaySize,ratio:t?Math.max(r/n,1):void 0,style:[j.image,0===e&&j.firstImage,e===this.props.swipeableMedia.length-1&&j.lastImage]})}),o()(this,"_renderVideoType",(e,t,a)=>{const i=e.media_entity;if("uc_video"!==i.type)return null;const{renderVideoPlayer:r,swipeableMedia:n,isDataSaverEnabled:o,isPromoted:d}=this.props;if(r){const e=o?d?"suboptimal":"preview":void 0;return s.createElement(E.a,{importantForAccessibility:this.state.currentSlide!==t?"no-hide-descendants":void 0,key:t,style:[j.video,0===t&&j.firstImage,t===n.length-1&&j.lastImage]},r(i,e,a))}const l={media_url_https:i.media_url_https,type:"photo",original_info:i.original_info};return this._renderPhotoType(t,l,{type:m.g.PLAY})}),o()(this,"_handleChange",e=>{const{card:t,ucPromotedMetadata:a,onPromotedLogEvent:i}=this.props;this._updateUCMetadata(e),i&&i({action:e>this.state.currentSlide?"unified_card_carousel_swipe_next":"unified_card_carousel_swipe_previous",componentType:"swipeable_media",ucPromotedMetadata:Object.assign({},a,{media_index:this.state.currentSlide+1})}),this._setTransitionAccessibilityLabel(e),this.setState({currentSlide:e}),t&&d.a.storeCarouselIndex(t.id,e)}),o()(this,"_handleOnRest",e=>{this.setState({loadedSlide:e})}),o()(this,"_updateUCMetadata",e=>{const{ucPromotedMetadata:t,updateUCPromotedMetadata:a}=this.props,i=Object.assign({},t,{media_index:e+1});a&&a(i)}),o()(this,"_setTransitionAccessibilityLabel",e=>{var t;const{swipeableMedia:a}=this.props,i=null==(t=a[e])?void 0:t.media_entity;return i&&"photo"===i.type?this.setState({transitionAccessibilityLabel:Y({currentSlide:e+1,itemCount:a.length,type:k,altText:i.altText||""})}):"uc_video"===(null==i?void 0:i.type)?this.setState({transitionAccessibilityLabel:Y({currentSlide:e+1,itemCount:a.length,type:F,altText:""})}):void 0}),this.state={currentSlide:e.carouselIndex,loadedSlide:e.carouselIndex,transitionAccessibilityLabel:void 0}}componentDidMount(){this._updateUCMetadata(this.state.currentSlide)}render(){const{swipeableMedia:e}=this.props,t=e[0].media_entity;if("photo"!==t.type&&"uc_video"!==t.type)return null;const{width:a,height:i}=t.original_info,r=a/i,n=this.props.swipeableMedia.some(e=>"uc_video"===e.media_entity.type);return s.createElement(_.a,{ratio:r,style:j.aspectRatio},s.createElement(E.a,{style:[j.root]},s.createElement(x.a,{cellSpacing:5,currentSlide:this.state.currentSlide,onChange:this._handleChange,onRest:this._handleOnRest,shouldRenderAll:n,showNavButtonsOnHover:!0,transitionAccessibilityLabel:this.state.transitionAccessibilityLabel,withReducedNavButtonClickArea:n},e.map((e,t)=>{const a=e.media_entity,i=e.destination;return"photo"===a.type?this._renderPhotoType(t,a,e.overlay,i):"uc_video"===a.type?this._renderVideoType(e,t,r):void 0}))))}}o()(G,"defaultProps",{carouselIndex:0});const j=g.a.create(e=>({root:{height:"100%"},aspectRatio:{overflow:"visible"},image:{borderColor:e.colors.nestedBorderColor,borderStyle:"solid",borderWidth:e.borderWidths.small},video:{overflow:"hidden",maxHeight:"100%"},firstImage:{borderTopLeftRadius:e.borderRadii.xLarge},lastImage:{borderTopRightRadius:e.borderRadii.xLarge}}));var V=(e=>t=>s.createElement(gt.Context.Consumer,null,a=>s.createElement(e,r()({},t,a))))(G),W=a("t62R");class z extends s.Component{render(){const{weight:e,children:t,dir:a,numberOfLines:i,type:r}=this.props;return s.createElement(W.c,{color:"vanity"===r||"description"===r?"deepGray":"normal",dir:a,numberOfLines:i,weight:e},"vanity"===r?s.createElement(W.c,{size:"small",style:H.icon},s.createElement(y.a,null)):null,d.a.renderTwemojiText(t))}}o()(z,"displayName","@twitter/CardText"),o()(z,"defaultProps",{dir:"auto"}),z.propTypes={};const H=g.a.create(e=>({icon:{marginRight:e.spaces.micro}}));var q=z,J=a("jV+4");class $ extends s.Component{constructor(...e){super(...e),o()(this,"_hasText",()=>{const{attribution:e,category:t,title:a,description:i,vanity:r}=this.props;return!!(e||a||i||r||t)})}render(){const{destination:e,accessibilityLabel:t}=this.props;return s.createElement(T,{componentType:"details",destinationKey:e},({link:e,onClick:a})=>s.createElement(O.a,{accessibilityLabel:t,interactive:!1,link:e,onClick:a,style:X.detailItemsWrapper},this._renderContent(),this._renderExtraContent()))}_renderExtraContent(){const{extraContent:e}=this.props;return e?s.createElement(E.a,{style:X.extraContentWrapper},e):null}_renderContent(){const{attribution:e,category:t,chromeless:a,destination:i,footer:r,nativeID:n,testID:o,title:l,titleMaxLines:c,description:_,descriptionMaxLines:p,vanity:u,withBottomPadding:m}=this.props,b=!i;return s.createElement(E.a,{nativeID:n,style:[X.textContentWrapper,a?null:[X.wrapperPadding,m&&X.bottomPadding]],testID:o},e?s.createElement(J.a,{isProtected:e.protected,isVerified:e.verified,name:e.name,profileImageUrl:e.profile_image_url_https,screenName:e.screen_name,style:[X.attributionWrapper,this._hasText()&&X.spaceBelow],withLink:b}):null,t?s.createElement(E.a,{style:[l||_||u||r?X.spaceBelow:null]},s.createElement(q,{dir:K(t.is_rtl),numberOfLines:1,type:"description"},t.content)):null,l?s.createElement(E.a,{style:[_||u||r?X.spaceBelow:null]},s.createElement(q,{dir:K(l.is_rtl),numberOfLines:d.a.shouldLimitTextToSingleLine()?1:c,type:"title"},l.content)):null,_?s.createElement(E.a,{style:[u||r?X.spaceBelow:null]},s.createElement(q,{dir:K(_.is_rtl),numberOfLines:d.a.shouldLimitTextToSingleLine()?1:p,type:"description"},_.content)):null,r?s.createElement(E.a,{style:[u?X.spaceBelow:null]},s.createElement(q,{dir:"auto",numberOfLines:1,type:"description"},r)):null,u?s.createElement(E.a,null,s.createElement(q,{dir:"auto",numberOfLines:1,type:"vanity"},u)):null)}}o()($,"displayName","@twitter/CardDetail");const K=e=>{switch(e){case!0:return"rtl";case!1:return"ltr";default:return"auto"}},X=g.a.create(e=>({attributionWrapper:{alignItems:"flex-start"},detailItemsWrapper:{flexDirection:"row",justifyContent:"space-between",flexGrow:1},extraContentWrapper:{flexShrink:0,padding:e.spaces.xSmall},textContentWrapper:{flexGrow:1,flexShrink:1,justifyContent:"center"},wrapperPadding:{paddingTop:e.spaces.xSmall,paddingHorizontal:e.spaces.xSmall},bottomPadding:{paddingBottom:e.spaces.xSmall},spaceBelow:{marginBottom:e.spaces.micro}}));var Q=$,Z=a("wpLu"),ee=a("21zW");const te=B.a.d58baa7e,ae=B.a.c5954d30,ie=e=>{switch(e){case!0:return"rtl";case!1:return"ltr";default:return"auto"}},re=g.a.create(e=>({contentWrapper:{flexGrow:1,flexShrink:1,justifyContent:"center"},attributionWrapper:{alignItems:"flex-start"},detailItemsWrapper:{flexDirection:"row",justifyContent:"space-between",flexGrow:1},wrapperPadding:{paddingTop:e.spaces.xxSmall,paddingHorizontal:e.spaces.xSmall},bottomPadding:{paddingBottom:e.spaces.xSmall},spaceBelow:{marginBottom:e.spaces.xxSmall},icon:{marginRight:e.spaces.micro},innerRow:{flexDirection:"row",flexShrink:1}}));var ne=e=>{const{attribution:t,destination:a,title:i,memberCount:r,titleMaxLines:n}=e;return s.createElement(T,{componentType:"twitter_list_details",destinationKey:a},({link:e,onClick:a})=>s.createElement(O.a,{interactive:!1,link:e,onClick:a,style:[re.contentWrapper,re.wrapperPadding,re.bottomPadding]},s.createElement(E.a,{style:[re.innerRow,re.spaceBelow]},s.createElement(W.c,{color:"deepGray",size:"small",weight:"bold"},s.createElement(Z.a,{style:re.icon}),ae),s.createElement(ee.a,{color:"deepGray"}),s.createElement(W.c,{color:"deepGray",size:"small"},s.createElement(B.a.I18NFormatMessage,{$i18n:"d6b02328",formattedCount:te(r),count:r}))),s.createElement(E.a,{style:re.spaceBelow},s.createElement(q,{dir:ie(i.is_rtl),numberOfLines:d.a.shouldLimitTextToSingleLine()?1:n,type:"title",weight:"bold"},i.content)),s.createElement(J.a,{avatarSize:"small",isProtected:t.protected,isVerified:t.verified,name:t.name,nameSize:"small",profileImageUrl:t.profile_image_url_https,screenName:t.screen_name,screenNameSize:"small",style:[re.attributionWrapper],withLink:!1})))},oe=a("6Rrp");const se=B.a.e86732e3,de=B.a.f668e928;class le extends s.Component{render(){const{noVotes:e,isFinal:t,isSelected:a,isWinner:i,label:r,percentageOfTotalVote:n}=this.props,o=100===n,d=i?"bold":void 0,l=e?"7px":n+"%",c="light"===g.a.theme.paletteName&&g.a.theme.highContrastEnabled,_=n/100;return s.createElement(E.a,{style:ce.choice},s.createElement(E.a,{style:[ce.choicePercentageBar,c&&{backgroundColor:g.a.theme.colors.fadedGray},(t||o||e)&&ce.choicePercentageBarRoundCorners,i&&ce.choicePercentageBarWinner,{width:l}]}),s.createElement(E.a,{style:ce.choiceLabel},s.createElement(W.c,{weight:d},r,a?" ":null,a?s.createElement(oe.a,{accessibilityLabel:se}):null)),s.createElement(E.a,{style:ce.choiceLabel&&ce.choicePercentage},s.createElement(W.c,{weight:d},de(_))))}}le.propTypes={};const ce=g.a.create(e=>({choice:{alignItems:"center",flexDirection:"row",height:e.spaces.large,justifyContent:"space-between"},choicePercentageBar:{backgroundColor:e.colors.lightGray,borderTopLeftRadius:e.borderRadii.small,borderBottomLeftRadius:e.borderRadii.small,position:"absolute",top:0,left:0,bottom:0},choicePercentageBarRoundCorners:{borderRadius:e.borderRadii.small},choicePercentageBarWinner:{backgroundColor:e.colors.lightPrimary},choiceLabel:{paddingVertical:0,paddingHorizontal:e.spaces.xSmall},choicePercentage:{paddingStart:e.spaces.xSmall}}));var _e=le;class pe extends s.Component{render(){const{choices:e,totalVotes:t}=this.props,a=Math.max(...e.map(e=>e.count));return e.map((e,i)=>s.createElement(E.a,{key:e.index,style:0!==i&&ue.topMargin},this._renderChoiceResult(e,t,a)))}_renderChoiceResult(e,t,a){const{isFinal:i,selectedChoice:r}=this.props,n=Math.round(e.count/t*1e3)/10||0;return s.createElement(_e,{isFinal:i,isSelected:r===e.index,isWinner:i&&e.count===a,label:d.a.renderTwemojiText(e.cta,!0),noVotes:0===e.count,percentageOfTotalVote:n})}}const ue=g.a.create(e=>({topMargin:{marginTop:e.spaces.xxSmall}}));var me=pe;class be extends s.Component{render(){const{choices:e,endDatetimeUtc:t,isAuthor:a,isFinal:i,totalVotes:r,resultTextSize:n,selectedChoice:o}=this.props;return s.createElement(E.a,null,o||i||a?s.createElement(me,{choices:e,isFinal:i,selectedChoice:o,totalVotes:r}):s.createElement(S,{buttonSize:"normalCompact",buttons:e.map(({cta:e,index:t,destination:a})=>({cta:e,index:t,destination:a})),chromeless:!0}),s.createElement(W.c,{color:"deepGray",size:n,style:Ie.pollStatus},d.a.renderNumVotesLabel(r)," ·"," ",i?d.a.renderFinalResultsLabel():d.a.renderTimeLeftLabel(t)))}}o()(be,"displayName","@twitter/CardPoll");const Ie=g.a.create(e=>({pollStatus:{marginTop:e.spaces.xSmall}}));var Te=be,ge=a("bPFD"),Ee=a("htQn"),he=a("7nmT"),ye=a.n(he),Ae=a("U7kY");const ve=Object.freeze({large:{title:1,description:2},medium:{title:2,description:1},small:{title:2,description:0}}),Se=Object.freeze({large:{title:1,description:2},medium:{title:2,description:1},small:{title:2,description:0}}),De=Object.freeze({large:5,medium:4,small:3}),Ce=Object.freeze({large:"normal",medium:"normalCompact",small:"normalCompact"}),Oe=(e,t,a,i={})=>{const r={large:Se,small:ve}[e],{alwaysShowDescription:n=!1,capMaxTitleLines:o=Number.MAX_SAFE_INTEGER}=i,s=t>=450?r.large:t>=400?r.medium:r.small,d=[a.category||null,a.attribution||null,a.footer||null,a.vanity||null],{description:l,title:c}=a,_=d.some(Boolean),p=Math.min(o,s.title+(l?0:s.description)+(_?0:1)),u=Math.max(n?1:0,"small"!==e||c||_?s.description:s.description+1);return"small"===e?{titleMaxLines:p,descriptionMaxLines:u}:{titleMaxLines:Math.min(2,p),descriptionMaxLines:u}},Le=(e,t)=>{const a=[t.category||null,t.attribution||null,t.footer||null,t.vanity||null,t.title,t.description].filter(Boolean).length,i=e>=450?De.large:e>=400?De.medium:De.small;return Me(i,a)},Ne=e=>e>=450?Ce.large:e>=400?Ce.medium:Ce.small,Me=(e,t)=>{const{borderWidths:a,fontSizes:i,lineHeight:r,spaces:n}=g.a.theme;return`calc(${`${i.normal} * ${r} * ${e}`} + ${n.xSmall+" * 2"} + ${a.small+" * 2"} + ${`${n.micro} * ${t-1}`})`},Re=(e,t)=>{const a=e?Math.abs(e-t):1/0,i=Ae.a.getScrollbarWidth();return void 0===e||a>i};class fe extends s.Component{constructor(e){super(e),o()(this,"_updateSizes",e=>{if(Re(this._previousWidth,e)){this._previousWidth=e;const{details:t,buttons:a}=this.props,{titleMaxLines:i,descriptionMaxLines:r,buttonSize:n,playOverlaySize:o}=this.state,s=t?Oe("large",e,t):{titleMaxLines:void 0,descriptionMaxLines:void 0},d=a?Ne(e):void 0,l=e<175?"small":"normal",{titleMaxLines:c,descriptionMaxLines:_}=s;(c!==i||_!==r||l!==o||d&&d!==n)&&this.setState({buttonSize:d,descriptionMaxLines:_,playOverlaySize:l,titleMaxLines:c})}}),o()(this,"_handleLayout",e=>{const{width:t}=e.nativeEvent.layout;this._updateSizes(t)}),o()(this,"_setRootNode",e=>{if(e){const t=ye.a.findDOMNode(e);t&&t instanceof window.HTMLElement&&this._updateSizes(t.clientWidth)}}),this.state=Object.assign({},e.details?Oe("large",500,e.details):null,e.buttons?{buttonSize:Ne(500)}:null)}render(){const{a11yDomIds:e,buttons:t,chromeless:a,details:i,dmSentOrReceived:r,nativeID:n,onLikelyInteraction:o,poll:d,testIDs:l,withInteractiveStyling:c,withSquareBottomBorderRadius:_}=this.props,p=this._renderSwipeableMedia(),u=this._renderMedia()||p,m=!!d,b=!a&&!p,I=a&&!p,T=!!(d||t||i)&&!p;return s.createElement(Ee.a,{"aria-labelledby":n&&e?[e.cardMediaDomId,e.cardDetailDomId].join(" "):void 0,nativeID:n,onHoverIn:o,onLayout:this._handleLayout,onPressIn:o,style:[r&&Pe[r],b&&Pe.border,_&&we[_],p&&Pe.rootWithCarousel],testID:null==l?void 0:l.wrapper,viewRef:this._setRootNode,withFocusWithinFocusRing:!0,withInteractiveStyling:c,withOutsetFocusRing:!0},u?s.createElement(E.a,{importantForAccessibility:"no-hide-descendants",nativeID:n&&e?e.cardMediaDomId:void 0,style:[Pe.media,I&&Pe.border,T&&Pe.mediaBottomBorder,m&&Pe.mediaBottomSpace,!!i&&we.both],testID:null==l?void 0:l.layoutLarge.media},u):null,s.createElement(E.a,{nativeID:n&&e?e.cardDetailDomId:void 0,style:[p&&Pe.carouselBottomContent]},this._renderDetail(),this._renderListDetail(),this._renderButtons(),this._renderPoll()))}_renderDetail(){if(!this.props.details)return null;const{titleMaxLines:e,descriptionMaxLines:t}=this.state,{buttons:a,chromeless:i,details:r,testIDs:n}=this.props,{attribution:o,category:d,description:l,destination:c,footer:_,title:p,vanity:u}=r;return s.createElement(Q,{attribution:o,category:d,chromeless:i,description:0!==t?l:void 0,descriptionMaxLines:t,destination:c,footer:_,testID:null==n?void 0:n.layoutLarge.detail,title:p,titleMaxLines:e,vanity:u,withBottomPadding:!a})}_renderListDetail(){const{listDetails:e}=this.props,{titleMaxLines:t}=this.state;if(!e)return null;const{attribution:a,destination:i,title:r,memberCount:n}=e;return s.createElement(ne,{attribution:a,destination:i,memberCount:n,title:r,titleMaxLines:t})}_renderButtons(){const{buttonSize:e}=this.state,{chromeless:t,buttons:a,useBlueButtonForAppDetails:i}=this.props;return a?s.createElement(S,{buttonSize:e,buttons:a,chromeless:t,useBlueButtonForAppDetails:i}):null}_renderPoll(){const{poll:e}=this.props;return e?s.createElement(Te,e):null}_renderSwipeableMedia(){const{renderVideoPlayer:e,swipeableMedia:t}=this.props;return t?s.createElement(V,{playOverlaySize:this.state.playOverlaySize,renderVideoPlayer:e,swipeableMedia:t}):null}_renderMedia(){const{locationKey:e,media:t,renderVideoPlayer:a}=this.props;if(!t||!t.mediaEntity)return null;const{aspect_ratio:i,mediaEntity:r,destination:n,overlay:o}=t;if("photo"===r.type){const{width:t,height:a}=r.original_info;return s.createElement(P,{destination:n,locationKey:e&&e+"-largeCard",mediaEntity:r,overlay:o,playOverlaySize:this.state.playOverlaySize,ratio:i||(r?Math.max(t/a,1):void 0)})}return"iframe"===r.type?s.createElement(_.a,{ratio:Math.max(r.aspect_ratio,1)},s.createElement(ge.a,{src:r.url,style:Pe.iframe})):"video"===r.type||"uc_video"===r.type||"live_broadcast"===r.type||"vine"===r.type||"tweet_video"===r.type?a?s.createElement(gt.Context.Consumer,null,({isDataSaverEnabled:e,isPromoted:t})=>a(r,e?t?"suboptimal":"preview":void 0)):null:void 0}}o()(fe,"defaultProps",{isPromoted:!1,withInteractiveStyling:!0}),fe.propTypes={};const we=g.a.create(e=>({both:{borderBottomRightRadius:e.borderRadii.none,borderBottomLeftRadius:e.borderRadii.none},left:{borderBottomLeftRadius:e.borderRadii.none},right:{borderBottomRightRadius:e.borderRadii.none}})),Pe=g.a.create(e=>({media:{display:"block"},mediaBottomBorder:{borderBottomColor:e.colors.nestedBorderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},mediaBottomSpace:{marginBottom:e.spaces.xSmall},border:{borderRadius:e.borderRadii.xLarge,borderColor:e.colors.nestedBorderColor,borderStyle:"solid",borderWidth:e.borderWidths.small,overflow:"hidden"},rootWithCarousel:{marginRight:e.spaces.large,borderRadius:e.borderRadii.xLarge},carouselBottomContent:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge,borderColor:e.colors.nestedBorderColor,borderStyle:"solid",borderWidth:e.borderWidths.small,marginTop:-.5},iframe:{height:"100%"},sent:{borderColor:e.colors.primary},received:{borderColor:e.colors.lightGray}}));var xe=fe;const Ue=B.a.hdf426f5,Be=B.a.a3efd2c3,ke=B.a.b91c8e53,Fe=B.a.b3826294;class Ye extends s.Component{constructor(e){super(e),o()(this,"_composeTopicCardAccessibilityLabel",(e,t)=>t&&t.content&&t.content.length>0?Fe({title:e.content,description:t.content}):ke({title:e.content})),o()(this,"_updateSizes",e=>{if(Re(this._previousWidth,e)){this._previousWidth=e;const{titleMaxLines:t,descriptionMaxLines:a,imageWidthStyle:i}=this.state,{details:r,topicDetails:n}=this.props,o=Oe("small",e,n||r,this._getLinesForWidthOptions()),s=Le(e,n||r),{titleMaxLines:d,descriptionMaxLines:l}=o;s===i&&d===t&&l===a||this.setState({titleMaxLines:d,descriptionMaxLines:l,imageWidthStyle:s})}}),o()(this,"_handleLayout",e=>{const{width:t}=e.nativeEvent.layout;this._updateSizes(t)}),o()(this,"_setRootNode",e=>{if(e){const t=ye.a.findDOMNode(e);t&&t instanceof window.HTMLElement&&this._updateSizes(t.clientWidth)}}),o()(this,"_getLinesForWidthOptions",()=>{const{topicDetails:e}=this.props;return Object.assign({alwaysShowDescription:!!e},e?{capMaxTitleLines:2}:null)});const{topicDetails:t,details:a}=e,{titleMaxLines:i,descriptionMaxLines:r}=Oe("small",500,t||a,this._getLinesForWidthOptions());this.state={descriptionMaxLines:r,titleMaxLines:i,imageWidthStyle:Le(500,t||a)}}render(){const{a11yDomIds:e,dmSentOrReceived:t,nativeID:a,onLikelyInteraction:i,reverse:r,testIDs:n,withInteractiveStyling:o,withSquareBottomBorderRadius:d,topicDetails:l}=this.props,{imageWidthStyle:c}=this.state,_=s.createElement(E.a,{key:"details",style:je.details},l?this._renderTopicDetail():this._renderDetail()),p=s.createElement(E.a,{importantForAccessibility:"no-hide-descendants",key:"media",nativeID:a&&e?e.cardMediaDomId:void 0,style:[je.media,{width:c},d&&Ge[d],r?je.mediaLeftBorder:je.mediaRightBorder],testID:null==n?void 0:n.layoutSmall.media},this._renderMedia());return s.createElement(Ee.a,{"aria-labelledby":a&&e?[e.cardMediaDomId,e.cardDetailDomId].join(" "):void 0,nativeID:a,onHoverIn:i,onLayout:this._handleLayout,onPressIn:i,style:[je.root,d&&Ge[d],t&&je[t]],testID:null==n?void 0:n.wrapper,viewRef:this._setRootNode,withFocusWithinFocusRing:!0,withInteractiveStyling:o,withOutsetFocusRing:!0},r?[_,p]:[p,_])}_renderDetail(){const{titleMaxLines:e,descriptionMaxLines:t}=this.state,{a11yDomIds:a,details:i,testIDs:r,nativeID:n}=this.props;return s.createElement(Q,{attribution:i.attribution,category:i.category,description:0!==t?i.description:void 0,descriptionMaxLines:t,destination:i.destination,footer:i.footer,nativeID:n&&a?a.cardDetailDomId:void 0,testID:null==r?void 0:r.layoutSmall.detail,title:i.title,titleMaxLines:e,vanity:i.vanity,withBottomPadding:!0})}_renderTopicDetail(){if(!this.props.topicDetails)return null;const{titleMaxLines:e,descriptionMaxLines:t}=this.state,{topicDetails:{description:a,title:i,destination:r}}=this.props,n={is_rtl:a&&a.is_rtl||i.is_rtl,content:a&&a.content?Ue({description:a.content}):Be};return s.createElement(Q,{accessibilityLabel:this._composeTopicCardAccessibilityLabel(i,a),description:n,descriptionMaxLines:t,destination:r,title:i,titleMaxLines:e,withBottomPadding:!0})}_renderMedia(){const{locationKey:e,media:t}=this.props,{mediaEntity:a,destination:i,overlay:r}=t;return a&&"photo"!==a.type?null:s.createElement(gt.Context.Consumer,null,({isDataSaverEnabled:t,isPromoted:n})=>{const o=t&&!n;return s.createElement(P,{destination:i,locationKey:e&&e+"-smallCard",mediaEntity:a,overlay:r,ratio:1,renderPlaceholder:o})})}}o()(Ye,"defaultProps",{withInteractiveStyling:!0}),Ye.propTypes={};const Ge=g.a.create(e=>({both:{borderBottomRightRadius:e.borderRadii.none,borderBottomLeftRadius:e.borderRadii.none},left:{borderBottomLeftRadius:e.borderRadii.none},right:{borderBottomRightRadius:e.borderRadii.none}})),je=g.a.create(e=>({root:{borderColor:e.colors.nestedBorderColor,borderStyle:"solid",borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.xLarge,flexDirection:"row",overflow:"hidden"},media:{display:"block",borderColor:e.colors.nestedBorderColor,borderStyle:"solid",overflow:"hidden"},mediaLeftBorder:{borderLeftWidth:e.borderWidths.small,borderBottomLeftRadius:e.borderRadii.none,borderTopLeftRadius:e.borderRadii.none},mediaRightBorder:{borderRightWidth:e.borderWidths.small,borderBottomRightRadius:e.borderRadii.none,borderTopRightRadius:e.borderRadii.none},details:{flexGrow:1,flexShrink:1,justifyContent:"center"},sent:{borderColor:e.colors.primary},received:{borderColor:e.colors.lightGray}}));var Ve=Ye,We=a("QX9J"),ze=a("Qyxo");a("WNMA");const He=(e,t,a)=>("string"==typeof a?[a]:a).map(a=>e[a]&&e[a][t]).find(e=>!!e),qe=He,Je=He,$e=He,Ke=He,Xe=(e,t)=>{const a=e=>({and:t=>a(e&&i(t)),or:t=>a(e||i(t)),result:()=>e}),i=t=>"string"==typeof t?!!e[t]:t(a(!0).and).result();return i(t)},Qe=(e,t)=>({media_url_https:e.url,type:"photo",original_info:{width:e.width,height:e.height},ext_media_color:{palette:[]},cropCandidates:t,altText:e.alt||""}),Ze=e=>{const t=e.match(/\/([0-9]+)(\/|\.)/);return t?t[1]:""},et={url:"https://pbs.twimg.com/lex/placeholder_live_nomargin.png",width:1920,height:1080},tt="NOT_STARTED",at=B.a.db44ff5b,it=B.a.c600045f;var rt=a("/Ikv");const nt=(e,t,a,i)=>{const r={};var n;return e&&(r[m.b.IMAGE_ENTITY]=Qe(e)),t&&a.tweetId&&(r[m.b.IFRAME_ENTITY]={type:"iframe",url:(n=a.tweetId,"https://cards-frame.twitter.com/i/cards/tfw/v1/uc/"+n),aspect_ratio:i}),r},ot=({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ke(a,"image_value","player_image_original"),n=qe(a,"string_value","description"),o=parseInt(qe(a,"string_value","player_width"),10)/parseInt(qe(a,"string_value","player_height"),10);return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.STATIC]:{size:"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value","card_url"),vanity:qe(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS],[m.c.STATIC]:[m.b.MEDIA_STATIC,m.b.DETAILS]},media_entities:{[m.b.IMAGE_ENTITY]:Qe(r),[m.b.VIDEO_ENTITY]:{type:"vine",aspect_ratio:o,content_id:Ze(r.url),poster_image:r,publisher_id:qe(a,"string_value","site")||i.tweetUserId,variants:[{src:qe(a,"string_value","player_stream_url"),type:qe(a,"string_value","player_stream_content_type")}]}},components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,destination:m.b.DESTINATION,overlay:{type:m.g.PLAY}}},[m.b.DETAILS]:{type:m.d.DETAILS,data:Object.assign({destination:m.b.DESTINATION},n?{description:{content:n}}:null,{title:{content:qe(a,"string_value","title")}})}}}}};var st=a("aITJ");const dt=Object.assign({media:!0,details:!0,button_group:!0,app_store_details:!0,swipeable_media:!0,twitter_list_details:!0},{media_with_details_horizontal:!0}),lt=e=>{const t=t=>t.map(t=>e.find(({type:e})=>e===t)).find(Boolean),a="android"===d.a.getMobileOS()?t(["android_app","iphone_app","ipad_app"]):t(["iphone_app","ipad_app","android_app"]);if(!a)return;a.category||(a.category={is_rtl:!1,content:"android_app"===a.type?"Play Store":"App Store"});const i="android_app"===a.type?"http://play.google.com/store/apps/details?id="+a.id:(e=>"https://itunes.apple.com/app/id"+e)(a.id);return a.url=st.a.isMobileOS()?{pathname:i,external:!0,openInSameFrame:!0}:i,a},ct=e=>e.unified_card&&e.unified_card.string_value&&"string"==typeof e.unified_card.string_value?JSON.parse(e.unified_card.string_value):{components:[],component_objects:{},destination_objects:{},media_entities:{},app_store_data:{},users:{}},_t=e=>e+"_static",pt={convertAmplifyCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ke(a,"image_value","player_image_original"),n=parseInt(qe(a,"string_value","player_width"),10)/parseInt(qe(a,"string_value","player_height"),10),o=qe(a,"string_value","content_duration_seconds"),s=qe(a,"string_value","title"),d=qe(a,"string_value","description");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.STATIC]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:s||d?[m.b.MEDIA,m.b.DETAILS]:[m.b.MEDIA],[m.c.STATIC]:s||d?[m.b.MEDIA_STATIC,m.b.DETAILS_STATIC]:[m.b.MEDIA_STATIC]},destinations:{[m.b.DESTINATION_STATIC]:{type:m.f.BROWSER,data:{url_data:{url:i.tweetPermalink||m.e},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[m.b.IMAGE_ENTITY]:Qe(r||{}),[m.b.VIDEO_ENTITY]:Object.assign({type:"video",aspect_ratio:n,content_id:qe(a,"string_value","amplify_content_id")},o?{duration_ms:1e3*parseInt(o,10)}:null,{vmap_url:qe(a,"string_value","amplify_url_vmap"),poster_image:r,publisher_id:qe(a,"string_value","site")||i.tweetUserId,variants:[]})},components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,destination:m.b.DESTINATION_STATIC,overlay:{type:m.g.PLAY}}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{description:d?{content:d}:void 0,title:s?{content:s}:void 0}},[m.b.DETAILS_STATIC]:{type:m.d.DETAILS,data:{description:d?{content:d}:void 0,destination:m.b.DESTINATION_STATIC,title:s?{content:s}:void 0}}}}}},convertAppCard:({cardId:e,cardType:t,data:a})=>{const i=Ke(a,"image_value","thumbnail_original"),r=qe(a,"string_value","description"),n=qe(a,"string_value","app_star_rating"),o=qe(a,"string_value","app_num_ratings"),s=n&&o?d.a.renderRatingsLabel({appStarRating:n,appNumRatings:o}):void 0,l=qe(a,"string_value","card_url");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:Object.assign({url:qe(a,"string_value","card_url")},s?null:{vanity:l}),scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},i?{[m.b.IMAGE_ENTITY]:Qe(i)}:null),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:i?m.b.IMAGE_ENTITY:null,aspect_ratio:1,destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{description:r?{content:r}:void 0,destination:m.b.DESTINATION,footer:s,title:{content:qe(a,"string_value","title")}}}}}}},convertAppplayerCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ke(a,"image_value","player_image_original"),n=parseInt(qe(a,"string_value","player_width"),10)/parseInt(qe(a,"string_value","player_height"),10),o=qe(a,"string_value","content_duration_seconds");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.STATIC]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS],[m.c.STATIC]:[m.b.MEDIA_STATIC,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value","card_url")},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[m.b.IMAGE_ENTITY]:Qe(r),[m.b.VIDEO_ENTITY]:Object.assign({type:"video",aspect_ratio:n,content_id:qe(a,"string_value","player_content_id")||Ze(r.url)},o?{duration_ms:1e3*parseInt(o,10)}:null,{vmap_url:qe(a,"string_value","player_stream_url"),poster_image:r,publisher_id:qe(a,"string_value","player_owner_id")||i.tweetUserId,variants:[{src:qe(a,"string_value","player_hls_url"),type:"application/x-mpegURL"}]})},components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY,aspect_ratio:n}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,aspect_ratio:n,destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{destination:m.b.DESTINATION,title:{content:qe(a,"string_value","title")},footer:qe(a,"string_value","app_category")||"App Store"}}}}}},convertBroadcastCard:({cardId:e,cardType:t,data:a,users:i})=>{const r=$e(a,"user_value","site"),n=r&&i[r.id_str],o=qe(a,"string_value","broadcaster_display_name"),s=qe(a,"string_value","broadcast_state")===tt,l=Ke(a,"image_value","broadcast_thumbnail_original"),c=Ke(a,"image_value","broadcast_pre_live_slate")||et,_=s?c:l,p=qe(a,"string_value","broadcast_scheduled_start_time"),u=s&&p?d.a.renderStartingTimeLabel(p):void 0,b=g.a.theme.aspectRatios.landscape,I=Math.max(parseInt(qe(a,"string_value","broadcast_width"),10)/parseInt(qe(a,"string_value","broadcast_height"),10),1);return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.STATIC]:{size:_?"large":"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),fetch_updates:{[m.c.DEFAULT]:!0},on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[s?m.b.MEDIA_SECONDARY:m.b.MEDIA,m.b.DETAILS],[m.c.STATIC]:[m.b.MEDIA_SECONDARY,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROADCAST,data:{broadcast_data:{id:qe(a,"string_value","broadcast_id")},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},_?{[m.b.IMAGE_ENTITY]:Qe(_)}:null,{[m.b.VIDEO_ENTITY]:Object.assign({type:"live_broadcast",aspect_ratio:I,broadcast_id:qe(a,"string_value","broadcast_id"),content_id:qe(a,"string_value","broadcast_media_key"),destination:m.b.DESTINATION},_?{poster_image:_}:null,{timecode:qe(a,"string_value","broadcast_timecode")||qe(a,"string_value","broadcast_replay_edited_start_time")})}),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY,aspect_ratio:I}},[m.b.MEDIA_SECONDARY]:{type:m.d.MEDIA,data:{id:_?m.b.IMAGE_ENTITY:null,aspect_ratio:b,destination:m.b.DESTINATION,overlay:s?u?{type:m.g.LABEL,text:u}:void 0:{type:m.g.PLAY}}},[m.b.DETAILS]:{type:m.d.DETAILS,data:Object.assign({destination:m.b.DESTINATION},n?{attribution:n}:{category:{content:o}},{title:{content:qe(a,"string_value","broadcast_title")}})}}}}},convertDirectStoreLinkAppCard:({cardId:e,cardType:t,data:a})=>{const i=Ke(a,"image_value","thumbnail_original"),r=qe(a,"string_value","description"),n=qe(a,"string_value","app_star_rating"),o=qe(a,"string_value","app_num_ratings"),s=n&&o?d.a.renderRatingsLabel({appStarRating:n,appNumRatings:o}):void 0,l=qe(a,"string_value","card_url");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:Object.assign({url:qe(a,"string_value","card_url")},s?null:{vanity:l}),scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},i?{[m.b.IMAGE_ENTITY]:Qe(i)}:null),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:i?m.b.IMAGE_ENTITY:null,aspect_ratio:1,destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{description:r?{content:r}:void 0,destination:m.b.DESTINATION,footer:s,title:{content:qe(a,"string_value","title")}}}}}}},convertImageDirectMessageCard:({cardId:e,cardType:t,data:a,cardContext:i,users:r})=>{const n=Ke(a,"image_value","image_original"),o=e=>[1,2,3,4].map(t=>{const i=qe(a,"string_value","cta"+t),r=qe(a,"string_value",`cta${t}_wm_id`);return i&&r?{cta:i,wm_id:r,destination:e,icon:"dm",index:t}:null}).filter(Boolean),s=o(m.b.DESTINATION),d=o(m.b.DESTINATION_STATIC),l=$e(a,"user_value","recipient"),c=l&&r[l.id_str],_=l.id_str!==i.tweetUserId&&c;return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,..._?[m.b.DETAILS]:[],m.b.BUTTON_GROUP],[m.c.STATIC]:[m.b.MEDIA_STATIC,..._?[m.b.DETAILS]:[],m.b.BUTTON_GROUP_STATIC]},destinations:{[m.b.DESTINATION]:{type:m.f.ACTION,data:{action_data:{persist:!1,type:"dm",recipient:l.id_str},auth_required:!0,scribe:"click",promoted_log:"dm_button_click"}},[m.b.DESTINATION_STATIC]:{type:m.f.BROWSER,data:{url_data:{url:i.tweetPermalink||m.e},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[m.b.IMAGE_ENTITY]:Qe(n)},components_data:Object.assign({[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,destination:m.b.DESTINATION_STATIC}}},_?{[m.b.DETAILS]:{type:m.d.DETAILS,data:{attribution:c}}}:null,{[m.b.BUTTON_GROUP]:{type:m.d.BUTTON_GROUP,data:{buttons:s}},[m.b.BUTTON_GROUP_STATIC]:{type:m.d.BUTTON_GROUP,data:{buttons:d}}})}}},convertLiveEventCard:({cardContext:e,cardId:t,cardType:a,data:i,users:r})=>{const n=$e(i,"user_value","author"),o=n&&r[n.id_str],s=qe(i,"string_value","event_id"),d=qe(i,"string_value","event_category"),l=qe(i,"string_value","media_type"),c="broadcast"===l,_="video"===l,p=qe(i,"string_value","broadcast_id"),u=Math.max(parseInt(qe(i,"string_value","broadcast_width"),10)/parseInt(qe(i,"string_value","broadcast_height"),10),1),b=qe(i,"string_value","broadcast_media_key"),I=qe(i,"string_value","media_tweet_id"),T=Ke(i,"image_value","event_thumbnail_original"),E=Ke(i,"image_value","broadcast_thumbnail"),h=c?E:T,y=c?void 0:[{h:parseInt(qe(i,"string_value","event_thumbnail_media_size_crops_16x9_h"),10),w:parseInt(qe(i,"string_value","event_thumbnail_media_size_crops_16x9_w"),10),x:parseInt(qe(i,"string_value","event_thumbnail_media_size_crops_16x9_x"),10),y:parseInt(qe(i,"string_value","event_thumbnail_media_size_crops_16x9_y"),10)}],A=qe(i,"string_value","remind_me_notification_id"),v=Je(i,"boolean_value","remind_me_toggle_visible")&&!!A,S=Je(i,"boolean_value","remind_me_subscribed"),D=S?it:at;return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.DATA_SAVER]:{size:"small"},[m.c.SECONDARY]:{size:"small",reverse:!0},[m.c.STATIC]:{size:h?"large":"small"}},card:{card_name:a,card_url:qe(i,"string_value","card_url"),fetch_updates:{[m.c.DEFAULT]:!0,[m.c.DATA_SAVER]:!0},on_visibility:{scribe:"show"},id:t,components:{[m.c.DEFAULT]:[c||_?m.b.MEDIA:m.b.MEDIA_STATIC,m.b.DETAILS,m.b.BUTTON_GROUP],[m.c.DATA_SAVER]:[m.b.MEDIA_STATIC,m.b.DETAILS,m.b.BUTTON_GROUP],[m.c.SECONDARY]:[m.b.MEDIA_STATIC,m.b.DETAILS],[m.c.STATIC]:[m.b.MEDIA_STATIC,m.b.DETAILS,m.b.BUTTON_GROUP_STATIC]},destinations:{[m.b.DESTINATION]:{type:m.f.EVENT,data:{event_data:{id:s},scribe:"open_link",promoted_log:"card_url_click"}},[m.b.DESTINATION_SECONDARY]:{type:m.f.ACTION,data:{action_data:{persist:!0,type:"reminder"},auth_required:!0,scribe:"reminder",promoted_log:"card_url_click"}},[m.b.DESTINATION_STATIC]:{type:m.f.BROWSER,data:{url_data:{url:e&&e.tweetPermalink||m.e},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},h?{[m.b.IMAGE_ENTITY]:Qe(h,y)}:null,{[m.b.VIDEO_ENTITY]:c?{type:"live_broadcast",aspect_ratio:u,broadcast_id:p,content_id:b,destination:m.b.DESTINATION,poster_image:h,timecode:qe(i,"string_value","broadcast_replay_edited_start_time")}:{type:"tweet_video",aspect_ratio:g.a.theme.aspectRatios.landscape,media_tweet_id:I,event_id:s,poster_image:h}}),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY,aspect_ratio:c?u:g.a.theme.aspectRatios.landscape}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,aspect_ratio:g.a.theme.aspectRatios.landscape,destination:m.b.DESTINATION}},[m.b.BUTTON_GROUP]:{type:m.d.BUTTON_GROUP,data:Object.assign({},v?{buttons:[{cta:D,destination:m.b.DESTINATION_SECONDARY,eventId:s,index:0,isSelected:S,notificationId:A}]}:null)},[m.b.BUTTON_GROUP_STATIC]:{type:m.d.BUTTON_GROUP,data:Object.assign({},v?{buttons:[{cta:D,destination:m.b.DESTINATION_STATIC,eventId:s,index:0,isSelected:S,notificationId:A}]}:null)},[m.b.DETAILS]:{type:m.d.DETAILS,data:Object.assign({destination:m.b.DESTINATION},o?{attribution:o}:d?{category:{content:d}}:null,{title:{content:qe(i,"string_value","event_title")}})}}}}},convertMessageMeCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=qe(a,"string_value","default_composer_text"),n=qe(a,"string_value","welcome_message_id"),o={composer_text:r,cta:d.a.getMessageMeString(qe(a,"string_value","cta")),icon:"dm",index:0,wm_id:n},s=$e(a,"user_value","recipient");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large",chromeless:!0},[m.c.STATIC]:{size:"large",chromeless:!0}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"message_me_show"},id:e,components:{[m.c.DEFAULT]:[m.b.BUTTON_GROUP],[m.c.STATIC]:[m.b.BUTTON_GROUP_STATIC]},destinations:{[m.b.DESTINATION]:{type:m.f.ACTION,data:{action_data:{persist:!1,type:"dm",recipient:s.id_str},auth_required:!0,scribe:"message_me_click",promoted_log:"card_url_click"}},[m.b.DESTINATION_STATIC]:{type:m.f.BROWSER,data:{url_data:{url:i.tweetPermalink||m.e},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{},components_data:{[m.b.BUTTON_GROUP]:{type:m.d.BUTTON_GROUP,data:{buttons:[Object.assign({},o,{destination:m.b.DESTINATION})]}},[m.b.BUTTON_GROUP_STATIC]:{type:m.d.BUTTON_GROUP,data:{buttons:[Object.assign({},o,{destination:m.b.DESTINATION_STATIC})]}}}}}},convertMomentCard:({cardId:e,cardType:t,data:a,users:i})=>{const r=Ke(a,"image_value","photo_image")||{url:qe(a,"string_value","cover_format_media_url"),width:parseInt(qe(a,"string_value","cover_format_media_size_w"),10)||0,height:parseInt(qe(a,"string_value","cover_format_media_size_h"),10)||0},n=$e(a,"user_value","author"),o=n&&i[n.id_str],s=qe(a,"string_value","title"),d=qe(a,"string_value","description"),l=qe(a,"string_value","subcategory_string");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"small",reverse:!0}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.MOMENT,data:{moment_data:{moment:qe(a,"string_value","id")},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[m.b.IMAGE_ENTITY]:Qe(r)},components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,aspect_ratio:1,overlay:{type:m.g.MOMENTS},destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{attribution:o,category:!o&&l?{content:l}:void 0,description:d?{content:d}:void 0,destination:m.b.DESTINATION,title:s?{content:s}:void 0}}}}}},convertPeriscopeBroadcastCard:({cardId:e,cardType:t,data:a,users:i})=>{const r=Ke(a,"image_value","thumbnail_original"),n=Math.max(parseInt(qe(a,"string_value","broadcast_width"),10)/parseInt(qe(a,"string_value","broadcast_height"),10),1),o=qe(a,"string_value","broadcaster_twitter_id"),s=o?i[o]:void 0,d=qe(a,"string_value","description");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.STATIC]:{size:r?"large":"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS],[m.c.STATIC]:[m.b.MEDIA_STATIC,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value","card_url"),vanity:qe(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},r?{[m.b.IMAGE_ENTITY]:Qe(r)}:null,{[m.b.VIDEO_ENTITY]:Object.assign({type:"live_broadcast",aspect_ratio:n,broadcast_id:qe(a,"string_value","id"),content_id:qe(a,"string_value","broadcast_media_key"),destination:m.b.DESTINATION},r?{poster_image:r}:null,{timecode:qe(a,"string_value","timecode")||qe(a,"string_value","replay_edited_start_time")})}),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY,aspect_ratio:n}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:r?m.b.IMAGE_ENTITY:null,destination:m.b.DESTINATION,overlay:{type:m.g.PLAY}}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{attribution:s,description:d?{content:d}:void 0,destination:m.b.DESTINATION,title:o?void 0:{content:qe(a,"string_value","title")}}}}}}},convertPlayerCard:({cardId:e,cardType:t,data:a,cardContext:i,users:r})=>{const n=Ke(a,"image_value","player_image_original"),o=qe(a,"string_value","description"),s=qe(a,"string_value","player_url"),d=parseInt(qe(a,"string_value","player_width"),10)/parseInt(qe(a,"string_value","player_height"),10),l=[m.b.MEDIA,m.b.DETAILS],c=[m.b.MEDIA_STATIC,m.b.DETAILS_SECONDARY];return rt.a.isVineCard({name:t,binding_values:a})?ot({cardId:e,cardType:t,data:a,cardContext:i,users:r}):{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"small"},[m.c.SECONDARY]:{size:"large"},[m.c.STATIC]:{size:"small"},[m.c.DATA_SAVER]:{size:"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:i.tweetId?l:c,[m.c.SECONDARY]:[m.b.MEDIA_SECONDARY,m.b.DETAILS_SECONDARY],[m.c.STATIC]:c,[m.c.DATA_SAVER]:[m.b.MEDIA_STATIC,m.b.DETAILS_SECONDARY]},destinations:{[m.b.DESTINATION]:{type:m.f.ACTION,data:{action_data:{next_state:m.c.SECONDARY,persist:!1,vanity:qe(a,"string_value",["vanity_url","card_url"])},scribe:"click",promoted_log:"card_url_click"}},[m.b.DESTINATION_SECONDARY]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value","card_url"),vanity:qe(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:nt(n,s,i,d),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:n?m.b.IMAGE_ENTITY:null,aspect_ratio:1,overlay:{type:m.g.PLAY},destination:s?m.b.DESTINATION:m.b.DESTINATION_SECONDARY}},[m.b.MEDIA_SECONDARY]:{type:m.d.MEDIA,data:{id:s?m.b.IFRAME_ENTITY:null,aspect_ratio:d}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:n?m.b.IMAGE_ENTITY:null,aspect_ratio:1,overlay:{type:m.g.PLAY},destination:m.b.DESTINATION_SECONDARY}},[m.b.DETAILS]:{type:m.d.DETAILS,data:Object.assign({destination:s?m.b.DESTINATION:m.b.DESTINATION_SECONDARY},o?{description:{content:o}}:null,{title:{content:qe(a,"string_value","title")}})},[m.b.DETAILS_SECONDARY]:{type:m.d.DETAILS,data:Object.assign({destination:m.b.DESTINATION_SECONDARY},o?{description:{content:o}}:null,{title:{content:qe(a,"string_value","title")}})}}}}},convertPollCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ke(a,"image_value","image_original"),n=qe(a,"string_value","player_stream_url"),o=Ke(a,"image_value","player_image_original"),s=parseInt(qe(a,"string_value","player_width"),10)/parseInt(qe(a,"string_value","player_height"),10),d=qe(a,"string_value","content_duration_seconds"),l=Je(a,"boolean_value","counts_are_final"),c=qe(a,"string_value","selected_choice"),_=qe(a,"string_value","end_datetime_utc"),p=i.viewerUserId===i.tweetUserId,u="detail"===i.locationKey?"normal":"small",b={};r&&(b[m.b.IMAGE_ENTITY]=Qe(r)),n&&(b[m.b.VIDEO_ENTITY]={type:"video",aspect_ratio:s,content_id:qe(a,"string_value","player_content_id")||Ze(n),duration_ms:d?1e3*parseInt(d,10):void 0,vmap_url:n,poster_image:o,publisher_id:qe(a,"string_value","player_owner_id")||i.tweetUserId,variants:[{src:qe(a,"string_value","player_hls_url"),type:"application/x-mpegURL"}]},b[m.b.IMAGE_ENTITY_STATIC]=Qe(o||{}));const I=e=>{const t=[1,2,3,4].map(t=>{const i=qe(a,"string_value",`choice${t}_label`),r=qe(a,"string_value",`choice${t}_count`);return i?{index:t,cta:i,count:parseInt(r,10)||0,destination:e}:null}).filter(Boolean);return{type:"poll",data:Object.assign({choices:t,isAuthor:p,isFinal:l,resultTextSize:u,endDatetimeUtc:_},c?{selectedChoice:parseInt(c,10)}:null,{totalVotes:t.reduce((e,t)=>e+t.count,0)})}};return{layout:{[m.c.DEFAULT]:{size:"large",chromeless:!0}},state:m.c.DEFAULT,card:{id:e,card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},fetch_updates:{[m.c.DEFAULT]:!l},components:{[m.c.DEFAULT]:r||n?[m.b.POLL,m.b.MEDIA]:[m.b.POLL],[m.c.STATIC]:r||n?[m.b.POLL_STATIC,m.b.MEDIA_STATIC]:[m.b.POLL_STATIC]},components_data:Object.assign({[m.b.POLL]:I(m.b.DESTINATION),[m.b.POLL_STATIC]:I(m.b.DESTINATION_STATIC)},r?{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY}}}:n?{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY_STATIC}}}:null),destinations:{[m.b.DESTINATION]:{type:m.f.ACTION,data:{action_data:{persist:!0,type:"vote"},auth_required:!0,scribe:"vote",promoted_log:"poll_card_vote"}},[m.b.DESTINATION_STATIC]:{type:m.f.BROWSER,data:{url_data:{url:i.tweetPermalink||m.e},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:b}}},convertPromoImageAppCard:({cardId:e,cardType:t,data:a})=>{const i=Ke(a,"image_value","promo_image_original");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS,m.b.BUTTON_GROUP]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value",["app_url","card_url"])},scribe:"open_link",promoted_log:"install_app"}}},media_entities:{[m.b.IMAGE_ENTITY]:Qe(i)},components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{destination:m.b.DESTINATION,title:{content:qe(a,"string_value","title")},footer:"App Store"}},[m.b.BUTTON_GROUP]:{type:m.d.BUTTON_GROUP,data:{buttons:[{index:0,cta:d.a.getCtaString(qe(a,"string_value","cta_key")),destination:m.b.DESTINATION}]}}}}}},convertPromoImageConvoCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=qe(a,"string_value","thank_you_url"),n=Ke(a,"image_value",["cover_promo_image","promo_image"]),o=Ke(a,"image_value","promo_image"),s=qe(a,"string_value","title"),l=e=>["one","two","three","four"].map((t,i)=>{const r=qe(a,"string_value","cta_"+t),n=qe(a,"string_value",`cta_${t}_tweet`);return r&&n?{icon:"compose",index:i,cta:d.a.renderTweetActionLabel(r),tweet:n,destination:e}:null}).filter(Boolean),c=l(m.b.DESTINATION),_=l(m.b.DESTINATION_STATIC);return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.SECONDARY]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{default:[m.b.MEDIA,m.b.DETAILS,m.b.BUTTON_GROUP],secondary:[m.b.MEDIA_SECONDARY,m.b.DETAILS_SECONDARY],static:[m.b.MEDIA_STATIC,m.b.DETAILS_STATIC,m.b.BUTTON_GROUP_STATIC]},destinations:Object.assign({[m.b.DESTINATION]:{type:m.f.ACTION,data:{action_data:{next_state:m.c.SECONDARY,persist:!0,type:"compose"},auth_required:!0,scribe:"click",promoted_log:"convo_button_click"}}},r?{[m.b.DESTINATION_SECONDARY]:{type:m.f.BROWSER,data:{url_data:{url:r,vanity:qe(a,"string_value",["thank_you_vanity_url","thank_you_shortened_url","thank_you_url"])},scribe:"open_link",promoted_log:"card_url_click"}}}:null,{[m.b.DESTINATION_STATIC]:{type:m.f.BROWSER,data:{url_data:{url:i.tweetPermalink||m.e},scribe:"open_link",promoted_log:"card_url_click"}}}),media_entities:{[m.b.IMAGE_ENTITY]:Qe(n),[m.b.IMAGE_ENTITY_SECONDARY]:Qe(o)},components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY}},[m.b.MEDIA_SECONDARY]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY_SECONDARY,destination:m.b.DESTINATION_SECONDARY}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,destination:m.b.DESTINATION_STATIC}},[m.b.DETAILS]:{type:m.d.DETAILS,data:Object.assign({},s?{title:{content:s}}:null)},[m.b.DETAILS_SECONDARY]:{type:m.d.DETAILS,data:Object.assign({title:{content:qe(a,"string_value","thank_you_text")}},r?{destination:m.b.DESTINATION_SECONDARY}:null)},[m.b.DETAILS_STATIC]:{type:m.d.DETAILS,data:Object.assign({},s?{title:{content:s}}:null)},[m.b.BUTTON_GROUP]:{type:m.d.BUTTON_GROUP,data:{buttons:c}},[m.b.BUTTON_GROUP_STATIC]:{type:m.d.BUTTON_GROUP,data:{buttons:_}}}}}},convertPromoVideoConvoCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=qe(a,"string_value","thank_you_url"),n=Ke(a,"image_value",["cover_player_image_original","player_image_original"]),o=Ke(a,"image_value","player_image_original"),s=Ke(a,"image_value","cover_promo_image_original"),l=qe(a,"string_value","title"),c=parseInt(qe(a,"string_value","cover_player_width"),10)/parseInt(qe(a,"string_value","cover_player_height"),10),_=parseInt(qe(a,"string_value","player_width"),10)/parseInt(qe(a,"string_value","player_height"),10),p=e=>["one","two","three","four"].map((t,i)=>{const r=qe(a,"string_value","cta_"+t),n=qe(a,"string_value",`cta_${t}_tweet`);return r&&n?{icon:"compose",index:i,cta:d.a.renderTweetActionLabel(r),tweet:n,destination:e}:null}).filter(Boolean),u=p(m.b.DESTINATION),b=p(m.b.DESTINATION_STATIC),I=qe(a,"string_value","cover_player_stream_url"),T=qe(a,"string_value","player_stream_url"),g=qe(a,"string_value","player_hls_url"),E=$e(a,"user_value","site"),h=qe(a,"string_value","content_duration_seconds"),y=qe(a,"string_value","cover_content_duration_seconds");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.SECONDARY]:{size:"large"},[m.c.STATIC]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{default:[m.b.MEDIA,m.b.DETAILS,m.b.BUTTON_GROUP],secondary:[m.b.MEDIA_SECONDARY,m.b.DETAILS_SECONDARY],static:[m.b.MEDIA_STATIC,m.b.DETAILS_STATIC,m.b.BUTTON_GROUP_STATIC]},destinations:Object.assign({[m.b.DESTINATION]:{type:m.f.ACTION,data:{action_data:{next_state:m.c.SECONDARY,persist:!0,type:"compose"},auth_required:!0,scribe:"click",promoted_log:"convo_button_click"}}},r?{[m.b.DESTINATION_SECONDARY]:{type:m.f.BROWSER,data:{url_data:{url:r,vanity:qe(a,"string_value",["thank_you_vanity_url","thank_you_shortened_url","thank_you_url"])},scribe:"open_link",promoted_log:"card_url_click"}}}:null,{[m.b.DESTINATION_STATIC]:{type:m.f.BROWSER,data:{url_data:{url:i.tweetPermalink||m.e},scribe:"open_link",promoted_log:"card_url_click"}}}),media_entities:Object.assign({},I?{[m.b.VIDEO_ENTITY]:Object.assign({type:"video",aspect_ratio:c,content_id:Ze(I)},y?{duration_ms:1e3*parseInt(y,10)}:null,{vmap_url:I,poster_image:n,publisher_id:E?E.id_str:i.tweetUserId})}:null,{[m.b.VIDEO_ENTITY_SECONDARY]:Object.assign({type:"video",aspect_ratio:_,content_id:Ze(T),duration_ms:h?1e3*parseInt(h,10):void 0,vmap_url:T,poster_image:o,publisher_id:E?E.id_str:i.tweetUserId},g?{variants:[{src:g,type:"application/x-mpegURL"}]}:null),[m.b.IMAGE_ENTITY]:Qe(s||{}),[m.b.IMAGE_ENTITY_STATIC]:Qe(o||{})}),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:I?m.b.VIDEO_ENTITY:s?m.b.IMAGE_ENTITY:m.b.VIDEO_ENTITY_SECONDARY}},[m.b.MEDIA_SECONDARY]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY_SECONDARY}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:o?m.b.IMAGE_ENTITY_STATIC:m.b.IMAGE_ENTITY,destination:m.b.DESTINATION_STATIC,aspect_ratio:o?void 0:1.91}},[m.b.DETAILS]:{type:m.d.DETAILS,data:Object.assign({},l?{title:{content:l}}:null)},[m.b.DETAILS_SECONDARY]:{type:m.d.DETAILS,data:Object.assign({title:{content:qe(a,"string_value","thank_you_text")}},r?{destination:m.b.DESTINATION_SECONDARY}:null)},[m.b.DETAILS_STATIC]:{type:m.d.DETAILS,data:Object.assign({},l?{title:{content:l}}:null)},[m.b.BUTTON_GROUP]:{type:m.d.BUTTON_GROUP,data:{buttons:u}},[m.b.BUTTON_GROUP_STATIC]:{type:m.d.BUTTON_GROUP,data:{buttons:b}}}}}},convertPromoVideoWebsiteCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ke(a,"image_value","player_image_original"),n=qe(a,"string_value","player_hls_url"),o=parseInt(qe(a,"string_value","player_width"),10)/parseInt(qe(a,"string_value","player_height"),10),s=qe(a,"string_value","content_duration_seconds");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.STATIC]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS],[m.c.STATIC]:[m.b.MEDIA_STATIC,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value",["website_shortened_url","website_url","card_url"]),vanity:qe(a,"string_value",["vanity_url","website_shortened_url","website_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[m.b.IMAGE_ENTITY]:Qe(r),[m.b.VIDEO_ENTITY]:Object.assign({type:"video",aspect_ratio:o,content_id:qe(a,"string_value","player_content_id")||Ze(r.url),duration_ms:s?1e3*parseInt(s,10):void 0,vmap_url:qe(a,"string_value","player_stream_url"),poster_image:r,publisher_id:qe(a,"string_value","player_owner_id")||i.tweetUserId},n?{variants:[{src:n,type:"application/x-mpegURL"}]}:null)},components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY,aspect_ratio:o}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,aspect_ratio:o,destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{destination:m.b.DESTINATION,title:{content:qe(a,"string_value","title")}}}}}}},convertPromoWebsiteCard:({cardId:e,cardType:t,data:a})=>{const i=Ke(a,"image_value","promo_image_original");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value",["website_shortened_url","website_url","card_url"]),vanity:qe(a,"string_value",["vanity_url","website_shortened_url","website_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[m.b.IMAGE_ENTITY]:Qe(i)},components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:{destination:m.b.DESTINATION,title:{content:qe(a,"string_value","title")}}}}}}},convertSummaryCard:({cardId:e,cardType:t,data:a})=>{const i=Ke(a,"image_value","thumbnail_image_original"),r=qe(a,"string_value","description");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value","card_url"),vanity:qe(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},i?{[m.b.IMAGE_ENTITY]:Qe(i)}:null),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:i?m.b.IMAGE_ENTITY:null,aspect_ratio:1,destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:Object.assign({destination:m.b.DESTINATION},r?{description:{content:r}}:null,{title:{content:qe(a,"string_value","title")}})}}}}},convertSummaryLargeImageCard:({cardId:e,cardType:t,data:a})=>{const i=Ke(a,"image_value","summary_photo_image_original"),r=qe(a,"string_value","description");return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:i?"large":"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.DETAILS]},destinations:{[m.b.DESTINATION]:{type:m.f.BROWSER,data:{url_data:{url:qe(a,"string_value","card_url"),vanity:qe(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},i?{[m.b.IMAGE_ENTITY]:Qe(i)}:null),components_data:{[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:i?m.b.IMAGE_ENTITY:null,aspect_ratio:i?1.91:1,destination:m.b.DESTINATION}},[m.b.DETAILS]:{type:m.d.DETAILS,data:Object.assign({destination:m.b.DESTINATION},r?{description:{content:r}}:null,{title:{content:qe(a,"string_value","title")}})}}}}},convertUnifiedCardCard:({cardId:e,cardType:t,data:a})=>{const i=ct(a),{app_store_data:r,components:n,component_objects:o,destination_objects:s,media_entities:l,users:c}=i,_=((e,t)=>Object.keys(e).reduce((a,i)=>{const r=e[i];if("app_store_with_docked_media"===r.type||"app_store"===r.type){const e=lt(t[r.data.app_id]);a[i]={type:"browser",data:{url_data:{url:e?e.url:m.e},scribe:"unified_card_app_store_open_link",promoted_log:"unified_card_component_app_store_click"}}}else a[i]=Object.assign({},r,{data:Object.assign({},r.data,{scribe:"open_link",promoted_log:"unified_card_component_url_click"})});return a},{}))(s,r),p=n.find(e=>o[e]&&"details"===o[e].type),u=p&&"details"===o[p].type?o[p]:null,b=n.find(e=>o[e]&&"app_store_details"===o[e].type),I=b&&"app_store_details"===o[b].type?o[b]:null,T=((e,t)=>{const a=e?e.data.destination:void 0;let i,r;if(e)if("details"===e.type)i=Object.assign({},e.data.title);else if("app_store_details"===e.type){const a=e.data.app_id,n=lt(t[a])||{};i=n.title,r=n.category?n.category.content:void 0}return{type:"details",data:{title:i,footer:r,destination:a}}})(u||I||void 0,r),g=p||b,E=n.find(e=>o[e]&&"twitter_list_details"===o[e].type),h=E&&"twitter_list_details"===o[E].type?((e,t)=>{const a=e.data.destination,i=Object.assign({},e.data.name),r=t[e.data.user_id],n=e.data.member_count;return{type:m.d.TWITTER_LIST_DETAILS,data:{title:i,destination:a,memberCount:n,attribution:r}}})(o[E],c):null,y=n.find(e=>o[e]&&"media_with_details_horizontal"===o[e].type);if(!!y){const i=y&&"media_with_details_horizontal"===o[y].type?(({data:{destination:e,topic_detail:{title:t,subtitle:a},media_id:i}})=>({[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:i,aspect_ratio:1,destination:e}},[m.b.TOPIC_DETAILS]:{type:m.d.TOPIC_DETAILS,data:Object.assign({destination:e},a&&a.content?{description:Object.assign({},a)}:null,{title:t})}}))(o[y]):null,r=Object.keys(_).reduce((e,t)=>(e[t]=Object.assign({},_[t],{data:Object.assign({},_[t].data,{scribe_element:"uc_media_with_details_horizontal"})}),e),{});return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"small"},[m.c.STATIC]:{size:"small"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,m.b.TOPIC_DETAILS]},destinations:r,media_entities:Object.assign({},l),components_data:Object.assign({},i)}}}{const i=n.find(e=>o[e]&&"button_group"===o[e].type),r=i&&"button_group"===o[i].type?{type:m.d.BUTTON_GROUP,data:{buttons:o[i].data.buttons.map((e,t)=>({index:t+1,icon:e.icon_type,destination:e.destination,cta:"cta"===e.type?d.a.getCtaString(e.action):e.text.content,is_rtl:"custom"===e.type?e.text.is_rtl:void 0,isAppDetails:null!=I}))}}:null,s=n.find(e=>o[e]&&"swipeable_media"===o[e].type),c=s&&"swipeable_media"===o[s].type?{type:m.d.SWIPEABLE_MEDIA,data:{media_list:o[s].data.media_list}}:null,p=n.find(e=>o[e]&&"media"===o[e].type),u=p&&"media"===o[p].type?o[p]:null,b=Object.keys(l).reduce((e,t)=>{const a=l[t];return e[t]=Object.assign({},a,{type:"video"===a.type?"uc_video":a.type}),e},{}),y=u?b[u.data.id]:null,A=y?y.original_info.width/y.original_info.height:null,v=Object.keys(l).reduce((e,t)=>{const a=l[t];return e[_t(t)]={media_url_https:a.media_url_https,type:"photo",original_info:a.original_info},e},{}),S=y&&"uc_video"===y.type,D=c&&c.data.media_list.some(e=>e.id&&"uc_video"===b[e.id].type),C=[...S?[m.b.MEDIA_STATIC]:[],...D?[m.b.SWIPEABLE_MEDIA_STATIC]:[],...n.filter(e=>!(S&&e===p||D&&e===s))],O={};return T&&g&&(O[g]=T),r&&i&&(O[i]=r),c&&s&&(O[s]=c),h&&E&&(O[E]=h),u&&p&&(O[p]={type:m.d.MEDIA,data:Object.assign({},u.data)}),S&&u&&(O[m.b.MEDIA_STATIC]={type:m.d.MEDIA,data:{aspect_ratio:A||void 0,destination:u.data.destination,id:_t(u.data.id),overlay:{type:m.g.PLAY}}}),D&&c&&(O[m.b.SWIPEABLE_MEDIA_STATIC]={type:m.d.SWIPEABLE_MEDIA,data:{media_list:c.data.media_list.map(e=>({destination:e.destination,id:_t(e.id),overlay:{type:m.g.PLAY}}))}}),{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.STATIC]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:n,[m.c.STATIC]:C},destinations:_,media_entities:Object.assign({},b,v),components_data:O}}}},convertVideoDirectMessageCard:({cardId:e,cardType:t,data:a,cardContext:i,users:r})=>{const n=Ke(a,"image_value","player_image_original"),o=qe(a,"string_value","player_stream_url"),s=parseInt(qe(a,"string_value","player_width"),10)/parseInt(qe(a,"string_value","player_height"),10),d=qe(a,"string_value","content_duration_seconds"),l=e=>[1,2,3,4].map(t=>{const i=qe(a,"string_value","cta"+t),r=qe(a,"string_value",`cta${t}_wm_id`);return i&&r?{icon:"dm",index:t,cta:i,wm_id:r,destination:e}:null}).filter(Boolean),c=l(m.b.DESTINATION),_=l(m.b.DESTINATION_STATIC),p=$e(a,"user_value","recipient"),u=p&&r[p.id_str],b=p.id_str!==i.tweetUserId&&u;return{state:m.c.DEFAULT,layout:{[m.c.DEFAULT]:{size:"large"},[m.c.STATIC]:{size:"large"}},card:{card_name:t,card_url:qe(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[m.c.DEFAULT]:[m.b.MEDIA,...b?[m.b.DETAILS]:[],m.b.BUTTON_GROUP],[m.c.STATIC]:[m.b.MEDIA_STATIC,...b?[m.b.DETAILS]:[],m.b.BUTTON_GROUP_STATIC]},destinations:{[m.b.DESTINATION]:{type:m.f.ACTION,data:{action_data:{persist:!1,type:"dm",recipient:p.id_str},auth_required:!0,scribe:"click",promoted_log:"dm_button_click"}},[m.b.DESTINATION_STATIC]:{type:m.f.BROWSER,data:{url_data:{url:i.tweetPermalink||m.e},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[m.b.IMAGE_ENTITY]:Qe(n||{}),[m.b.VIDEO_ENTITY]:Object.assign({type:"video",aspect_ratio:s,content_id:qe(a,"string_value","player_content_id")||Ze(o)},d?{duration_ms:1e3*parseInt(d,10)}:null,{vmap_url:o,poster_image:n,publisher_id:qe(a,"string_value","player_owner_id")||i.tweetUserId,variants:[{src:qe(a,"string_value","player_hls_url"),type:"application/x-mpegURL"}]})},components_data:Object.assign({[m.b.MEDIA]:{type:m.d.MEDIA,data:{id:m.b.VIDEO_ENTITY}},[m.b.MEDIA_STATIC]:{type:m.d.MEDIA,data:{id:m.b.IMAGE_ENTITY,destination:m.b.DESTINATION_STATIC}}},b?{[m.b.DETAILS]:{type:m.d.DETAILS,data:{attribution:u}}}:null,{[m.b.BUTTON_GROUP]:{type:m.d.BUTTON_GROUP,data:{buttons:c}},[m.b.BUTTON_GROUP_STATIC]:{type:m.d.BUTTON_GROUP,data:{buttons:_}}})}}}},ut={shouldRenderAmplifyCard:e=>Xe(e,e=>e("player_width").and("player_height").and("amplify_url_vmap").and("amplify_content_id")),shouldRenderAppCard:e=>Xe(e,e=>e("card_url").and("title")),shouldRenderAppplayerCard:e=>Xe(e,e=>e("card_url").and("title").and("player_width").and("player_height").and("player_image_original").and("player_stream_url")),shouldRenderBroadcastCard:e=>Xe(e,e=>e("card_url").and("broadcast_id").and("broadcast_title")),shouldRenderDirectStoreLinkAppCard:e=>Xe(e,e=>e("card_url").and("title")),shouldRenderImageDirectMessageCard:e=>Xe(e,e=>e("recipient").and("cta1").and("cta1_wm_id").and("image_original")),shouldRenderLiveEventCard:e=>Xe(e,e=>e("card_url").and("event_id").and("event_title")),shouldRenderMessageMeCard:(e,t)=>Xe(e,e=>e("recipient").and("cta"))&&t.tweetUserId===$e(e,"user_value","recipient").id_str,shouldRenderMomentCard:e=>Xe(e,e=>e("card_url").and(e=>e("photo_image").or("cover_format_media_url")).and("id").and(e=>e("title").or("author").or("subcategory_string"))),shouldRenderPeriscopeBroadcastCard:e=>Xe(e,e=>e("card_url").and("broadcast_width").and("broadcast_height").and("id").and(e=>e("broadcaster_twitter_id").or("title"))),shouldRenderPlayerCard:e=>rt.a.isVineCard({name:"player",binding_values:e})?Xe(e,e=>e("card_url").and("title").and("player_width").and("player_height").and("player_image_original").and("player_stream_url").and("player_stream_content_type")):Xe(e,e=>e("card_url").and("player_url").and("player_height").and("player_width").and("title")),shouldRenderPollCard:e=>Xe(e,e=>e("choice1_label").and("choice2_label").and("end_datetime_utc").and("counts_are_final").and("api").and("card_url")),shouldRenderPromoImageAppCard:e=>Xe(e,e=>e("card_url").and("title").and("promo_image_original").and("cta_key")),shouldRenderPromoImageConvoCard:e=>Xe(e,e=>e("card_url").and("thank_you_text").and("card_id").and("promo_image").and("cta_one").and("cta_one_tweet")),shouldRenderPromoVideoConvoCard:e=>Xe(e,e=>e("card_url").and("thank_you_text").and("card_id").and("cta_one").and("cta_one_tweet").and("player_width").and("player_height").and("player_stream_url")),shouldRenderPromoVideoWebsiteCard:e=>Xe(e,e=>e("card_url").and("title").and("player_width").and("player_height").and("player_image_original").and("player_stream_url")),shouldRenderPromoWebsiteCard:e=>Xe(e,e=>e("card_url").and("title").and("promo_image_original")),shouldRenderSummaryCard:e=>Xe(e,e=>e("card_url").and("title")),shouldRenderSummaryLargeImageCard:e=>Xe(e,e=>e("card_url").and("title")),shouldRenderUnifiedCardCard:e=>{const t=ct(e);return!!(t&&t.components&&t.component_objects&&t.components.length&&t.components.every(e=>t.component_objects[e]&&t.component_objects[e].type in dt))},shouldRenderVideoDirectMessageCard:e=>Xe(e,e=>e("recipient").and("cta1").and("cta1_wm_id").and("player_width").and("player_height").and("player_stream_url"))};var mt=(e,t,a)=>{const i={[m.a.AMPLIFY]:ut.shouldRenderAmplifyCard,[m.a.APP]:ut.shouldRenderAppCard,[m.a.APPPLAYER]:ut.shouldRenderAppplayerCard,[m.a.BROADCAST]:ut.shouldRenderBroadcastCard,[m.a.DIRECT_STORE_LINK_APP]:ut.shouldRenderDirectStoreLinkAppCard,[m.a.IMAGE_DIRECT_MESSAGE]:ut.shouldRenderImageDirectMessageCard,[m.a.LIVE_EVENT]:ut.shouldRenderLiveEventCard,[m.a.MESSAGE_ME]:ut.shouldRenderMessageMeCard,[m.a.MOMENT]:ut.shouldRenderMomentCard,[m.a.PERISCOPE_BROADCAST]:ut.shouldRenderPeriscopeBroadcastCard,[m.a.PLAYER]:ut.shouldRenderPlayerCard,[m.a.POLL_2_CHOICE_TEXT]:ut.shouldRenderPollCard,[m.a.POLL_3_CHOICE_TEXT]:ut.shouldRenderPollCard,[m.a.POLL_4_CHOICE_TEXT]:ut.shouldRenderPollCard,[m.a.POLL_2_CHOICE_IMAGE]:ut.shouldRenderPollCard,[m.a.POLL_3_CHOICE_IMAGE]:ut.shouldRenderPollCard,[m.a.POLL_4_CHOICE_IMAGE]:ut.shouldRenderPollCard,[m.a.POLL_2_CHOICE_VIDEO]:ut.shouldRenderPollCard,[m.a.POLL_3_CHOICE_VIDEO]:ut.shouldRenderPollCard,[m.a.POLL_4_CHOICE_VIDEO]:ut.shouldRenderPollCard,[m.a.PROMO_IMAGE_APP]:ut.shouldRenderPromoImageAppCard,[m.a.PROMO_IMAGE_CONVO]:ut.shouldRenderPromoImageConvoCard,[m.a.PROMO_VIDEO_CONVO]:ut.shouldRenderPromoVideoConvoCard,[m.a.PROMO_VIDEO_WEBSITE]:ut.shouldRenderPromoVideoWebsiteCard,[m.a.PROMO_WEBSITE]:ut.shouldRenderPromoWebsiteCard,[m.a.SUMMARY]:ut.shouldRenderSummaryCard,[m.a.SUMMARY_LARGE_IMAGE]:ut.shouldRenderSummaryLargeImageCard,[m.a.UNIFIED_CARD]:ut.shouldRenderUnifiedCardCard,[m.a.VIDEO_DIRECT_MESSAGE]:ut.shouldRenderVideoDirectMessageCard}[e];return!!i&&i(t,a)};const bt={[m.a.AMPLIFY]:pt.convertAmplifyCard,[m.a.APP]:pt.convertAppCard,[m.a.APPPLAYER]:pt.convertAppplayerCard,[m.a.BROADCAST]:pt.convertBroadcastCard,[m.a.DIRECT_STORE_LINK_APP]:pt.convertDirectStoreLinkAppCard,[m.a.IMAGE_DIRECT_MESSAGE]:pt.convertImageDirectMessageCard,[m.a.LIVE_EVENT]:pt.convertLiveEventCard,[m.a.MESSAGE_ME]:pt.convertMessageMeCard,[m.a.MOMENT]:pt.convertMomentCard,[m.a.PERISCOPE_BROADCAST]:pt.convertPeriscopeBroadcastCard,[m.a.PLAYER]:pt.convertPlayerCard,[m.a.POLL_2_CHOICE_TEXT]:pt.convertPollCard,[m.a.POLL_3_CHOICE_TEXT]:pt.convertPollCard,[m.a.POLL_4_CHOICE_TEXT]:pt.convertPollCard,[m.a.POLL_2_CHOICE_IMAGE]:pt.convertPollCard,[m.a.POLL_3_CHOICE_IMAGE]:pt.convertPollCard,[m.a.POLL_4_CHOICE_IMAGE]:pt.convertPollCard,[m.a.POLL_2_CHOICE_VIDEO]:pt.convertPollCard,[m.a.POLL_3_CHOICE_VIDEO]:pt.convertPollCard,[m.a.POLL_4_CHOICE_VIDEO]:pt.convertPollCard,[m.a.PROMO_IMAGE_APP]:pt.convertPromoImageAppCard,[m.a.PROMO_IMAGE_CONVO]:pt.convertPromoImageConvoCard,[m.a.PROMO_VIDEO_CONVO]:pt.convertPromoVideoConvoCard,[m.a.PROMO_VIDEO_WEBSITE]:pt.convertPromoVideoWebsiteCard,[m.a.PROMO_WEBSITE]:pt.convertPromoWebsiteCard,[m.a.SUMMARY]:pt.convertSummaryCard,[m.a.SUMMARY_LARGE_IMAGE]:pt.convertSummaryLargeImageCard,[m.a.UNIFIED_CARD]:pt.convertUnifiedCardCard,[m.a.VIDEO_DIRECT_MESSAGE]:pt.convertVideoDirectMessageCard},It=(e,t)=>{const{binding_values:a,name:i,url:r,users:n={}}=e,o=bt[i];return mt(i,a,t)&&o?o({cardId:r,cardType:i,data:a,cardContext:t,users:n}):null};class Tt extends s.Component{constructor(e){super(e),o()(this,"_handleLikelyInteraction",()=>{this.state.interactionLikely||this.setState({interactionLikely:!0})}),o()(this,"_updateCardState",e=>{this.setState({state:e})}),o()(this,"_updateUCPromotedMetadata",e=>{this.setState({ucPromotedMetadata:e})}),o()(this,"_scribeCardAction",({action:e,element:t,componentType:a,ctaIndex:i,isAuthRequired:r})=>{const{card:n}=this.state,{onScribeEvent:o}=this.props;n&&o&&o({action:e,element:t,componentType:a,cardName:n.card_name,cardUrl:n.card_url,ctaIndex:i,isMessageMe:n.card_name===m.a.MESSAGE_ME,isAuthRequired:r})}),o()(this,"_onPromotedLogEvent",e=>{const{onPromotedLogEvent:t}=this.props;t&&t(Object.assign({},e,{ucPromotedMetadata:this.state.ucPromotedMetadata}))}),o()(this,"_requestCardUpdate",()=>{const{requestCardUpdate:e}=this.props,{card:t}=this.state;e&&t&&e([t.id],{name:t.card_name})});const t=this._convertCard(e);this.state=t?Object.assign({},t):{}}componentDidMount(){const{card:e}=this.state;e&&this._scribeCardAction({action:e.on_visibility.scribe,componentType:"card"})}UNSAFE_componentWillReceiveProps(e){this.setState(this._convertCard(e))}render(){const{card:e,state:t,ucPromotedMetadata:a,carouselIndex:i}=this.state,{a11yDomIds:n,cardContext:o,dmSentOrReceived:d,isDataSaverEnabled:l,isInteractive:_,isPromoted:p,onEventReminderClick:u,onPollVote:m,onScribeEvent:b,promotedContent:I,nativeID:T,requestCardUpdate:g,testIDs:E,transformUrl:h,useBlueButtonForAppDetails:y,withSquareBottomBorderRadius:A}=this.props;if(!e)return null;const v=this._getCurrentLayout(),S=this._getDetailData(),D=this._getTwitterListDetailsData(),C=this._getTopicDetailsData(),O=this._getMediaData(),L=this._getPollData(),N=this._getButtonsData(),M=this._getSwipeableMediaData(),{fetch_updates:R}=e,f=this.props.withInteractiveStyling&&!!(S&&S.destination||D&&D.destination||C&&C.destination),w={a11yDomIds:n,dmSentOrReceived:d,locationKey:o.locationKey,onLikelyInteraction:this._handleLikelyInteraction,nativeID:T,testIDs:E,withInteractiveStyling:f,withSquareBottomBorderRadius:A,media:O},P=g&&R&&R[t],x=O&&O.mediaEntity&&"photo"===O.mediaEntity.type,U="small"===v.size||l&&S&&!N&&x&&!p;return s.createElement(We.a.ViewImpressor,{viewType:"card"},s.createElement(Tt.Context.Provider,{value:{card:e,carouselIndex:i,isDataSaverEnabled:l,isInteractive:_,isPromoted:p,media:O,promotedContent:I,onEventReminderClick:u,onPollVote:m,onPromotedLogEvent:this._onPromotedLogEvent,onScribeEvent:b,scribeCardAction:this._scribeCardAction,transformUrl:h,ucPromotedMetadata:a,updateCardState:this._updateCardState,updateUCPromotedMetadata:this._updateUCPromotedMetadata}},this._renderPreconnectTags(),P?s.createElement(c,{requestCardUpdate:this._requestCardUpdate}):null,U?S||C?s.createElement(Ve,r()({},w,{details:S,reverse:v.reverse},C?{topicDetails:C}:null)):null:s.createElement(xe,r()({},w,{buttons:N||void 0,chromeless:v.chromeless,details:S,listDetails:D||void 0,poll:L||void 0,renderVideoPlayer:this.props.renderVideoPlayer,swipeableMedia:M,useBlueButtonForAppDetails:y}))))}_getCurrentLayout(){const{layout:e,state:t}=this.state,{isDataSaverEnabled:a}=this.props;return e[a?m.c.DATA_SAVER:t]||e[m.c.DEFAULT]}_getButtonsData(){const e=this._getComponent("button_group");return e?e.data.buttons:null}_getSwipeableMediaData(){const{card:e}=this.state,t=this._getComponent("swipeable_media"),a=t&&t.data;if(!a||!a.media_list)return;return Object(ze.a)(a.media_list,t=>{const a=t&&t.id&&e?e.media_entities[t.id]:void 0;return a?Object.assign({},t,{media_entity:a}):void 0})}_getDetailData(){const e=this._getComponent("details"),t=e&&e.data;if(t){if(t.destination){const e=this._getVanityText(t.destination);t.vanity=e||void 0}return t}}_getTwitterListDetailsData(){const e=this._getComponent("twitter_list_details");return e&&e.data||null}_getTopicDetailsData(){const e=this._getComponent("topic_details");return e&&e.data||null}_getMediaData(){const{card:e}=this.state,t=this._getComponent("media"),a=t&&t.data,i=a&&a.id&&e?e.media_entities[a.id]:void 0,r=a&&a.overlay,n=a&&a.aspect_ratio;return a?Object.assign({},a.destination?{destination:a.destination}:null,{aspect_ratio:n,mediaEntity:i,overlay:r}):void 0}_getPollData(){const e=this._getComponent("poll");return e?e.data:null}_getComponent(e){const{card:t,state:a}=this.state,{isDataSaverEnabled:i}=this.props;if(!t)throw new Error("No card data available");const r=i?m.c.DATA_SAVER:a,n=(t.components[r]||t.components[m.c.DEFAULT]).map(e=>t.components_data[e]).find(t=>t.type===e);return n||void 0}_getVanityText(e){const{card:t}=this.state;if(!t)return;const a=t.destinations[e];if(a)switch(a.type){case m.f.BROWSER:case m.f.BROWSER_WITH_DOCKED_MEDIA:case m.f.BROWSER_WITH_MEDIA:return a.data.url_data.vanity;case m.f.ACTION:return a.data.action_data.vanity;default:return}}_renderPreconnectTags(){const e=this._getDetailData(),{card:t,interactionLikely:a}=this.state,{isPromoted:i}=this.props;if(!e||!e.destination||!t)return null;const r=t.destinations[e.destination];if(r.type!==m.f.BROWSER)return null;const n=r.data.url_data.url,o=r.data.url_data.vanity;if(!o)return null;const d=a||i,l=a&&i;return d?s.createElement(s.Fragment,null,l?s.createElement("link",{href:n,rel:"prerender"}):null,d?s.createElement("link",{href:n,rel:"preconnect"}):null,d?s.createElement("link",{href:"//"+o,rel:"preconnect"}):null):null}_convertCard(e){const{card:t,cardState:a,cardContext:i,initialCarouselIndex:r}=e,n=It(t,i),o=a||!!this.state&&this.state.state||n&&n.state||void 0;return n&&o?Object.assign({},n,{state:o,carouselIndex:r}):null}}o()(Tt,"defaultProps",{isDataSaverEnabled:!1,isInteractive:!0,isPromoted:!1,withInteractiveStyling:!0}),o()(Tt,"Context",s.createContext(Object.freeze({}))),Tt.propTypes={};var gt=t.a=Tt}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.HWCard.3d978b25.js.map