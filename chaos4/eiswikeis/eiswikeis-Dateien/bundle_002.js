(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"AEu/":function(e,t,a){"use strict";a.r(t),a.d(t,"ConversationHiddenRepliesScreen",(function(){return H}));var n=a("KEM+"),r=a.n(n),o=a("ERkP"),i=a("es0u"),c=(a("WNMA"),a("oEGd")),s=a("0KEI"),l=a("hqKg"),d=a("8Lfv"),u=a("G6rE");const g=Object(l.createSelector)((e,t)=>t.match.params.screenName,(e,t)=>t.match.params.statusId,(e,t)=>"PUSH"===t.history.action,u.e.selectLoggedInUser,(e,t,a,n)=>({loggedInScreenName:n?n.screen_name:void 0,screenName:e,statusId:t,isForwardNavigation:a})),h={createLocalApiErrorHandler:Object(s.d)("HIDDEN_REPLIES_PAGE"),clearTimelineCache:e=>Object(d.a)(e)};var p=Object(c.g)(g,h),m=a("7JQg"),b=a("xZXe"),y=a("QIgh"),f=a("8UdT"),T=a("IcAo"),_=a("VrCx"),E=a("yy6l");const w=e=>Object(E.a)({component:b.a,createAdditionalProps:()=>({withUnhideReply:e}),displayBlocked:!0,divider:{top:!0,bottom:!0}});var v=({withUnhideReply:e})=>Object(T.a)({},y.b,{[f.b.Tweet]:{handlers:{[_.a.Tweet]:w(e)}}}),C=a("WU0f"),I=a("yoO3"),L=a("fTQJ"),O=a("VS6U"),S=a("t62R"),R=a("FIs5"),j=a("I7xG"),k=a("3XMw"),x=a.n(k);const A=x.a.d806aa19,P=x.a.d80c77dc,N=x.a.ef939f4b,D=x.a.f7f2db4f,F=o.createElement(x.a.I18NFormatMessage,{$i18n:"cf1aca58"},o.createElement(S.c,{link:"https://help.twitter.com/using-twitter/mentions-and-replies#hidden-reply"},x.a.a7511618)),q=()=>o.createElement(R.a,{header:D,message:F});class H extends o.Component{constructor(e){super(e),r()(this,"_getModule",Object(j.a)(this,e=>e.statusId,e=>Object(C.a)(e))),this._clearTimelineCache()}render(){const{history:e,loggedInScreenName:t,screenName:a,statusId:n}=this.props;return a&&n?o.createElement(I.a,null,o.createElement(O.a,{backLocation:`/${a.toLowerCase()}/status/${n}`,history:e,primaryContent:this._renderPrimaryContent(),sidebarContent:o.createElement(i.a,null),subtitle:a===t?P:N({screenName:a}),title:A})):null}_renderPrimaryContent(){const{loggedInScreenName:e,screenName:t}=this.props;return o.createElement(L.a,{entryConfiguration:v({withUnhideReply:t===e}),module:this._getModule(),renderEmptyState:q,title:A})}_clearTimelineCache(e=this._getModule()){const{clearTimelineCache:t,createLocalApiErrorHandler:a,isForwardNavigation:n}=this.props;n&&t(e).catch(a({}))}}t.default=Object(m.c)({page:"tweet",section:"moderated_replies"})(p(H))},DL4F:function(e,t,a){"use strict";a.r(t),a.d(t,"ConversationAnalyticsScreen",(function(){return k}));a("IAdD"),a("kYxP");var n=a("KEM+"),r=a.n(n),o=a("ERkP"),i=a("v6aA"),c=(a("VAZu"),a("WNMA"),a("zh9S")),s=a("oEGd"),l=a("0KEI"),d=a("hqKg"),u=a("XOJV");const g=(e,t)=>t.match.params.statusId,h=Object(d.createSelector)((e,t)=>u.a.selectFetchStatus(e,g(0,t)),g,(e,t)=>u.a.selectHydrated(e,g(0,t)),(e,t,a)=>({fetchStatus:e,statusId:t,tweet:a})),p={createLocalApiErrorHandler:Object(l.d)("CONVERSATION_ANALYTICS_SCREEN"),fetchTweetIfNeeded:u.a.fetchOneIfNeeded,scribeAction:c.c};var m=Object(s.g)(h,p),b=a("7JQg"),y=a("v//M"),f=a("W5XZ"),T=a("jHSc"),_=a("f004"),E=a("3XMw"),w=a.n(E),v=a("SrIh"),C=a("Rp9C"),I=a("q9Zt"),L=a("bPFD"),O=a("rHpw");const S=w.a.g9079b93,R=w.a.a57daeb1,j=w.a.deaf5b15;class k extends o.PureComponent{constructor(...e){super(...e),r()(this,"_handleFetchTweet",()=>{const{createLocalApiErrorHandler:e,fetchTweetIfNeeded:t,statusId:a}=this.props;t(a).catch(e(f.a))}),r()(this,"_render",()=>{const{tweet:e}=this.props,t=e&&Object(_.a)(e)||void 0;if(!t||t&&t.user.id_str!==this.context.loggedInUserId)return o.createElement(I.a,{onRetry:null,title:S});{const e="";return o.createElement(L.a,{dangerouslyDisableSandbox:!0,onMessage:this._handleIFrameMessage,reportError:v.a,src:`${e}/i/tfb/v1/quick_promote/lite/${t.id_str}`,style:x.iframe})}}),r()(this,"_setAppBarRef",e=>{this._appBarRef=e}),r()(this,"_handleIFrameMessage",e=>{if(e&&"quick_promote"===e.name)if("scribe"===e.type){const{scribeAction:t,scribeNamespace:a,tweet:n}=this.props,r=n&&Object(_.a)(n)||void 0,o=e.scribeData||{},i="string"==typeof o.component?o.component:"quick_promote",c="string"==typeof o.uiEvent?o.uiEvent:"";t(Object.assign({},a,{component:i,action:c}),Object.assign({},o,{items:r?[C.a.getTweetItem(r)]:[]}))}else"close"===e.type&&this._appBarRef&&this._appBarRef.goBack()})}componentDidMount(){this._handleFetchTweet()}render(){const{fetchStatus:e,history:t,tweet:a}=this.props,n=a&&Object(_.a)(a)||void 0;return o.createElement(T.b,{appBarRef:this._setAppBarRef,backLocation:n?n.permalink:"/",history:t,title:R},o.createElement(y.a,{fetchStatus:e,render:this._render,retryMessage:j}))}}r()(k,"contextType",i.a);const x=O.a.create(e=>({iframe:{flexGrow:1}}));t.default=Object(b.c)({page:"tweet",section:"analytics"})(m(k))},aH1V:function(e,t,a){"use strict";a.r(t),a.d(t,"QuickPromoteScreen",(function(){return Ee}));a("WNMA"),a("kYxP");var n=a("KEM+"),r=a.n(n),o=a("ERkP"),i=a("v6aA"),c=a("rxPX"),s=(a("IAdD"),a("Ssj5")),l=a("9OUN");a("JtPf");var d=a("oEOe");const u=Object.freeze({}),g=Object.freeze({Loading:"loading",Success:"success",Failure:"failure"});const h=function(e,t){const a={REQUEST:`${n="rweb/ads/typeahead"}/${r=e}/REQUEST`,SUCCESS:`${n}/${r}/SUCCESS`,FAILURE:`${n}/${r}/FAILURE`};var n,r;return{typeaheadApiActionTypes:a,getTypeaheadResults:(n,r)=>(o,i,{api:c})=>{const s=i().ads.typeahead[e][n];if(null==s?void 0:s.result)return Promise.resolve(s.result);return Object(d.b)(o,{request:t(c),params:Object.assign({query:n},r)})({actionTypes:a,context:"ADS_TYPEAHEAD_"+e,meta:{query:n}})},reducer:(e=u,t)=>{switch(t.type){case a.REQUEST:{const{query:a}=t.meta;return Object.assign({},e,{[a]:{fetchStatus:g.Loading}})}case a.FAILURE:{const{error:a,meta:{query:n}}=t;return Object.assign({},e,{[n]:{fetchStatus:g.Failure,error:a}})}case a.SUCCESS:{const{meta:{query:a},payload:n}=t;return Object.assign({},e,{[a]:{fetchStatus:g.Success,result:n}})}default:return e}}}}("targetingLocation",e=>e.Ads.getTargetableLocations),p={targetingLocation:h.reducer},m={typeahead:Object(l.c)(p)},b=Object(l.c)(m);s.a.register({ads:b});const y={targeting:{targetedLocations:[],locationQuery:"",age:{min:"13",max:"50+"},gender:"both"},budget:{dailyBudget:500,durationDays:5}},f=e=>(t,a)=>(t(T(e)),t(h.getTypeaheadResults(e,{locationType:"COUNTRIES"}))),T=e=>({type:"rweb/quickPromote/targeting/setLocationQuery",payload:{locationQuery:e}}),_={setTargetingLocationQuery:T,addTargetedLocation:e=>({type:"rweb/quickPromote/targeting/addTargetedLocation",payload:{targetedLocation:e}}),removeTargetedLocation:e=>({type:"rweb/quickPromote/targeting/removeTargetedLocation",payload:{targetedLocation:e}}),setTargetedAge:e=>({type:"rweb/quickPromote/targeting/setTargetedAge",payload:{age:e}}),setTargetedGender:e=>({type:"rweb/quickPromote/targeting/setTargetedGender",payload:{gender:e}}),setDailyBudget:e=>({type:"rweb/quickPromote/budget/setDailyBudget",payload:{dailyBudget:e}}),setBudgetDuration:e=>({type:"rweb/quickPromote/budget/setBudgetDuration",payload:{durationDays:e}})};s.a.register({quickPromote:(e=y,t)=>{switch(t.type){case"rweb/quickPromote/targeting/setLocationQuery":{const{locationQuery:a}=t.payload;return Object.assign({},e,{targeting:Object.assign({},e.targeting,{locationQuery:a})})}case"rweb/quickPromote/targeting/addTargetedLocation":{const{targetedLocation:a}=t.payload,n=e.targeting.targetedLocations.concat(a);return Object.assign({},e,{targeting:Object.assign({},e.targeting,{targetedLocations:n})})}case"rweb/quickPromote/targeting/removeTargetedLocation":{const{targetedLocation:a}=t.payload,n=e.targeting.targetedLocations.filter(({targeting_value:e})=>e!==a.targeting_value);return Object.assign({},e,{targeting:Object.assign({},e.targeting,{targetedLocations:n})})}case"rweb/quickPromote/targeting/setTargetedAge":{const{age:a}=t.payload;return Object.assign({},e,{targeting:Object.assign({},e.targeting,{age:a})})}case"rweb/quickPromote/targeting/setTargetedGender":{const{gender:a}=t.payload;return Object.assign({},e,{targeting:Object.assign({},e.targeting,{gender:a})})}case"rweb/quickPromote/budget/setDailyBudget":{const{dailyBudget:a}=t.payload;return Object.assign({},e,{budget:Object.assign({},e.budget,{dailyBudget:a})})}case"rweb/quickPromote/budget/setBudgetDuration":{const{durationDays:a}=t.payload;return Object.assign({},e,{budget:Object.assign({},e.budget,{durationDays:a})})}default:return e}}});const E=e=>e.quickPromote.budget.dailyBudget,w=e=>e.quickPromote.budget.durationDays;var v=Object(c.a)().propsFromState(()=>({dailyBudget:E,budgetDuration:w})).propsFromActions(()=>({setDailyBudget:_.setDailyBudget,setBudgetDuration:_.setBudgetDuration})).withAnalytics({page:"quick_promote"}),C=a("jHSc"),I=a("daAW"),L="quickPromote",O=a("MWbm"),S=a("t62R"),R=a("rHpw");function j(e,t,a){return`/${e}/status/${t}/quick_promote/${a}`}const k=Object.freeze({Targeting:"targeting",TargetingLocation:"targeting_location",BudgetSelect:"budget_select",Review:"review"});class x extends o.PureComponent{constructor(...e){super(...e),r()(this,"_renderHeader",()=>null),r()(this,"_handleScribeDummyClick",()=>{const{analytics:e}=this.props;e.scribe({action:"click"})})}render(){const{history:e,match:{params:{screenName:t,statusId:a}}}=this.props;return o.createElement(C.b,{documentTitle:"Budget and Duration",history:e,renderHeader:this._renderHeader},o.createElement(O.a,{style:A.qpContainer,testID:L},o.createElement(S.c,{align:"center",onClick:this._handleScribeDummyClick},"Select Budget and Duration"),o.createElement(S.c,{align:"center"},"Budget"),o.createElement(S.c,{align:"center"},"Duration"),o.createElement(I.a,{to:j(t,a,k.Review)},o.createElement(S.c,{align:"center"},"Go to review"))))}}r()(x,"contextType",i.a);const A=R.a.create(e=>({qpContainer:{flex:1}}));var P=v(x),N=a("0KEI"),D=a("XOJV");const F=(e,t)=>t.match.params.statusId,q=(e,t)=>D.a.selectHydrated(e,F(0,t)),H=(e,t)=>D.a.selectFetchStatus(e,F(0,t));var B=Object(c.a)().propsFromState(()=>({statusId:F,fetchStatus:H,tweet:q})).propsFromActions(()=>({createLocalApiErrorHandler:Object(N.d)("QUICK_PROMOTE_SCREEN"),fetchTweetIfNeeded:D.a.fetchOneIfNeeded})).withAnalytics({page:"quick_promote"}),M=a("q9Zt"),U=a("v//M"),Q=a("W5XZ"),$=a("f004"),K=a("3XMw"),W=a.n(K),z=a("/de5");const G=(e,t)=>e.quickPromote.targeting.targetedLocations,V=(e,t)=>e.quickPromote.targeting.age,J=(e,t)=>e.quickPromote.targeting.gender,X=(e,t)=>e.quickPromote.budget.dailyBudget,Z=(e,t)=>e.quickPromote.budget.durationDays;var Y=Object(c.a)().propsFromState(()=>({targetedLocations:G,age:V,gender:J,dailyBudget:X,selectDailyBudget:X,durationDays:Z})).propsFromActions(()=>({createLocalApiErrorHandler:Object(N.d)("QUICK_PROMOTE_REVIEW_SCREEN")})).withAnalytics({page:"quick_promote"});class ee extends o.PureComponent{constructor(...e){super(...e),r()(this,"_renderHeader",()=>null),r()(this,"_handlePromote",()=>{}),r()(this,"_handleScribeDummyClick",()=>{const{analytics:e}=this.props;e.scribe({action:"click"})})}render(){const{history:e}=this.props;return o.createElement(C.b,{documentTitle:"Review",history:e,renderHeader:this._renderHeader},o.createElement(O.a,{style:te.qpContainer,testID:L},o.createElement(S.c,{align:"center",onClick:this._handleScribeDummyClick},"Review page"),o.createElement(S.c,{align:"center",onClick:this._handlePromote},"Promote button")))}}r()(ee,"contextType",i.a);const te=R.a.create(e=>({qpContainer:{flex:1}}));var ae=Y(ee),ne=a("zrOZ");const re=(e,t)=>{const a=oe(e,t);return e.ads.typeahead.targetingLocation[a]},oe=(e,t)=>e.quickPromote.targeting.locationQuery,ie=(e,t)=>e.quickPromote.targeting.targetedLocations;var ce=Object(c.a)().propsFromState(()=>({targetingLocationQuery:oe,targetingLocations:re,targetedLocations:ie})).propsFromActions(()=>({addTargetedLocation:_.addTargetedLocation,removeTargetedLocation:_.removeTargetedLocation,setAndFetchTargetingLocationQuery:f,createLocalApiErrorHandler:Object(N.d)("QUICK_PROMOTE_TARGETING_LOCATION_SCREEN")})).withAnalytics({page:"quick_promote"}),se=a("p+r5");class le extends o.PureComponent{constructor(...e){super(...e),r()(this,"_renderHeader",()=>null),r()(this,"_handleToggleTargetingLocation",(e,t)=>()=>{const{addTargetedLocation:a,removeTargetedLocation:n,analytics:r}=this.props;t?n(e):a(e),t?r.scribe({action:"removeTargetingLocation"}):r.scribe({action:"addTargetingLocation"})}),r()(this,"_handleTargetingLocationChange",e=>{const{createLocalApiErrorHandler:t,setAndFetchTargetingLocationQuery:a}=this.props;a(e.target.value).catch(t())}),r()(this,"_handleScribeDummyClick",()=>{const{analytics:e}=this.props;e.scribe({action:"click"})})}render(){const{history:e,match:{params:{screenName:t,statusId:a}},targetingLocationQuery:n,targetingLocations:r,targetedLocations:i}=this.props,c=Object(ne.a)(i.map(({targeting_value:e})=>e));return o.createElement(C.b,{documentTitle:"Locations",history:e,renderHeader:this._renderHeader},o.createElement(O.a,{style:de.qpContainer,testID:L},o.createElement(I.a,{to:j(t,a,k.Targeting)},o.createElement(S.c,{align:"center",onClick:this._handleScribeDummyClick},"Locations")),o.createElement(se.a,{name:"locationTargetingInput",onChange:this._handleTargetingLocationChange,value:n}),r&&r.result?r.result.map(e=>{const t=c.has(e.targeting_value);return o.createElement(S.c,{key:e.targeting_value,onClick:this._handleToggleTargetingLocation(e,t)},e.name,t?" - selected":"")}):null))}}r()(le,"contextType",i.a);const de=R.a.create(e=>({qpContainer:{flex:1}}));var ue=ce(le);const ge=(e,t)=>e.quickPromote.targeting.targetedLocations;var he=Object(c.a)().propsFromState(()=>({targetedLocations:ge})).propsFromActions(()=>({})).withAnalytics({page:"quick_promote"});const pe=W.a.d6884e05;class me extends o.PureComponent{constructor(...e){super(...e),r()(this,"_renderHeader",()=>null),r()(this,"_handleScribeDummyClick",()=>{const{analytics:e}=this.props;e.scribe({action:"click"})})}render(){const{history:e,match:{params:{screenName:t,statusId:a}},targetedLocations:n}=this.props;return o.createElement(C.b,{documentTitle:pe,history:e,renderHeader:this._renderHeader},o.createElement(O.a,{style:be.qpContainer,testID:L},o.createElement(S.c,{align:"center",onClick:this._handleScribeDummyClick},"Targeting page"),o.createElement(I.a,{to:j(t,a,k.TargetingLocation)},o.createElement(S.c,{align:"center"},"Selected targetedLocations: ",n.map(({name:e})=>e))),o.createElement(I.a,{to:j(t,a,k.BudgetSelect)},o.createElement(S.c,{align:"center"},"Budget Select"))))}}r()(me,"contextType",i.a);const be=R.a.create(e=>({qpContainer:{flex:1}}));var ye=he(me);var fe=a("zCf4");const Te=W.a.g9079b93,_e=W.a.deaf5b15;class Ee extends o.PureComponent{constructor(...e){super(...e),r()(this,"_getRetweetOrTweet",()=>{const{tweet:e}=this.props;return e?Object($.a)(e):e}),r()(this,"_handleFetchTweet",()=>{const{createLocalApiErrorHandler:e,fetchTweetIfNeeded:t,statusId:a}=this.props;t(a).catch(e(Q.a))}),r()(this,"_render",()=>{const e=this._getRetweetOrTweet();if(!e||e&&e.user.id_str!==this.context.loggedInUserId)return o.createElement(M.a,{onRetry:null,title:Te});const{match:t}=this.props;return o.createElement(fe.d,null,Object.values(k).map(e=>{const a=((e,t)=>{const a=Object.keys(e).find(a=>e[a]===t);return a?e[a]:void 0})(k,e);return a?o.createElement(we,{key:a,pathPrefix:t.path,screenType:a}):null}),o.createElement(fe.b,{component:z.a}))})}componentDidMount(){this._handleFetchTweet()}render(){const{fetchStatus:e}=this.props;return o.createElement(U.a,{fetchStatus:e,render:this._render,retryMessage:_e})}}r()(Ee,"contextType",i.a);const we=({screenType:e,pathPrefix:t})=>{const a=`${t}/${e}`;switch(e){case"targeting":return o.createElement(fe.b,{component:ye,path:a});case"targeting_location":return o.createElement(fe.b,{component:ue,path:a});case"budget_select":return o.createElement(fe.b,{component:P,path:a});case"review":return o.createElement(fe.b,{component:ae,path:a});default:throw function(e){throw new Error("Not reachable section reached!")}()}},ve=B(Ee);t.default=ve},daAW:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a("zCf4"),r=a("BFfR"),o=a("ERkP"),i=a.n(o),c=a("11Hm"),s=(a("aWzz"),a("cxan")),l=a("+wNj"),d=a("h7FZ");i.a.Component;i.a.Component;var u=function(e,t){return"function"==typeof e?e(t):e},g=function(e,t){return"string"==typeof e?Object(c.c)(e,null,null,t):e},h=function(e){return e},p=i.a.forwardRef;void 0===p&&(p=h);var m=p((function(e,t){var a=e.innerRef,n=e.navigate,r=e.onClick,o=Object(l.a)(e,["innerRef","navigate","onClick"]),c=o.target,d=Object(s.a)({},o,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}});return d.ref=h!==p&&t||a,i.a.createElement("a",d)}));var b=p((function(e,t){var a=e.component,r=void 0===a?m:a,o=e.replace,c=e.to,b=e.innerRef,y=Object(l.a)(e,["component","replace","to","innerRef"]);return i.a.createElement(n.e.Consumer,null,(function(e){e||Object(d.a)(!1);var a=e.history,n=g(u(c,e.location),e.location),l=n?a.createHref(n):"",m=Object(s.a)({},y,{href:l,navigate:function(){var t=u(c,e.location);(o?a.replace:a.push)(t)}});return h!==p?m.ref=t||b:m.innerRef=b,i.a.createElement(r,m)}))})),y=function(e){return e},f=i.a.forwardRef;void 0===f&&(f=y);f((function(e,t){var a=e["aria-current"],r=void 0===a?"page":a,o=e.activeClassName,c=void 0===o?"active":o,h=e.activeStyle,p=e.className,m=e.exact,T=e.isActive,_=e.location,E=e.sensitive,w=e.strict,v=e.style,C=e.to,I=e.innerRef,L=Object(l.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.a.createElement(n.e.Consumer,null,(function(e){e||Object(d.a)(!1);var a=_||e.location,o=g(u(C,a),a),l=o.pathname,O=l&&l.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=O?Object(n.f)(a.pathname,{path:O,exact:m,sensitive:E,strict:w}):null,R=!!(T?T(S,a):S),j=R?function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return e})).join(" ")}(p,c):p,k=R?Object(s.a)({},v,{},h):v,x=Object(s.a)({"aria-current":R&&r||null,className:j,style:k,to:o},L);return y!==f?x.ref=t||I:x.innerRef=I,i.a.createElement(b,x)}))}))},z4TA:function(e,t,a){"use strict";a.r(t),a.d(t,"ConversationScreen",(function(){return Ke}));a("IAdD"),a("MvUL"),a("kYxP");var n=a("KEM+"),r=a.n(n),o=a("aeN7"),i=a("ERkP"),c=a("s4rk"),s=a("pxuL"),l=a("zI2C"),d=a("es0u"),u=(a("x4t0"),a("WNMA"),a("zh9S")),g=a("6/RC"),h=a("oEGd"),p=a("0KEI"),m=a("hqKg"),b=a("8Lfv"),y=a("QK5w"),f=a("pNZL"),T=a("XOJV"),_=a("Mx3A"),E=a("P1r1");const w=(e,t)=>e.location&&e.location.state&&e.location.state[t],v=(e,t)=>{const a=w(t,"focal");return a||C(e,t)},C=(e,t)=>{const{location:a,match:n}=t;return n.params&&n.params.statusId?n.params.statusId:a.query&&a.query.tweet_id&&"string"==typeof a.query.tweet_id?a.query.tweet_id:""},I=Object(m.createSelector)(y.a,(e,t)=>w(t,"contextTweetId"),(e,t)=>T.a.selectFetchStatus(e,v(e,t)),(e,t)=>"PUSH"===t.history.action,(e,t)=>{if(!g.canUseDOM)return!1;const{location:a}=t,n=a.query,r=Object(y.a)(e,t);return Object(_.c)({query:n,httpReferer:r?"":document.referrer||"",requestUrl:window.location.href}).referral_type===_.a.Web},(e,t)=>{const a=w(t,"referrer"),n=v(e,t);return!!a&&a.includes("/i/topics/tweet/"+n)},(e,t)=>w(t,"promotedContent"),(e,t)=>t.location.query&&"string"==typeof t.location.query.cxt?t.location.query.cxt:void 0,(e,t)=>{const a=v(e,t),n=T.a.selectHydrated(e,a);return n&&n.conversation_id_str?T.a.selectHydrated(e,n.conversation_id_str):null},(e,t)=>T.a.selectHydrated(e,v(e,t)),(e,t)=>t.location.pathname.indexOf("/intent/")>-1,(e,t)=>t.match.params.screenName,(e,t)=>w(t,"socialContext"),v,C,E.h,(e,t)=>w(t,"contextualClientEventInfo"),f.a,(e,t)=>w(t,"overflow"),(e,t,a,n,r,o,i,c,s,l,d,u,g,h,p,m,b,y,f)=>({contextTweetId:t,conversationTreeEnabled:m,initialFetchStatus:a,isForwardNavigation:n,isInitialScreen:!e,isReferralSource:r,isReferredFromExploreTopics:o,promotedContent:i,richLandingContextId:c,rootTweet:s,focalTweet:l,isIntentRoute:d,screenName:u,selectedTweetId:p,socialContext:g,statusId:h,contextualClientEventInfo:b,tweetDetailNav:y,overflowCount:f})),L={createLocalApiErrorHandler:Object(p.d)("CONVERSATION_SCREEN"),googleAnalyticsPageView:u.a,scribePageImpression:u.d,clearTimelineCache:(e,t)=>Object(b.a)(e,t),updateSettings:E.D};var O=Object(h.g)(I,L),S=a("ymux"),R=a("rxPX"),j=a("HAhZ"),k=Object(R.a)().propsFromState(()=>({tips:j.c})).propsFromActions(()=>({addTip:j.a})),x=a("7JQg"),A=a("3XMw"),P=a.n(A),N=a("t62R"),D=a("/yvb"),F=a("feu+"),q=a("rHpw"),H=a("6s7X"),B=a("Lsrn"),M=a("k/Ka");const U=(e={})=>Object(M.a)("svg",Object.assign({},e,{style:[B.a.root,e.style],viewBox:"0 0 48 48"}),i.createElement("g",null,i.createElement("circle",{cx:"17",cy:"7",fill:"#1DA1F2",r:"7"}),i.createElement("circle",{cx:"34",cy:"30",fill:"#FFAD1F",r:"4"}),i.createElement("circle",{cx:"34",cy:"44",fill:"#F45D22",r:"4"}),i.createElement("path",{d:"M18 16c0-.552-.448-1-1-1s-1 .448-1 1v22c0 3.866 3.134 7 7 7h5c.552 0 1-.448 1-1s-.448-1-1-1h-5c-2.76 0-5-2.24-5-5v-9.1c1.27 1.296 3.04 2.1 5 2.1h5c.552 0 1-.448 1-1s-.448-1-1-1h-5c-2.76 0-5-2.24-5-5v-8z",fill:"#CCD6DD"})));U.metadata={width:48,height:48};var Q=U;const $=P.a.j0014cae,K=i.createElement(H.a,null),W=P.a.e68208fb,z=P.a.dcfda40b,G=P.a.gf2e6430,V=P.a.ae3f6bc8,J=P.a.d52de85c,X=P.a.a399ed2f,Z=()=>i.createElement(N.c,{align:"left"},z,i.createElement("ul",null,i.createElement("li",null,G),i.createElement("li",null,V),i.createElement("li",null,J)));const Y=q.a.create(e=>({icon:{height:e.spaces.xxLarge,width:e.spaces.xxLarge}}));var ee=Object(x.c)({page:"tweet",section:"conversation_tree_education"})(k((function(e){const{tips:t,addTip:a,showImmediately:n}=e,[r,o]=i.useState(!1),c=()=>{a({conversation_tree_education:!0}),o(!1)},s=r||n&&!t.conversation_tree_education;return i.createElement(i.Fragment,null,i.createElement(D.a,{accessibilityLabel:$,icon:K,onPress:()=>{o(!0)},type:"text"}),s?i.createElement(F.a,{actionLabel:X,graphic:Q,graphicDisplayMode:"illustration",graphicStyle:Y.icon,headline:W,onAction:c,onClose:c,subtext:i.createElement(Z,null)}):null)}))),te=a("wrlS"),ae=a("MWbm"),ne=a("CK8+");const re=q.a.create(e=>({conversationNav:{flexDirection:"row",alignItems:"center"}}));var oe=function(e){const{conversationTreeEnabled:t,onTreeSwitchChange:a,showEducationImmediately:n}=e,r=t?i.createElement(ee,{showImmediately:n}):void 0,o=te.a.isTrue("responsive_web_conversation_tree_toggle")?i.createElement(ne.a,{accessibilityLabel:"Conversation Tree toggle",onValueChange:a,value:t}):void 0;return i.createElement(ae.a,{style:re.conversationNav},r,o)},ie=a("rkhm"),ce=a("I7xG"),se=a("8UdT"),le=a("dwig"),de=a("kGix"),ue=a("JyI6"),ge=a("dFWS");const he=P.a.d2c7a41c,pe=P.a.e20404df,me=P.a.d17df547;var be=({getLocationState:e,history:t})=>i.createElement(ue.a,{accessibilityLabel:he,getLocationState:e,history:t,icon:i.createElement(ge.a,null),label:me,scribeComponent:"floating_reply_button",shortLabel:pe}),ye=a("muX9"),fe=a("iFPY"),Te=(a("JtPf"),a("zb92"));var _e=Object(Te.a)({loader:()=>Promise.all([a.e(0),a.e(143)]).then(a.bind(null,"uo3S")),renderPlaceholder:(e,t)=>null}),Ee=a("rJoH"),we=a("yoO3"),ve=a("AUxQ"),Ce=a("QIgh"),Ie=a("BV3T"),Le=a("VTxf"),Oe=a("SrIh"),Se=a("fTQJ"),Re=a("ZNT5"),je=(a("aWzz"),a("wgnn"));const ke=e=>{switch(e){case je.a.NOT_FOUND:return i.createElement(Le.a,null);case je.a.NOT_ALLOWED:return i.createElement(Ie.a,null);default:return Object(Oe.a)("Unhandled timeline unavailable reason: "+e),null}},xe=()=>i.createElement(Le.a,null);class Ae extends i.Component{constructor(...e){super(...e),r()(this,"_getModule",Object(ce.a)(this,e=>e.statusId,e=>e.richLandingContextId,(e,t)=>(e=>{const{richLandingContextId:t,statusId:a}=e,n=t?`${a}-${t}`:a,r={refsrc_tweet:a,rux_cxt:t};return Object(Re.a)({timelineId:"rich-tweet-landing-"+n,getEndpoint:e=>e.URT.fetchRichTweetLandingTimeline,getEndpointParams:e=>Object.assign({},e,r),context:"FETCH_RICH_TWEET_LANDING",perfKey:"rich-tweet-landing"})})({statusId:e,richLandingContextId:t})))}render(){const{title:e}=this.props;return i.createElement(Se.a,{entryConfiguration:Ce.b,module:this._getModule(),renderEmptyState:xe,renderUnavailable:ke,title:e})}}var Pe=a("Rp9C"),Ne=a("uArA"),De=a("VS6U"),Fe=a("oQhu"),qe=a("mN6z");const He=P.a.bea869b3,Be=P.a.c299a6cf,Me=P.a.ad666301,Ue=P.a.f0c37ddb,Qe={page:"tweet"},$e={page:"tweet",section:"landing"};class Ke extends i.Component{constructor(e){super(e),r()(this,"_handleTreeSwitchChange",e=>{const{updateSettings:t}=this.props;t({conversationTreeEnabled:e}),e||this.context.setBackgroundClickHandler(null)}),r()(this,"_getFabState",()=>{const{promotedContent:e,statusId:t}=this.props;return{inReplyToStatusId:t,promotedContent:e}}),r()(this,"_isBucketedInRichTweetLandingExperiment",()=>{const{isReferralSource:e,isReferredFromExploreTopics:t,richLandingContextId:a}=this.props;return!(a||!e||t)&&te.a.isTrue("responsive_web_rich_tweet_landing_enabled")}),r()(this,"_getNavigationParams",Object(ce.a)(this,e=>e.tweetDetailNav,e=>e.contextualClientEventInfo,e=>e.overflowCount,(e,t,a)=>{var n,r;return{referrer:e,controller_data:e&&(null==t||null==(n=t.details)||null==(r=n.timelinesDetails)?void 0:r.controllerData),overflowCount:a}})),r()(this,"_getApiErrorHandlerMap",Object(ce.a)(this,e=>e.screenName,e=>Object(ie.a)(e))),r()(this,"_getModule",Object(ce.a)(this,e=>e.statusId,e=>e.conversationTreeEnabled,(e,t)=>Object(S.a)({focalTweetId:e,conversationTreeEnabled:t}))),r()(this,"_handleEntriesUpdate",({entries:e,fetchStatus:t})=>{const{recordTTFL:a}=this.props;if(t===de.a.FAILED&&(this._shouldRecordTTFL=!1),this._shouldRecordTTFL&&e.length){const t=e.some(({type:e})=>e===se.b.Tweet);this._shouldRecordTTFL=!1,t&&a&&a("permalink")}}),r()(this,"_shouldRedirectToCanonical",()=>{const{focalTweet:e,screenName:t,selectedTweetId:a,statusId:n}=this.props;return a===n&&(t&&e&&t.toLowerCase()!==e.user.screen_name.toLowerCase())}),r()(this,"_redirectToCanonical",()=>{const{history:e,location:t}=this.props;e.replace({pathname:this._getCanonicalPath(),query:t.query,state:t.state})}),r()(this,"_getCanonicalPath",()=>{const{focalTweet:e}=this.props;return e?`/${e.user.screen_name}/status/${e.id_str}`:"/"}),r()(this,"_getPathForTweetId",(e,t)=>`/${t||"i"}/status/${e}`),r()(this,"_getScribeData",Object(Fe.a)((e,t)=>({items:[Pe.a.forTweet(e,t)],tweet_id:e}))),r()(this,"_getScribeNamespace",()=>this._shouldRenderRichTweetLandingTimeline()?$e:Qe),r()(this,"_setSelectedTweetId",(e,t)=>{const{history:a,location:n,statusId:r}=this.props;a.replace(this._getPathForTweetId(e,t),Object.assign({},n.state,{focal:r,lockScroll:!0}))}),r()(this,"_setBackgroundClickHander",()=>{var e;const{focalTweet:t,rootTweet:a,selectedTweetId:n}=this.props,r=null==(e=a||t)?void 0:e.conversation_id_str,o=(null==a?void 0:a.user.screen_name)||void 0,i=r&&r!==n?Object(Ne.a)(()=>{this._setSelectedTweetId(r,o)},'a, button, input, [role="button"], [id="layers"]'):null;this.context.setBackgroundClickHandler(i)}),this._shouldRecordTTFL=e.isInitialScreen,this._isInlineReplyEnabled=te.a.isTrue("responsive_web_inline_reply_enabled"),this._isInlineReplyWithFabEnabled=te.a.isTrue("responsive_web_inline_reply_with_fab_enabled"),this._isConversationTree=te.a.isTrue("responsive_web_conversation_tree_enabled")}shouldComponentUpdate(e){return!Object(qe.a)(e,this.props)}componentDidMount(){const{history:e,location:t,isForwardNavigation:a}=this.props;if(this._shouldRenderRichTweetLandingTimeline()&&(!t.state||!t.state.isRichTweetLanding)){const a=Object.assign({},t,{state:Object.assign({},t.state,{isRichTweetLanding:!0})});e.replace(a)}a&&this._clearTimelineCache()}componentWillUnmount(){this.context.setBackgroundClickHandler(null)}componentDidUpdate(e){this._shouldRedirectToCanonical()?this._redirectToCanonical():(this.props.statusId!==e.statusId&&this.props.isForwardNavigation&&this._clearTimelineCache(),e.selectedTweetId===this.props.selectedTweetId&&e.rootTweet===this.props.rootTweet||!this.props.conversationTreeEnabled||this._setBackgroundClickHander())}render(){var e;const{conversationTreeEnabled:t,focalTweet:a,history:n,isIntentRoute:r,location:o,promotedContent:s,statusId:d}=this.props,u=a?Ue({tweetText:a.text,fullName:a.user.name}):void 0,g=a&&"twitter://status?id="+a.id_str,h=a&&"https://twitter.com"+(this._getCanonicalPath()||""),p=a&&Me({fullName:a.user.name}),m=this._shouldRenderRichTweetLandingTimeline()?null:i.createElement(oe,{conversationTreeEnabled:t,onTreeSwitchChange:this._handleTreeSwitchChange,showEducationImmediately:null==(e=o.state)?void 0:e.fromApp}),b=this._shouldRenderRichTweetLandingTimeline()||!t;return i.createElement(x.b,{data:this._getScribeData(d,s),namespace:this._getScribeNamespace()},i.createElement(we.a,null,h?i.createElement(ye.a,null,i.createElement("link",{href:h,rel:"canonical"}),i.createElement("link",{href:"https://publish.twitter.com/oembed?url="+h,rel:"alternate",title:u,type:"application/json+oembed"})):null,i.createElement(Ee.a,{canonical:h,description:null==a?void 0:a.full_text,image:null==a?void 0:a.user.profile_image_url_https,title:p,type:"article"}),i.createElement(l.a,{deepLink:g}),h?i.createElement(c.a,{canonical:h}):null,i.createElement(De.a,{backLocation:"/",documentTitle:u,history:n,primaryContent:this._renderTimeline(),rightControl:m,sidebarContent:this._renderSidebarContent(),title:a&&a.self_thread?Be:He,withAppBarBorder:b,withSideBorders:b}),r?i.createElement(fe.a,{history:n,location:o,tweet:a}):null))}_renderSidebarContent(){const{focalTweet:e}=this.props;return e&&e.user.id_str?i.createElement(d.a,{withWhoToFollow:!1},i.createElement(_e,{focalTweetId:e.id_str})):null}_renderTimeline(){const{conversationTreeEnabled:e,focalTweet:t,history:a,location:n,richLandingContextId:r,rootTweet:o,selectedTweetId:c,statusId:s,socialContext:l,promotedContent:d,contextTweetId:u}=this.props,g={selectedTweetId:c,setSelectedTweetId:this._setSelectedTweetId},h=this._isInlineReplyEnabled&&!this._isInlineReplyWithFabEnabled||e?null:i.createElement(be,{getLocationState:this._getFabState,history:a});return i.createElement(le.a,{fab:h},this._shouldRenderRichTweetLandingTimeline()?i.createElement(Ae,{richLandingContextId:r,statusId:s,title:He}):i.createElement(ve.a,{apiErrorHandlerMap:this._getApiErrorHandlerMap(),contextTweetId:u,conversationTreeEnabled:e,fetchOptions:this._getNavigationParams(),focalTweet:t,focalTweetId:s,location:n,module:this._getModule(),onEntriesUpdate:this._handleEntriesUpdate,promotedContent:d,rootTweet:o||void 0,selectedTweet:g,socialContext:l}))}_shouldRenderRichTweetLandingTimeline(){const{isReferredFromExploreTopics:e,richLandingContextId:t}=this.props;return!!t||e||this._isBucketedInRichTweetLandingExperiment()}_clearTimelineCache(e=this._getModule(),t=this._getNavigationParams()){const{clearTimelineCache:a,createLocalApiErrorHandler:n}=this.props;a(e,t).catch(n(this._getApiErrorHandlerMap()))}}r()(Ke,"contextType",s.a),r()(Ke,"defaultProps",{recordTTFL:o.c});t.default=O(Ke)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Conversation.6807efe5.js.map