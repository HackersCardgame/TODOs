(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"45mF":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("1YZw"),i=a("pXBW"),s=a("3XMw"),o=a.n(s),r=a("SrIh");const l=o.a.a5d4fda0,d=(e=l,t=!0)=>({customErrorHandler:a=>{const{context:s}=a;return!a instanceof i.a&&(a.message=`Strato error occurred in ${s.id}: ${s.action}`),Object(r.a)(a,{extra:{context:s,isStrato:!0}}),t?Object(n.b)({text:e}):[]}})},"6XNv":function(e,t,a){"use strict";a("IAdD"),a("kYxP");var n=a("KEM+"),i=a.n(n),s=a("ERkP"),o=a("t62R"),r=a("FG+G"),l=a("rHpw"),d=(a("aWzz"),a("k/Ka")),c=a("MWbm");const h=s.forwardRef((e,t)=>Object(d.a)("select",Object.assign({},e,{ref:t}))),p=e=>Object(d.a)("option",e);class u extends s.PureComponent{constructor(...e){super(...e),i()(this,"_selectRef",s.createRef()),i()(this,"state",{isFocused:!1}),i()(this,"_handleChange",e=>{const{onChange:t,withEmptyOption:a}=this.props,{selectedIndex:n,value:i}=e.target;t&&t(i,n-(a?1:0))}),i()(this,"_handleBlur",e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t()}),i()(this,"_handleFocus",e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t()})}componentDidMount(){this.props.autofocus&&this._selectRef&&this._selectRef.current&&this._selectRef.current.focus()}render(){const{style:e,disabled:t,options:a,value:n,label:i,hasError:o,helperText:l,testID:d,withEmptyOption:u}=this.props,{isFocused:g}=this.state;return s.createElement(s.Fragment,null,s.createElement(c.a,{style:[m.container,t&&m.disabled,m.bottomBorder,t&&m.bottomBorderDisabled,g&&m.bottomBorderFocused,o&&m.bottomBorderError,e]},this._renderLabel(),s.createElement(c.a,{style:m.dropdownContainer},s.createElement(h,{accessibilityLabel:i,disabled:t,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,ref:this._selectRef,style:[m.select,i&&m.selectWithLabel,t&&m.disabled],testID:d||"",value:n},u?s.createElement(p,{disabled:!0,style:m.option,value:""}):null,a.map(e=>{const{disabled:t,label:a,value:n}=e;return s.createElement(p,{disabled:t,key:`${a}-${n}`,style:m.option,value:n},a)})),s.createElement(r.a,{style:[m.dropdownCaret,g&&m.dropdownCaretFocused,o&&m.dropdownCaretError]}))),l?this._renderHelperText():null)}_renderLabel(){const{hasError:e,label:t}=this.props,{isFocused:a}=this.state;return s.createElement(o.c,{color:e?"red":a?"primary":"deepGray",style:m.label},t)}_renderHelperText(){return s.createElement(c.a,{accessibilityLiveRegion:"polite"},s.createElement(o.c,{color:"deepGray",style:m.helperText},this.props.helperText))}}i()(u,"defaultProps",{disabled:!1,autofocus:!1,withEmptyOption:!1}),u.propTypes={};const m=l.a.create(e=>({container:{backgroundColor:e.colors.faintGray,paddingHorizontal:e.spaces.xSmall,borderWidth:e.borderWidths.none},disabled:{cursor:"default",opacity:.5},dropdownCaret:{color:e.colors.deepGray,height:"1.5em",pointerEvents:"none",position:"absolute",marginTop:"-0.75em",top:"50%",right:0},dropdownCaretFocused:{color:e.colors.primary},dropdownContainer:{position:"relative"},bottomBorder:{borderBottomWidth:e.borderWidths.medium,borderBottomColor:e.colors.deepGray,borderRadius:e.borderWidths.medium},bottomBorderFocused:{borderBottomColor:e.colors.primary},bottomBorderDisabled:{borderBottomColor:e.colors.transparent},dropdownCaretError:{color:e.colors.red},bottomBorderError:{borderBottomColor:e.colors.red},label:{alignSelf:"flex-start",paddingTop:e.spaces.xxSmall},option:{backgroundColor:e.colors.navigationBackground},select:{appearance:"none",backgroundColor:"transparent",borderRadius:e.borderWidths.none,borderWidth:e.borderWidths.none,color:e.colors.text,cursor:"pointer",fontSize:e.fontSizes.large,margin:0,outlineStyle:"none",padding:0,paddingRight:"1.5em",paddingVertical:e.spaces.small},selectWithLabel:{paddingBottom:e.spaces.xxSmall,paddingTop:e.spaces.micro},helperText:{alignSelf:"flex-start",paddingHorizontal:e.spaces.xSmall,paddingTop:e.spaces.xxSmall}}));t.a=u},EweD:function(e,t,a){"use strict";a("IAdD");var n=a("ERkP"),i=a("Lsrn"),s=a("k/Ka");const o=(e={})=>Object(s.a)("svg",Object.assign({},e,{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),n.createElement("g",null,n.createElement("path",{d:"M16.04 7.266c-.45 0-.815.297-.947.7l-.03.113s-1.064-1.397-3.277-1.397c-2.855 0-4.928 2.4-4.928 5.706 0 2.495 1.755 4.525 3.912 4.525 2.307 0 3.632-1.492 3.632-1.492s.597 1.75 3.503 1.75c.49 0 4.837-.297 4.837-5.172 0-5.923-4.82-10.743-10.744-10.743-5.922 0-10.74 4.82-10.74 10.743 0 5.924 4.818 10.743 10.742 10.743 2.244 0 4.04-.544 5.82-1.765.163-.112.273-.283.31-.48s-.005-.394-.118-.557c-.224-.327-.71-.418-1.037-.193-1.516 1.04-3.05 1.504-4.976 1.504-5.102 0-9.25-4.15-9.25-9.25S6.9 2.75 12 2.75 21.25 6.9 21.25 12c0 2.916-1.822 3.9-3.234 3.9-.53 0-2.234-.213-1.906-2.103 0 0 .938-5.4.938-5.523-.002-.557-.452-1.008-1.01-1.008zm-2.235 6.55c-.58.83-1.378 1.305-2.247 1.335l-.105.003c-1.483 0-2.52-1.112-2.578-2.768-.075-2.12 1.366-3.964 3.146-4.027l.102-.002c1.423 0 2.417 1.07 2.474 2.66.035 1.024-.245 2.018-.79 2.8z"})));o.metadata={width:24,height:24},t.a=o},MXY2:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("3XMw"),i=a.n(n);const s=i.a.bea869b3,o=i.a.f70a36d0,r=i.a.bac8f4c1,l=i.a.d17df547,d=i.a.h735a98d,c=e=>{const t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?d:e.isQuoteTweet||e.isRetweet?r:t?l:e.isThread?o:s}},Oib4:function(e,t,a){"use strict";a("IAdD");var n=a("ERkP"),i=a("Lsrn"),s=a("k/Ka");const o=(e={})=>Object(s.a)("svg",Object.assign({},e,{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),n.createElement("g",null,n.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm.025 16.468c-.708 0-1.28-.574-1.28-1.28 0-.71.572-1.282 1.28-1.282.708 0 1.28.573 1.28 1.28.002.708-.57 1.282-1.28 1.282zM14.47 7.636l-1.815 6.098c-.063.212-.258.357-.48.357h-.298c-.222 0-.416-.145-.48-.356L9.583 7.636c-.045-.152-.016-.316.08-.442.093-.127.24-.2.4-.2h3.927c.157 0 .306.073.4.2.094.126.124.29.08.442z"})));o.metadata={width:24,height:24},t.a=o},"S+H3":function(e,t,a){"use strict";a("IAdD");var n=a("ERkP"),i=a("Lsrn"),s=a("k/Ka");const o=(e={})=>Object(s.a)("svg",Object.assign({},e,{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),n.createElement("g",null,n.createElement("path",{d:"M15.09 9.07c-.25-1.83-1.43-2.98-3.1-2.98-1.66 0-2.85 1.15-3.09 2.98-.18 1.32 0 2.26.55 2.89.66.76 1.66.86 2.54.86.89 0 1.88-.1 2.54-.86.56-.63.74-1.57.56-2.89zm-1.68 1.9c-.21.24-.65.35-1.42.35-.76 0-1.2-.11-1.41-.35-.24-.28-.31-.86-.2-1.7.1-.76.47-1.68 1.61-1.68.58 0 .95.23 1.2.56.24.32.36.74.41 1.12.12.84.05 1.42-.19 1.7zm2.67 4.09c-.99-.99-2.4-1.52-4.07-1.52h-.03c-1.62 0-3.06.55-4.06 1.55-.87.87-1.34 2.02-1.34 3.25 0 .79.64 1.44 1.44 1.44h7.95c.79 0 1.44-.65 1.44-1.44 0-1.26-.47-2.43-1.33-3.28zm-7.44 3.276c-.318.002-.562-.288-.502-.6.116-.595.406-1.14.842-1.576.72-.72 1.78-1.12 3.01-1.12H12c1.27 0 2.32.37 3.02 1.08.432.432.715.962.83 1.564.06.308-.178.598-.492.6l-6.72.052zM21.75 6.97c-.22-1.7-1.32-2.75-2.86-2.75-1.53 0-2.64 1.05-2.87 2.75-.16 1.2.02 2.07.52 2.65.62.71 1.53.81 2.35.81.81 0 1.73-.1 2.34-.8.39-.45.59-1.07.59-1.85 0-.22-.02-.47-.07-.81zm-4.22.2c.13-.95.59-1.43 1.36-1.43.43 0 .77.15 1 .46.23.29.32.69.35.97.03.22.05.43.05.61 0 .4-.07.69-.21.84-.16.2-.54.28-1.19.28-.66 0-1.04-.08-1.2-.28-.2-.22-.25-.73-.16-1.45zm6.3 8.37c0 .74-.62 1.34-1.37 1.34h-3.75c-.41 0-.76-.34-.76-.76 0-.43.34-.76.76-.76h3.24c.1 0 .2-.05.26-.13.07-.09.1-.2.07-.3-.12-.53-.37-.99-.74-1.36-.61-.62-1.53-.94-2.64-.94-.73 0-1.39.15-1.93.44l-.5.32c-.36.21-.83.1-1.04-.25-.23-.36-.12-.82.24-1.05l.54-.34c.78-.42 1.71-.64 2.66-.64h.03c1.52 0 2.81.47 3.72 1.38.79.8 1.22 1.88 1.21 3.05zM2.18 7.78c0 .78.2 1.4.59 1.85.61.7 1.53.8 2.34.8.82 0 1.73-.1 2.35-.81.5-.58.68-1.45.52-2.65-.23-1.7-1.34-2.75-2.87-2.75-1.54 0-2.64 1.05-2.86 2.75-.05.34-.07.59-.07.81zm4.13.84c-.16.2-.54.28-1.2.28-.65 0-1.03-.08-1.19-.28-.14-.15-.21-.44-.21-.84 0-.18.02-.39.05-.61.03-.28.12-.68.35-.97.23-.31.57-.46 1-.46.77 0 1.23.48 1.36 1.43.09.72.04 1.23-.16 1.45zM.17 15.54c0 .74.62 1.34 1.37 1.34h3.75c.41 0 .76-.34.76-.76 0-.43-.34-.76-.76-.76H2.05c-.1 0-.2-.05-.26-.13-.07-.09-.1-.2-.07-.3.12-.53.37-.99.74-1.36.61-.62 1.53-.94 2.64-.94.73 0 1.39.15 1.93.44l.5.32c.36.21.83.1 1.04-.25.23-.36.12-.82-.24-1.05l-.54-.34c-.78-.42-1.71-.64-2.66-.64H5.1c-1.52 0-2.81.47-3.72 1.38-.79.8-1.22 1.88-1.21 3.05z"})));o.metadata={width:24,height:24},t.a=o},Ub51:function(e,t,a){"use strict";a("IAdD"),a("JtPf"),a("Qavd"),a("DZ+c"),a("x4t0"),a("MvUL"),a("kYxP");var n=a("97Jx"),i=a.n(n),s=a("KEM+"),o=a.n(s),r=a("ERkP"),l=a("6/RC"),d=(a("Ysgh"),a("wpu3"));const c=Object.freeze({all:"all",community:"community",by_invitation:"by_invitation"});var h=a("wrlS"),p=a("3XMw"),u=a.n(p),m=a("MWbm"),g=a("t62R"),_=a("CKsB"),b=a("/yvb"),y=a("rHpw"),f=a("Zg3A"),x=a("S+H3"),C=a("EweD");const v=u.a.g6185a9e,w=u.a.g2d04222,T=u.a.cfda7b45,S=u.a.baffe39a,E=u.a.af293dc2,R=u.a.h1053f7e,I=u.a.cfd2f35d,k=y.a.create(e=>({root:{flexDirection:"column",paddingTop:e.spaces.small,paddingBottom:e.spaces.xxSmall,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.jumbo},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.small,marginBottom:e.spaces.xSmall},menuRow:{flexDirection:"row",paddingTop:e.spaces.xSmall,paddingBottom:e.spaces.xSmall,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.small,marginVertical:e.spaces.small}}));var M=e=>{const{dismiss:t,isModal:a,value:n}=e,i=t=>()=>{e.onChange(t),e.dismiss()},s=h.b.isTrue("conversation_controls_flexible_participation_enabled");return r.createElement(m.a,{accessibilityRole:"dialog","aria-describedby":"conversation-controls-details","aria-labelledby":"conversation-controls-title",style:[k.root,a?k.modal:k.popover]},r.createElement(m.a,{style:k.title},r.createElement(g.c,{nativeID:"conversation-controls-title",weight:"bold"},v),r.createElement(g.c,{color:"deepGray",nativeID:"conversation-controls-details",size:"normal"},s?T:w)),r.createElement(m.a,null,r.createElement(_.a,{Icon:f.a,actionText:S,isSelected:c.all===n,onClick:i(c.all),selectable:!0,style:k.menuRow,withIconAsThumbnail:!0}),r.createElement(_.a,{Icon:x.a,actionText:E,isSelected:c.community===n,onClick:i(c.community),selectable:!0,style:k.menuRow,withIconAsThumbnail:!0}),r.createElement(_.a,{Icon:C.a,actionText:R,isSelected:c.by_invitation===n,onClick:i(c.by_invitation),selectable:!0,style:k.menuRow,withIconAsThumbnail:!0}),e.isModal?r.createElement(b.a,{key:"button_cancel",onPress:t,style:k.cancelButton,type:"neutral"},I):null))},B=a("PmiK"),A=a("Irs7"),D=a("efqG"),O=a("DlMI"),P=a("gBde"),L=a("fBGZ");const F=r.createElement(O.a,null),N=r.createElement(P.a,null),H=r.createElement(L.a,null),j=Object.freeze({all:{icon:F,label:u.a.i8ea6d4e},community:{icon:H,label:u.a.ec5a4a25},by_invitation:{icon:N,label:u.a.b4543009}});var V=Object(A.a)(e=>{const{icon:t,label:a}=j[e.value],{analytics:n,disabled:s,hidden:o}=e,l=r.useCallback(e=>{n.scribe({element:"conversation_control",action:"click"})},[n]),d=r.useCallback((t,a)=>r.createElement(M,i()({},e,{dismiss:t,isModal:"sheet"===a})),[e]),c=["community","by_invitation"].includes(e.value);return r.createElement(r.Fragment,null,r.createElement(m.a,{style:[z.container,o&&z.hidden]},r.createElement(D.a,{disabled:s,renderContent:d},r.createElement(b.a,{disabled:s,icon:t,onPress:l,size:"small",style:z.button,type:"text"},a))),r.createElement(m.a,{style:[z.separator,o&&z.hidden]}),c?r.createElement(B.a,null):null)});const z=y.a.create(e=>({button:{paddingHorizontal:e.spaces.xxSmall},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.xSmall},separator:{height:"1px",backgroundColor:e.colors.borderColor,width:"100%"},hidden:{visibility:"hidden"}}));var W=a("krmn"),U=a("oEoC"),G=a("cIoY"),K=a("w3n3"),q=a("MLl7"),$=a("DtVZ"),X=a("1auM"),Y=a("07FG"),Q=a("Q8CU"),J=a("QbaN"),Z=a("VPdC"),ee=a("B1L3"),te=(a("aWzz"),a("p+r5")),ae=a("GWvE");class ne extends r.Component{constructor(...e){super(...e),o()(this,"_setInputRef",e=>{this._inputRef=e})}render(){const{autoFocus:e,defaultValue:t,editable:a,label:n,onChange:i,name:s}=this.props;return r.createElement(m.a,{style:ie.root},r.createElement(te.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:e,defaultValue:t,editable:a,label:n,maxLength:25,name:s,onChange:i,ref:this._setInputRef,spellCheck:"false",style:ie.formTextInput}))}get value(){return this._inputRef&&this._inputRef.getValue()}get isValid(){const{optional:e}=this.props;return!this.value&&e||this.value&&!Object(ae.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}o()(ne,"defaultProps",{autoFocus:!1,editable:!0,optional:!1});const ie=y.a.create(e=>({root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.xLarge},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.xSmall}}));var se=ne,oe=a("mtvn"),re=a("6XNv");class le extends r.PureComponent{render(){const{editable:e,label:t,last:a,max:n,min:i,onChange:s,value:o}=this.props,l=!e||i===n,d=o.toString(),c=Object(oe.a)(i,n+1).map(e=>({label:""+u.a.ia24dc8c(e),value:""+e}));return r.createElement(re.a,{disabled:l,label:t,onChange:s,options:c,style:[de.selector,!a&&de.rightMargin],value:d})}}o()(le,"defaultProps",{last:!1});const de=y.a.create(e=>({rightMargin:{marginRight:e.spaces.medium},selector:{flexGrow:1}}));var ce=le;const he=u.a.caf8edc4,pe=u.a.g93586be,ue=u.a.d073b644,me=u.a.a2f0728e;class ge extends r.Component{constructor(e,t){super(e,t),o()(this,"_handleDaysChange",e=>{const t=parseInt(e,10);this.setState(e=>{const{hours:a,minutes:n}=e.duration,i=0===t&&0===a&&0===n?1:7===t?0:a;return{duration:{days:t,hours:i,minutes:7===t?0:0===t&&0===i&&n<5?5:n}}})}),o()(this,"_handleHoursChange",e=>{const t=parseInt(e,10);this.setState(e=>{const{days:a,minutes:n}=e.duration;return{duration:{days:a,hours:t,minutes:0===a&&0===t&&n<5?5:n}}})}),o()(this,"_handleMinutesChange",e=>{const t=parseInt(e,10);this.setState(e=>{const{days:a,hours:n}=e.duration;return{duration:{days:a,hours:n,minutes:t}}})}),this.state={duration:e.initialDuration}}render(){const{style:e,isActive:t}=this.props;return r.createElement(m.a,{style:e},r.createElement(g.c,{color:"normal",style:_e.durationLabel},t?he:""),this._renderPicker())}_renderPicker(){const{editable:e,isActive:t}=this.props,{duration:{days:a,hours:n,minutes:i}}=this.state;return r.createElement(m.a,{style:_e.durationControls},r.createElement(ce,{editable:e&&t,label:pe,max:7,min:0,onChange:this._handleDaysChange,value:a}),r.createElement(ce,{editable:e&&t,label:ue,max:7===a?0:23,min:0,onChange:this._handleHoursChange,value:n}),r.createElement(ce,{editable:e&&t,label:me,last:!0,max:7===a?0:59,min:0===a&&0===n?5:0,onChange:this._handleMinutesChange,value:i}))}get duration(){return this.state.duration}}o()(ge,"defaultProps",{editable:!0,initialDuration:{days:1,hours:0,minutes:0}});const _e=y.a.create(e=>({durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.xxSmall}}));var be=ge,ye=a("iY63"),fe=a("jtO7");const xe=u.a.g589c2e1,Ce=u.a.a1e6c3a1,ve=u.a.a739e006,we=u.a.d89a5b92,Te=u.a.c2a8118d,Se=u.a.a8ede1de;class Ee extends r.Component{constructor(e,t){super(e,t),o()(this,"_setChoice1Ref",e=>{this._choice1=e}),o()(this,"_setChoice2Ref",e=>{this._choice2=e}),o()(this,"_setChoice3Ref",e=>{this._choice3=e}),o()(this,"_setChoice4Ref",e=>{this._choice4=e}),o()(this,"_setDurationPickerRef",e=>{this._durationPicker=e}),o()(this,"_handleValidation",()=>{const{onValid:e,onInvalid:t}=this.props,a=this.choices,{_choice1:n,_choice2:i,_choice3:s,_choice4:o}=this,r=[n,i,s,o].filter(Boolean).every(e=>e.isValid);a&&a.length>=2&&r?e():t()}),o()(this,"_handleAdd",()=>{const{analytics:e}=this.props;e.scribe({element:"add_poll_option",action:"click"}),this.setState(({choiceCount:e})=>({autoFocus:!0,choiceCount:e+1}))});const{initialChoices:a}=e,n=void 0===a,i=(a||[]).length,s=i>2?i:2;this.state={autoFocus:n,choiceCount:s}}render(){const{editable:e,initialChoices:t=[],initialDuration:a,isActive:n,onRemove:i}=this.props,{autoFocus:s,choiceCount:o}=this.state;return r.createElement(m.a,{style:Re.root},r.createElement(m.a,{style:Re.choicesAndAddButton},r.createElement(m.a,{style:Re.choices},r.createElement(se,{autoFocus:s,defaultValue:t[0],editable:e&&n,label:xe,name:"Choice1",onChange:this._handleValidation,ref:this._setChoice1Ref}),r.createElement(se,{defaultValue:t[1],editable:e&&n,label:Ce,name:"Choice2",onChange:this._handleValidation,ref:this._setChoice2Ref}),o>=3?r.createElement(se,{autoFocus:s,defaultValue:t[2],editable:e&&n,label:ve,name:"Choice3",onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===o?r.createElement(se,{autoFocus:s,defaultValue:t[3],editable:e&&n,label:we,name:"Choice4",onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),r.createElement(m.a,{style:Re.rightColumn},o<4?r.createElement(b.a,{accessibilityLabel:Se,disabled:!(e&&n),icon:r.createElement(ye.a,null),onPress:this._handleAdd,size:"normal",style:Re.addButton,type:"text"}):null)),r.createElement(be,{editable:e,initialDuration:a,isActive:n,ref:this._setDurationPickerRef,style:Re.durationPicker}),r.createElement(m.a,{style:Re.removePollButton},r.createElement(fe.a,{color:"red",label:Te,onPress:i,withBottomBorder:!1})))}get choices(){const{_choice1:e,_choice2:t,_choice3:a,_choice4:n}=this;return[e&&e.value,t&&t.value,a&&a.value,n&&n.value].filter(Boolean)}get duration(){return this._durationPicker?this._durationPicker.duration:void 0}}const Re=y.a.create(e=>({root:{flexDirection:"column",backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,paddingTop:e.spaces.xSmall,overflow:"hidden"},choicesAndAddButton:{paddingLeft:e.spaces.small,paddingRight:e.spaces.small,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1,marginRight:e.spaces.xxSmall},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse",marginRight:`calc(-1 * ${e.spaces.xSmall})`,paddingBottom:e.spaces.xSmall,width:e.spaces.xLarge},addButton:{marginBottom:e.spaces.large},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:1,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:1,paddingBottom:e.spaces.xSmall,paddingLeft:e.spaces.small,paddingRight:e.spaces.small,paddingTop:e.spaces.xSmall}}));var Ie=Object(A.a)(Ee),ke=a("kIAd"),Me=a("rcen"),Be=a("zmS9"),Ae=a("WPfJ"),De=y.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.xxSmall},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},rightColumn:{paddingTop:e.spaces.xxSmall,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:Ae.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.xLarge,padding:0},tweetAttachmentArea:{zIndex:Ae.e},iconEmojiPicker:{zIndex:Ae.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.micro,zIndex:Ae.a},firstToolBarButton:{marginLeft:"-"+e.spaces.xSmall},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.xSmall},separator:{width:"1px",backgroundColor:e.colors.mediumGray,height:e.fontSizes.jumbo,marginRight:e.spaces.xSmall,marginLeft:`calc(${e.spaces.xSmall} - 2px)`},conversationLine:{alignSelf:"center",backgroundColor:e.colors.lightGray,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.xxSmall,marginBottom:e.spaces.xxSmall},conversationLineWithOverflow:{marginTop:"-"+e.spaces.xxSmall},attachmentContainer:{marginTop:e.spaces.xxSmall,marginBottom:e.spaces.xxSmall},mediaPreview:{marginTop:e.spaces.xxSmall},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.xxSmall,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},noBackground:{backgroundColor:e.colors.transparent},addImageActionIcon:{marginRight:e.spaces.micro},addImageTextPadding:{marginEnd:e.spaces.xxLarge},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.xxSmall},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{paddingVertical:e.spaces.xSmall,paddingLeft:e.spaces.xSmall,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.xxSmall}})),Oe="addButton",Pe="altTextLabel",Le="attachments",Fe="taggedUsersLabel",Ne="tweetTextarea_",He="toolBar",je="scheduleOption",Ve=a("xM7j"),ze=a("6OUF"),We=a("uCxL"),Ue=a("tZIO"),Ge=a("5mJL"),Ke=a("DNho"),qe=a("oSwX"),$e=a("rFBM"),Xe=a("zfvc"),Ye=a("yTN1"),Qe=a("gpVt"),Je=a("hOZg"),Ze=a("ll3R"),et=a("J0mu"),tt=a("boUI"),at=a("6ZHn"),nt=a("/WPq"),it=a("wpLu"),st=a("oQhu"),ot=a("YeIG"),rt=a("pKoL"),lt=a("9Xij");class dt extends r.Component{render(){const{media:e,style:t}=this.props;return r.createElement(m.a,{style:t},this._renderImageGroup(e.length))}_renderImageGroup(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}_renderGroupOf1(){const{media:e}=this.props,t=e&&!!e[0].mediaFile,{width:a,height:n}=e&&!t&&e[0].externalMediaDetails||{};return r.createElement(lt.a,{ratio:t?y.a.theme.aspectRatios.landscape:a/n},r.createElement(m.a,{style:ct.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}_renderGroupOf2(){return r.createElement(lt.a,{ratio:y.a.theme.aspectRatios.landscape},r.createElement(m.a,{style:ct.mediaPreviewWrapper},this._renderMediaAtIndex(0,ct.gutterRight),this._renderMediaAtIndex(1)))}_renderGroupOf3(){return r.createElement(lt.a,{ratio:y.a.theme.aspectRatios.landscape},r.createElement(m.a,{style:ct.mediaPreviewWrapper},this._renderMediaAtIndex(0,ct.gutterRight),this._renderColumnWithIndices([1,2])))}_renderGroupOf4(){return r.createElement(lt.a,{ratio:y.a.theme.aspectRatios.landscape},r.createElement(m.a,{style:ct.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],ct.gutterRight),this._renderColumnWithIndices([1,3])))}_renderColumnWithIndices(e,t){return r.createElement(m.a,{style:[ct.column,t]},this._renderMediaAtIndex(e[0],ct.gutterBottom),this._renderMediaAtIndex(e[1]))}_renderMediaAtIndex(e,t){const{media:a,mediaMetadata:n,editable:i,isActive:s,onClickMedia:o,onEditMedia:l,onRemoveMedia:d,onSetMediaPreviewRef:c}=this.props,h=a[e],p=h.id.toString(),u=n&&n[p]&&n[p].altText,m=n&&n[p]&&n[p].defaultAltText;return r.createElement(rt.a,{accessibilityLabel:u||m,accessibilityRole:"group",enableGif:s,key:h.id,mediaItem:h,onClick:o?o(h.id):void 0,onEdit:l?l(h.id):void 0,onRemove:d(h.id),ref:c,style:[ct.mediaContainer,t],withAltTextLabel:!!u,withCloseButton:i&&s,withEditButton:l&&i&&s})}}const ct=y.a.create(e=>({column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.xSmall},gutterBottom:{marginBottom:e.spaces.xSmall},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%"}}));var ht=a("S1qy"),pt=a.n(ht),ut=a("cjAp"),mt=a.n(ut);const gt=u.a.f0afcc0e,_t=u.a.ha5e2e79,bt=u.a.a3de3b68,yt=u.a.cc2b28fc,ft=u.a.g45af04e,xt=u.a.ee9c4013,Ct=u.a.j499fbcb,vt=u.a.b7d8e3f0,wt=u.a.d1175c78,Tt=u.a.e349147b,St=u.a.e3a24e4b,Et=u.a.de4669e2,Rt=u.a.d2c7a41c,It=u.a.f7364fa1,kt=u.a.j6304a5d,Mt=["ja","zh-cn","zh-tw","ko"],Bt=u.a.ia24dc8c,At=r.createElement(Je.a,null),Dt=r.createElement(ye.a,null),Ot=r.createElement(Ze.a,null),Pt=r.createElement(et.a,null);class Lt extends r.Component{constructor(e){super(e),o()(this,"_handleConversationControlsValueChange",e=>{this.props.updateConversationControlsValue(e)}),o()(this,"_triggerConversationControlsImpression",Object(st.a)(()=>h.b.isTrue("conversation_controls_limited_replies_creation_enabled"))),o()(this,"_renderConversationControls",e=>{const{isFocused:t}=this.state,{conversationControlsValue:a,isActive:n,isInline:i,isReply:s}=this.props;if(s||!t&&i||this._triggerConversationControlsImpression(),!this._conversationControlsCreationEnabled)return null;const o=n&&!s&&(!i||(t||e)),l=!o&&!i&&!s;return l||o?r.createElement(V,{disabled:this._isScheduled(),hidden:l,onChange:this._handleConversationControlsValueChange,value:a}):null}),o()(this,"_renderFlexibleParticipationEducation",e=>{const{isFocused:t,hasMentions:a}=this.state,{isInline:n,isReply:i,withFlexibleParticipation:s}=this.props;return s&&(a&&i&&(!n||(t||e)))&&h.b.isTrue("conversation_controls_flexible_participation_reply_enabled")?r.createElement($.a,{Icon:P.a,iconSize:"medium",size:"small",style:De.highlightedText,text:kt,textStyle:De.highlightedTextInner}):null}),o()(this,"_renderMainContent",()=>{const{additionalToolbarContent:e,autoFocus:t,data:a,editable:n,index:i,isActive:s,isExpanded:o,isInline:l,isInlineReply:d,isLast:c,keyCommandHandlers:h,onFilesAdded:p,onTextInputBlur:u,onTypeaheadStateChange:g,positionCursorAtBeginning:_,richTextInputContext:b}=this.props,{cardUrl:y,media:f,pollActive:x,quotedStatus:C,text:v}=a,w=Object(Qe.b)(v)||y&&!Object(Y.a)(y)&&[y],T=!!f.length||x||!!C,S=0===i&&c,E=this.props.typeaheadWrapper,R=!!b,{element:I,sendTweetCommandName:k,dismissComposerCommandName:M}=b||{},B=b?{dismissComposerCommandName:M,editorState:this.state.editorState,element:I,sendTweetCommandName:k}:void 0,A=d&&!b&&!o;return r.createElement(m.a,{style:De.textInputArea},r.createElement(m.a,{style:o?De.inputStyle:De.collapsedInputStyle},r.createElement(E,{contextText:v,isInline:l,onTextUpdated:this._handleTextChange,onTypeaheadStateChange:g},e=>r.createElement(ze.a,{appTextSize:"large",ariaLabel:bt,autoFocus:t||s&&!l,closeButton:s&&this._isEmpty()&&!S?this._renderCloseButton():void 0,contentBelow:this._renderTweetAttachment(),editable:n,inputStyle:[De.textInputStyle,A&&De.textInputMobileCollapsed],keyCommandHandlers:h,maxNumberOfLines:R?30:10,multiline:!0,numberOfLines:this._calcNumberOfLines(),onBlur:u,onChange:this._getHandleChange(e),onFilesAdded:p,placeholder:this._getPlaceHolderText(),positionCursorAtBeginning:_,positionCursorAtEnd:!_,ref:this._setTextInputRef,richTextInputContext:B,style:De.noBackground,styleType:"selection",testID:`${Ne}${i}`,value:v})),w&&!T?r.createElement(Qe.a,{index:i,isCardPreviewTombstoned:Object(Y.a)(y),urls:w}):null),o?null:e)}),o()(this,"_calcNumberOfLines",()=>{const{richTextInputContext:e,isInline:t,data:a}=this.props,n=!!e,{media:i,pollActive:s,quotedStatus:o}=a;return n?t||i.length||s||o?1:6:4}),o()(this,"_renderScheduledTweetLegend",()=>{const{scheduledFor:e}=this.props;return r.createElement(Be.a,{onPress:this._handlePressScheduledTweetLegend,scheduledFor:e})}),o()(this,"_handlePressScheduledTweetLegend",()=>{const{history:e,analytics:t,setActiveParentKey:a}=this.props;e.push("/compose/tweet/schedule"),t.scribe({element:"tweet_legend",action:"click"}),a()}),o()(this,"_renderEmojiPicker",()=>r.createElement(W.a,{onEmojiSelect:this._handleInsertEmoji,size:"normal",style:this._getEmojiPickerButtonStyles(),textInputRef:this._textInputRef||void 0})),o()(this,"_getEmojiPickerButtonStyles",Object(st.a)(()=>[De.iconEmojiPicker,De.toolBarButton])),o()(this,"_isSchedulingDisabled",()=>{const{conversationControlsValue:e,index:t,isLast:a,data:{pollActive:n,quotedStatus:i,text:s,media:o,mediaTags:r}}=this.props,l=0===t&&a,d=e!==c.all;return Boolean(n||!l||i&&""===s&&!o.length||d||r.length>0)}),o()(this,"_renderSchedulingButton",()=>r.createElement(b.a,{accessibilityLabel:_t,disabled:this._isSchedulingDisabled(),icon:Pt,onClick:this._handleClickScheduler,size:"normal",style:De.toolBarButton,testID:je,type:"text"})),o()(this,"_handleClickScheduler",()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"schedule_tweet",action:"click"}),a()}),o()(this,"_renderCloseButton",()=>{const{onRemoveComposer:e}=this.props;return r.createElement(b.a,{accessibilityLabel:xt,icon:At,onPress:e,size:"small",type:"text"})}),o()(this,"_renderTweetAttachment",()=>{const{data:e,editable:t,isActive:a}=this.props,{media:n,mediaMetadata:i,pollActive:s,initialPollChoices:o,initialPollDuration:l,quotedStatus:d}=e;return 0!==n.length||s||d?r.createElement(m.a,{onClick:this._handleFocus,style:[De.attachmentContainer,De.tweetAttachmentArea],testID:Le},n.length>0?r.createElement(dt,{editable:t,isActive:a,media:n,mediaMetadata:i,onClickMedia:this.hasAttachedImage?this._handleClickMediaDetail:void 0,onEditMedia:this.hasAttachedImage?this._handleClickMediaDetail:void 0,onRemoveMedia:this._handleMediaRemoveFactory,onSetMediaPreviewRef:this._handleSetMediaPreviewRef,style:De.mediaPreview}):null,a?this._renderMediaActions():null,s?r.createElement(Ie,{editable:t,initialChoices:o,initialDuration:l,isActive:a,onInvalid:this._handlePollInvalid,onRemove:this._handlePollRemove,onValid:this._handlePollValid,ref:this._setPollCreatorRef}):null,d?this._renderQuoteTweet(d):null):null}),o()(this,"_renderQuoteTweet",e=>{const{data:{media:t}}=this.props,a=e.tombstoneInfo;return a&&a.richText?r.createElement(Ve.a,null,r.createElement(Me.c,{entities:a.richText.entities,rtl:a.richText.rtl,text:a.richText.text})):r.createElement(We.a,{isCondensed:t.length>0,style:De.quoteTweet,tweet:e,withLink:!1,withUserHoverCard:!1})}),o()(this,"_renderToolbar",e=>{const{additionalToolbarContent:t,hidePollAndScheduling:a,isReply:n,richTextInputContext:i,isSelfThreadReply:s,isInlineReply:o}=this.props,l=!!i,d=!o&&!a;return r.createElement(m.a,{style:De.toolBar,testID:He},r.createElement(m.a,{style:De.toolBarIconsContainer},this._renderMediaPickerButton(),this._renderGifButton(),d?this._renderPollButton():null,l?this._renderEmojiPicker():null,d?this._renderSchedulingButton():null),r.createElement(m.a,{style:De.toolBarIconsContainer},e?this._renderCountdownCircle():null,n&&!s||!e?null:r.createElement(r.Fragment,null,r.createElement(m.a,{style:De.separator}),this._renderAddComposerButton()),t))}),o()(this,"_addOverflowStyle",e=>{const{richTextInputContext:t}=this.props;if(!t)return;const a=e.getCurrentContent().getPlainText(),n=a.length,i=this._getParsedTweet(a).validRangeEnd,s=i+1<n;if(this.state.hasOverflowStyle||s){const a=s?i+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,a,this.state.hasOverflowStyle),hasOverflowStyle:s}}return{editorState:e,hasOverflowStyle:s}}),o()(this,"_getHandleChange",Object(st.a)(e=>t=>{e(t),this._handleTextChange(t)})),o()(this,"_handleTextChange",e=>{const{data:{key:t,text:a},onTextChange:n,richTextInputContext:i}=this.props;let s;if(i){s=e.getCurrentContent().getPlainText();const t=i.convertEmojiToEntities(e);this.setState(this._addOverflowStyle(t))}else s=Ue.a.replaceCarriageReturns(e.target.value);const o=this._hasMentions(s);this.setState({hasMentions:o}),a!==s&&n(s,t)}),o()(this,"_handleClickAltTextShortcut",()=>{const{analytics:e}=this.props;e.scribe({element:"alt_text_button",action:"click"})}),o()(this,"_handleClickMediaDetail",e=>()=>{const{analytics:t,history:a}=this.props;t.scribe({element:"media_detail_button",action:"click"}),this.hasAttachedImage&&a.push("/compose/tweet/media",{mediaId:e,tab:"crop"})}),o()(this,"_handleDragDrop",e=>{const{addToast:t,data:{pollActive:a},onFilesAdded:n}=this.props;a?t({text:yt}):n(e)}),o()(this,"_handleMediaRemoveFactory",e=>()=>{this.props.onRemoveMedia(this.props.index,e)}),o()(this,"_handleInsertEmoji",e=>{const{editorState:t}=this.state,{richTextInputContext:a}=this.props;if(!a)return;const n=a.insertTextAtCursor(t,e.text);this._handleTextChange(n)}),o()(this,"_validateMedia",e=>{const{data:{media:t}}=this.props;return d.c(t.concat(e))}),o()(this,"_handlePollAdd",()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"add_poll",action:"click"}),a({pollActive:!0},t)}),o()(this,"_handlePollRemove",()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"remove_poll",action:"click"}),a({pollActive:!1},t)}),o()(this,"_handlePollInvalid",()=>{const{data:{pollValid:e},index:t,updateSingleComposer:a}=this.props;e&&a({pollValid:!1},t)}),o()(this,"_handlePollValid",()=>{const{data:{pollValid:e},index:t,updateSingleComposer:a}=this.props;!e&&a({pollValid:!0},t)}),o()(this,"_handleFocus",()=>{const{isActive:e,index:t,onFocus:a,setActiveParentKey:n}=this.props;n(),e||(window.requestAnimationFrame(()=>{this._mediaPreviewRef&&this._mediaPreviewRef._playVideo()}),a(t))}),o()(this,"_handleEditorFocus",()=>this.setState({isFocused:!0})),o()(this,"_formatCountdownNumber",e=>Bt(Math.ceil(e/this._userLanguageWeight))),o()(this,"_getPlaceHolderText",()=>{const{data:{quotedStatus:e,pollActive:t},isReply:a,isSelfThreadReply:n,index:i}=this.props;return e?Et:t?It:a&&!n?Rt:n||i>0?St:Tt}),o()(this,"_getNumberOfAltTextEntries",()=>{const{data:{mediaMetadata:e,media:t}}=this.props;return t.reduce((t,a)=>{var n;return e&&!Object(ot.a)(null==(n=e[a.id.toString()])?void 0:n.altText)?t+1:t},0)}),o()(this,"_getParsedTweet",Object(st.a)(e=>{const t=mt.a[this.props.twitterTextConfigurationVersion];return pt()(e,t)})),o()(this,"_isEmpty",()=>{const{data:e}=this.props;return Object(Q.b)(e)}),o()(this,"_isScheduled",()=>{const{data:{scheduledFor:e}}=this.props;return Object(J.h)(e)}),o()(this,"_hasMentions",e=>!!e.split(ke.b.WordBoundary).find(e=>{const t=Object(U.d)(e,"compose");return t&&"users"===t.result_type})),o()(this,"_setPollCreatorRef",e=>{this._pollCreatorRef=e}),o()(this,"_handleSetMediaPreviewRef",e=>{this._mediaPreviewRef=e}),o()(this,"_setTextInputRef",e=>{this._textInputRef=e});const{richTextInputContext:t,userLanguage:a,data:{text:n}}=e,{initEditorState:i}=t||{};this._conversationControlsCreationEnabled=!0===h.b.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._userLanguageWeight=a&&Mt.indexOf(a)>-1?2:1,this.state={editorState:i&&i(n),hasOverflowStyle:!1,isFocused:!1,hasMentions:this._hasMentions(n)}}componentDidUpdate(e){(this.hasExternalMedia||this.props.data.media.some(e=>e.mediaFile&&!(e.mediaFile instanceof X.a)&&e.mediaFile.isVideo))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef._pauseVideo()}focus(){this._textInputRef&&this._textInputRef.focus()}render(){const{isActive:e,isExpanded:t,isInline:a,isLast:n,loggedInUser:i,withAvatar:s}=this.props,o=!this._isEmpty();return r.createElement(m.a,{onFocus:this._handleFocus,style:[De.root,!e&&De.blurStyle]},r.createElement(Ge.a,{avatarCell:r.createElement(r.Fragment,null,s?r.createElement(Ke.a.Consumer,null,({avatarSize:e})=>r.createElement(qe.default,{accessibilityLabel:i?i.name:void 0,screenName:i?i.screen_name:void 0,size:e,style:De.avatar,uri:i?i.profile_image_url_https:void 0,withLink:a})):null,n?null:r.createElement(m.a,{style:[De.conversationLine,!s&&De.conversationLineWithOverflow]})),avatarCellStyle:t?De.avatarContainerExpanded:De.avatarContainer,cellStyle:De.rightColumn},this._renderScheduledTweetLegend(),r.createElement(m.a,{onFocus:this._handleEditorFocus,style:De.inputArea},r.createElement($e.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleDragDrop,style:De.dragDrop},e=>r.createElement(r.Fragment,null,r.createElement(m.a,{style:[De.composeBoxContainer]},this._renderMainContent())))),this._renderConversationControls(o),this._renderFlexibleParticipationEducation(o),r.createElement(Xe.b,{show:e&&t},this._renderToolbar(o))))}_renderMediaPickerButton(){const{data:{media:e},onFilesAdded:t,setActiveParentKey:a}=this.props,n=this.mediaAttachDisabled,i=e.length<3;return r.createElement(Z.a,{acceptGifs:0===e.length,disabled:n,multiple:i,onChange:t,onPress:a,style:[De.toolBarButton,De.firstToolBarButton],type:"text"})}_renderGifButton(){const{data:{media:e,pollActive:t},history:a,loggedInUser:n,setActiveParentKey:i}=this.props,s=t||e.length||!n;return r.createElement(K.a,{enabled:!s,gifSearchKeySource:q.a.Composition,history:a,onPress:i})}_renderPollButton(){const{data:{media:e,pollActive:t,quotedStatus:a},loggedInUser:n}=this.props,i=this._isScheduled(),s=!(!(t||e.length||a||i)&&n);return r.createElement(b.a,{accessibilityLabel:gt,disabled:s,icon:Ot,onPress:this._handlePollAdd,size:"normal",style:De.toolBarButton,type:"text"})}_renderMediaActions(){const{data:{gifMetadata:e,media:t,mediaTags:a}}=this.props,n=0!==a.length,i=t.some(e=>e.mediaFile&&e.mediaFile.isGif)||this.hasExternalMedia;return this.hasAttachedImage||e||i?r.createElement(m.a,{style:De.imageActions},e&&e.url&&e.provider?r.createElement(m.a,{style:De.addImageTextPadding},r.createElement(G.a,{gifUrl:e.url,provider:e.provider})):null,this.hasAttachedImage&&!this._isScheduled()?r.createElement(g.c,{accessibilityLabel:wt,color:"deepGray",link:"/compose/tweet/tags",style:[De.addImageTextContainer,De.addImageTextPadding]},n?this._renderTaggedUsers():this._renderTagPeopleLabel()):null,this.hasAttachedImage||i?r.createElement(g.c,{accessibilityLabel:Ct({numberOfImages:t.length}),color:"deepGray",link:{pathname:"/compose/tweet/media",state:{mediaId:t[0].id,tab:"alt_text"}},onPress:this._handleClickAltTextShortcut,style:De.addImageTextContainer},this._renderAltTextLabel()):null):null}_renderTagPeopleLabel(){return r.createElement(g.c,{color:"deepGray",size:"small"},r.createElement(tt.a,{style:De.addImageActionIcon}),wt)}_renderTaggedUsers(){const{data:{mediaTags:e}}=this.props,t=e.map(e=>({name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str}));return r.createElement(g.c,{color:"deepGray",size:"small",testID:Fe},r.createElement(at.a,{style:De.addImageActionIcon}),r.createElement(ee.a,{users:t}))}_renderAltTextLabel(){const{data:{media:e,mediaMetadata:t}}=this.props;return this.hasAttachedAltText?e.length>1?r.createElement(g.c,{color:"deepGray",size:"small",testID:Pe},r.createElement(it.a,{style:De.addImageActionIcon}),vt({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):r.createElement(g.c,{color:"deepGray",numberOfLines:1,size:"small",testID:Pe},r.createElement(it.a,{style:De.addImageActionIcon}),t&&t[e[0].id.toString()]&&t[e[0].id.toString()].altText):r.createElement(g.c,{color:"deepGray",size:"small",testID:Pe},r.createElement(nt.a,{style:De.addImageActionIcon}),Ct({numberOfImages:e.length}))}_renderCountdownCircle(){const{data:{text:e},twitterTextConfigurationVersion:t}=this.props,a=mt.a[t],n=this._getParsedTweet(e).weightedLength;return r.createElement(Ye.a,{count:n,formatNumber:this._formatCountdownNumber,maxCount:a.maxWeightedTweetLength,warningCount:260})}_renderAddComposerButton(){const{disableAddTweet:e,loggedInUser:t,isInline:a,onAddComposer:n}=this.props,i=this._isEmpty(),s=this._isScheduled(),o=e||i||s||!t;return r.createElement(b.a,{accessibilityLabel:ft,disabled:o,icon:Dt,link:!a||i||o?void 0:"/compose/tweet",onPress:n,size:"small",testID:Oe,type:"secondary"})}get pollChoices(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.choices:void 0}get pollDuration(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.duration:void 0}get mediaAttachDisabled(){const{data:{media:e,pollActive:t},loggedInUser:a}=this.props,n=e.length,i=e.some(e=>{var t;return null==(t=e.mediaFile)?void 0:t.isGif}),s=e.some(e=>e.mediaFile&&!(e.mediaFile instanceof X.a)&&e.mediaFile.isVideo);return 4===n||i||s||t||this.hasExternalMedia||!a}get hasAttachedImage(){const{data:{media:e}}=this.props;return e.some(e=>{var t;return null==(t=e.mediaFile)?void 0:t.isImage})}get hasAttachedAltText(){return this._getNumberOfAltTextEntries()>0}get hasExternalMedia(){const{data:{media:e}}=this.props;return e.some(e=>!!e.externalMediaDetails)}}o()(Lt,"defaultProps",{twitterTextConfigurationVersion:"defaults",withAvatar:!0,conversationControlsValue:"all",updateConversationControlsValue:()=>{}});var Ft=Object(A.a)(Lt),Nt=a("SrIh"),Ht=a("BLtI"),jt=(a("AxOO"),a("kY28")),Vt=a("mN6z"),zt=a("fs1G");const Wt=({children:e})=>r.createElement(g.c,{color:"link"},e),Ut=e=>"@"+e;class Gt extends r.Component{constructor(...e){super(...e),o()(this,"_handleTweetAction",e=>{e&&e.preventDefault&&e.preventDefault()})}shouldComponentUpdate(e){return!Object(Vt.a)(this.props,e)}UNSAFE_componentWillMount(){const{excludedRecipients:e,inReplyToStatus:t,loggedInUserId:a}=this.props;this._calculatedRecipients=d.a({inReplyToStatus:t,loggedInUserId:a}).filter(({id_str:t})=>e.indexOf(t)<0)}render(){const{dataSaverMode:e,shouldDisplayRepliesText:t,showParentTweet:a,onPress:n}=this.props;return r.createElement(m.a,null,a?r.createElement(Ht.b,{conversationPosition:{isStart:!0},dataSaverMode:e,linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:zt.a,onAvatarClick:this._handleTweetAction,onEntityClick:this._handleTweetAction,onMediaClick:this._handleTweetAction,onReplyContextClick:this._handleTweetAction,replyContext:jt.a.ReplyContextTypes.None,tweet:this.props.inReplyToStatus,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,r.createElement(m.a,{style:Kt.replyUsersContainer},r.createElement(Ge.a,{avatarCell:a?r.createElement(m.a,{style:Kt.conversationLine}):null,avatarCellStyle:Kt.conversationLineContainer,cellStyle:Kt.repliesTextContainer,style:Kt.grid},t?r.createElement(g.c,{accessibilityRole:"button",color:"deepGray",onPress:n,style:a&&Kt.repliesMessage},this._renderContextMessage()):null)))}_renderContextMessage(){const{inReplyToStatus:e}=this.props,{user:t}=e.retweeted_status||e;switch(this._calculatedRecipients.length){case 0:return Object(Nt.a)("Compose reply context should not have 0 recipients"),null;case 1:return r.createElement(u.a.I18NFormatMessage,{$i18n:"e34022a7"},r.createElement(Wt,null,u.a.b50e199a({userName:Ut(t.screen_name)})));case 2:{const e=this._calculatedRecipients.find(({id_str:e})=>e!==t.id_str)||{};return r.createElement(u.a.I18NFormatMessage,{$i18n:"bfd9c99a"},r.createElement(Wt,null,u.a.f2e4dd37({replyUserName:Ut(t.screen_name),otherUserName:Ut(e.screen_name)})))}case 3:{const[e,a]=this._calculatedRecipients.filter(({id_str:e})=>e!==t.id_str);return r.createElement(u.a.I18NFormatMessage,{$i18n:"g7a1000e"},r.createElement(Wt,null,u.a.eccfddc3({userOneName:Ut(t.screen_name),userTwoName:Ut(e.screen_name),userThreeName:Ut(a.screen_name)})))}default:{const e=this._calculatedRecipients.find(({id_str:e})=>e!==t.id_str)||{};return r.createElement(u.a.I18NFormatMessage,{$i18n:"i558c201"},r.createElement(Wt,null,u.a.h758cd22({userOneName:Ut(t.screen_name),userTwoName:Ut(e.screen_name),othersCount:this._calculatedRecipients.length-2})))}}}}o()(Gt,"defaultProps",{showParentTweet:!0});const Kt=y.a.create(e=>({replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.xSmall,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.small,paddingTop:e.spaces.xxSmall},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.lightGray,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.xxSmall}}));var qt=Gt,$t=a("LdEA"),Xt=a.n($t),Yt=a("Tb0w"),Qt=a("ge3j"),Jt=a("1YZw"),Zt=a("pidX"),ea=a("0KEI"),ta=a("zhf3"),aa=a("RqPI"),na=a("XOJV"),ia=a("G6rE"),sa=a("AspN"),oa=a("oEGd"),ra=a("hqKg"),la=a("P1r1");const da=e=>e.parentTweetId||(e.isInline?ta.a.homeTimeline:ta.a.modal),ca=e=>(t,a)=>{const n=((e,t)=>t.location.state)(0,a);return n?e(n):void 0},ha=Object(ra.createSelector)((e,t)=>t.activeUser,ia.e.selectLoggedInUser,(e,t)=>e||t),pa=(e,t)=>t.parentTweetId||ua(e,t)||ma(e,t),ua=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},ma=ca(e=>e.inReplyToStatusId),ga=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,_a=ca(e=>e.convoCardData),ba=ca(e=>e.externalMedia),ya=ca(e=>e.externalMediaFiles),fa=ca(e=>e.defaultText),xa=(e,t)=>{const a=fa(e,t),n=Object(Zt.a)(t.location);return(ga(0,t)||((e,t)=>t.location.pathname.indexOf("/compose/tweet")>-1)(0,t))&&n?n:a},Ca=ca(e=>e.quotedStatusId),va=ca(e=>e.quotedStatus),wa=ca(e=>e.isSelfThreadReply),Ta=ca(e=>e.positionCursorAtBeginning),Sa=ca(e=>e.promotedContent),Ea=Object(ra.createSelector)((e,t)=>{const a=da(t);return Qt.l(e,a)},xa,(e,t)=>((e,t)=>t.quotedStatus?t.quotedStatus:va(e,t))(e,t)||((e,t)=>{const a=Ca(e,t);return a?na.a.selectHydratedMemoized(e,a):void 0})(e,t),sa.f,(e,t,a,n)=>e.map((e,i)=>{return Object.assign({},(s=e,Xt()(s,["mediaIds"])),{media:n.filter(t=>e.mediaIds.some(e=>e===t.id)),quotedStatus:0===i?a:void 0,text:0===i&&t?t:e.text});var s})),Ra=Object(ra.createStructuredSelector)({activeComposerIndex:(e,t)=>{const a=da(t);return Qt.k(e,a)},activeUser:ha,composerData:Ea,conversationControlsValue:(e,t)=>{const a=da(t);return Qt.m(e,a)},conversationTreeEnabled:la.h,dataSaverMode:la.j,excludedRecipients:(e,t)=>{const a=da(t);return Qt.n(e,a)},externalMedia:ba,externalMediaFiles:ya,inReplyToStatus:(e,t)=>{const a=pa(e,t);return a?na.a.selectHydrated(e,a):void 0},inReplyToStatusId:pa,isIntentRoute:ga,isSelfThreadReply:wa,isSending:(e,t)=>{const a=da(t);return Qt.o(e,a)},positionCursorAtBeginning:Ta,loggedInUser:ia.e.selectLoggedInUser,prepopulatedText:xa,promotedContent:Sa,scheduledFor:Qt.p,sendingProgress:Qt.q,convoCardData:_a,userLanguage:aa.f,quotedStatusId:Ca}),Ia={addComposer:Qt.a,addToast:Jt.b,createLocalApiErrorHandler:Object(ea.d)("SCREEN_COMPOSE_V2"),createNudge:Qt.d,fetchTweetIfNeeded:na.a.fetchOneIfNeeded,removeComposer:Qt.h,resetDraft:Qt.i,retweet:na.a.retweet,recordNudgeAction:Qt.f,recordNudgeResult:Qt.g,schedule:Qt.j,draftTweet:Qt.e,send:Qt.r,updateActiveComposerIndex:Qt.t,updateConvoCardState:Yt.c,updateConversationControlsValue:Qt.u,uploadMedia:sa.k,addMedia:sa.b,processMultipleMedia:sa.d,removeMediaUpload:sa.e,updateSingleComposer:Qt.w,setActiveParentKey:Qt.s,copyDataFromInlineComposerToModalComposer:Qt.b,copyDataFromInlineReplyComposerToModalComposer:Qt.c};var ka=Object(oa.g)(Ra,Ia),Ma=a("45mF"),Ba=a("c0ZR"),Aa=a("W5XZ"),Da=a("MXY2"),Oa=a("I8M8"),Pa=a("eyty"),La=a("gUG0"),Fa=a("ymux"),Na=a("rxPX"),Ha=a("0pUJ"),ja=a("HAhZ");var Va=Object(Na.a)().propsFromState(()=>({tips:ja.c})).propsFromActions(({conversationModule:e={}})=>({addTip:ja.a,addToast:Jt.b,block:ia.e.block,createLocalApiErrorHandler:Object(ea.d)("NUDGE"),hideReply:na.a.hideReply,mute:Ha.a,recordNudgeAction:Qt.f,recordNudgeResult:Qt.g,unblock:ia.e.unblock,unmute:ia.e.unmute,updateDismissCauseConversationTrees:Fa.e,updateDismissCause:e&&e.updateDismissCause})),za=a("VjLy"),Wa=a("95Se"),Ua=a("xKuM");const Ga=u.a.cd33a61c,Ka=u.a.g97558f6,qa=u.a.cd80d930,$a=u.a.b0476eb2,Xa=u.a.j24c37b2;class Ya extends r.Component{constructor(...e){super(...e),o()(this,"_handleHideMoreInfo",()=>{const{hideEducation:e}=this.props;e()})}render(){const{isSmallBreakPoint:e}=this.props;return r.createElement(Xe.b,{animateMount:!0,duration:"longer",show:!0,type:"fade"},r.createElement(m.a,{style:Qa.moreInfoContainer},r.createElement(Ua.a,{leftControl:r.createElement(b.a,{icon:r.createElement(Wa.a,{onClick:this._handleHideMoreInfo}),pullLeft:!0,type:"text"}),style:Qa.moreInfoAppBar,title:"More Info"}),r.createElement(m.a,{style:Qa.moreInfoContentContainer},r.createElement(g.c,{color:"normal",size:"large",style:Qa.headlineText,weight:"bold"},Ga),r.createElement(g.c,{color:"deepGray",style:Qa.moreInfoFirstDescription},qa),r.createElement(g.c,{color:"normal",size:"large",style:Qa.headlineText,weight:"bold"},Ka),r.createElement(g.c,{color:"deepGray",style:Qa.moreInfoSecondDescription},$a),e&&r.createElement(b.a,{onClick:this._handleHideMoreInfo,style:Qa.confirmationButton,type:"neutral"},Xa))))}}const Qa=y.a.create(e=>({headlineText:{marginBottom:e.spaces.xSmall},confirmationButton:{marginVertical:e.spaces.medium},moreInfoAppBar:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},moreInfoContainer:{borderRadius:e.borderRadii.xLarge},moreInfoContentContainer:{padding:e.spaces.medium,paddingBottom:0},moreInfoFirstDescription:{marginBottom:e.spaces.small},moreInfoSecondDescription:{marginBottom:e.spaces.small}}));var Ja=a("euJ+"),Za=a("1bnC"),en=a("Qwev"),tn=a("yrzJ"),an=a("eb3s"),nn=a("sgih"),sn=a("P2xQ");const on=Object.freeze({ReviseOrMute:"ReviseOrMute",ReviseOrBlock:"ReviseOrBlock",ReviseOrHideThenBlock:"ReviseOrHideThenBlock"}),rn=Object.freeze({BlockUser:"BlockUser",CancelOnBlockUserPrompt:"CancelOnBlockUserPrompt",CancelTweet:"CancelTweet",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",NudgeNotShown:"NudgeNotShown",ReviseTweet:"ReviseTweet",SendTweet:"SendTweet"}),ln=Object.freeze({BlockUser:"BlockUser",CancelComposer:"CancelComposer",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",SaveTweetToDrafts:"SaveTweetToDrafts",SentTweet:"SentTweet",TweetSentWithoutShowingNudge:"TweetSentWithoutShowingNudge"}),dn=u.a.ic011119,cn=u.a.f6b7745a,hn=u.a.a75cc0f8,pn=u.a.a6450e83,un=u.a.a9fd20be,mn=u.a.i2b9632d,gn=u.a.e133be4e,_n=u.a.ge5067bb,bn=u.a.ea626ab3,yn=u.a.i62a03aa,fn=u.a.h3032750,xn=u.a.af250eb6,Cn=u.a.ib147a39,vn=u.a.e8ff17e5,wn=u.a.e3275464;class Tn extends r.Component{constructor(...e){super(...e),o()(this,"_isNudgeEducationEnabled",h.b.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),o()(this,"state",{loadingSecondaryButton:!1,showMoreInfo:!1}),o()(this,"_renderInnerBody",()=>{const{loadingSecondaryButton:e}=this.state;return r.createElement(r.Fragment,null,r.createElement(g.c,{align:"center",color:"normal",size:"large",style:Sn.headlineText,weight:"bold"},this._getHeadline()),r.createElement(g.c,{align:"center",color:"deepGray"},this._getDescription()),r.createElement(g.c,{align:"center",color:"link",onClick:this._handleMoreInfo,style:Sn.moreInfoButton},fn),r.createElement(m.a,{style:Sn.buttons},r.createElement(b.a,{onPress:this._handleRevise,style:Sn.button,type:"secondary"},vn),r.createElement(b.a,{onPress:this._handleSecondaryAction,style:Sn.button,type:"secondary"},e?this._renderSpinner():this._getSecondaryActionLabel()),r.createElement(b.a,{onPress:this._handleSend,style:Sn.button,type:"secondary"},wn)))}),o()(this,"_renderSpinner",()=>{const{nudgeType:e}=this.props,t=e===on.ReviseOrMute?sn.g:e===on.ReviseOrBlock?xn:Cn;return r.createElement(en.a,{accessibilityLabel:t,style:Sn.spinner})}),o()(this,"_renderBlockSheet",()=>{const{recipient:{screen_name:e}}=this.props,t=r.createElement(tn.a,{color:"normal",screenName:e}),a=r.createElement(tn.a,{screenName:e});return r.createElement(an.a,{cancelButtonLabel:yn,confirmButtonLabel:pn,confirmButtonType:"destructive",headline:r.createElement(u.a.I18NFormatMessage,{$i18n:"ja6527ba"},t),onCancel:this._handleBlockCancel,onConfirm:this._handleBlockUser,text:r.createElement(u.a.I18NFormatMessage,{$i18n:"a899eb22"},a)})}),o()(this,"_getDescription",()=>{const{nudgeType:e,recipient:t}=this.props,a=r.createElement(tn.a,{screenName:t.screen_name});switch(e){case on.ReviseOrMute:return r.createElement(u.a.I18NFormatMessage,{$i18n:"d98723c4"},a);case on.ReviseOrBlock:return r.createElement(u.a.I18NFormatMessage,{$i18n:"fa1a3797"},a);case on.ReviseOrHideThenBlock:return r.createElement(u.a.I18NFormatMessage,{$i18n:"fa2ffaa7"},a);default:return null}}),o()(this,"_getHeadline",()=>{const{nudgeType:e}=this.props;switch(e){case on.ReviseOrMute:return dn;case on.ReviseOrBlock:return cn;case on.ReviseOrHideThenBlock:return hn;default:return null}}),o()(this,"_getSecondaryActionLabel",()=>{const{nudgeType:e}=this.props;switch(e){case on.ReviseOrMute:return sn.f;case on.ReviseOrBlock:return pn;case on.ReviseOrHideThenBlock:return _n;default:return null}}),o()(this,"_handleSecondaryAction",()=>{const{nudgeType:e}=this.props;switch(this.setState({loadingSecondaryButton:!0}),e){case on.ReviseOrMute:this._handleMuteUser();break;case on.ReviseOrBlock:this._handleBlockUser();break;case on.ReviseOrHideThenBlock:this._handleHideReplyThenBlock();break;default:return}}),o()(this,"_handleSend",()=>{const{onSend:e}=this.props;this._recordNudgeAction(rn.SendTweet),e()}),o()(this,"_handleBlockCancel",()=>{const{onDiscard:e,showBlockModal:t}=this.props;t&&(this._recordNudgeAction(rn.CancelOnBlockUserPrompt),this._handleHideReply()),e()}),o()(this,"_handleBlockUser",()=>{const{addToast:e,block:t,onDiscard:a,recipient:n,showBlockModal:i,unblock:s}=this.props;this._recordNudgeAction(rn.BlockUser),t(n.id_str).then(()=>{i&&this._handleHideReply(),this._recordNudgeResult(ln.BlockUser),a(),e({actionLabel:gn,text:un,onAction:()=>{s(n.id_str).then(()=>{e({text:mn})}).catch(this._createApiErrorHandler())}})}).catch(this._createApiErrorHandler())}),o()(this,"_handleMuteUser",()=>{const{addToast:e,mute:t,onDiscard:a,recipient:n,unmute:i}=this.props;this._recordNudgeAction(rn.MuteUser),t(n.id_str).then(()=>{this._recordNudgeResult(ln.MuteUser),a(),e({actionLabel:Za.a,text:Object(sn.b)(n.screen_name),onAction:()=>{i(n.id_str).then(()=>{e({text:Object(sn.d)(n.screen_name)})}).catch(this._createApiErrorHandler())}})}).catch(this._createApiErrorHandler())}),o()(this,"_handleHideReplyThenBlock",()=>{const{addTip:e,tips:t,hidePopover:a,setShowBlockModal:n,setShowHideReplyEducation:i,showHideReplyEducation:s}=this.props;if(a(),s)i(!1);else if(!t.hide_reply_author_education)return e({hide_reply_author_education:!0}),void i(!0);n(!0)}),o()(this,"_handleHideReply",()=>{const{addToast:e,conversationId:t,conversationTreeEnabled:a,hideReply:n,inReplyToStatusId:i,updateDismissCause:s,updateDismissCauseConversationTrees:o}=this.props;this._recordNudgeAction(rn.HideReply),n(i,{conversation_id:t}).then(()=>{this._recordNudgeResult(ln.HideReply),a?o({entryId:"module-tweet-"+i,feedbackKeys:[Ja.d]}):s&&s({entryId:"tweet-"+i,feedbackKeys:[Ja.d]}),e({text:bn})}).catch(this._createApiErrorHandler())}),o()(this,"_handleRevise",()=>{const{onRevise:e}=this.props;this._recordNudgeAction(rn.ReviseTweet),e()}),o()(this,"_handleCancelHideReplyEducation",()=>{const{setShowHideReplyEducation:e}=this.props;e(!1),this._handleRevise()}),o()(this,"_handleBeforeWindowUnload",()=>{this._recordNudgeAction(rn.CloseApp),this._recordNudgeResult(ln.CloseApp)}),o()(this,"_handleMoreInfo",()=>{this.setState({showMoreInfo:!0})}),o()(this,"_hideMoreInfo",()=>{this.setState({showMoreInfo:!1})}),o()(this,"_recordNudgeAction",e=>{const{nudgeId:t,recordNudgeAction:a}=this.props;a({nudgeId:t,nudgeActionType:e})}),o()(this,"_recordNudgeResult",e=>{const{nudgeId:t,recordNudgeResult:a}=this.props;a({nudgeId:t,nudgeResultType:e})}),o()(this,"_createApiErrorHandler",()=>this.props.createLocalApiErrorHandler({showToast:!0}))}componentDidMount(){window.addEventListener("beforeunload",this._handleBeforeWindowUnload)}componentWillUnmount(){window.removeEventListener("beforeunload",this._handleBeforeWindowUnload)}render(){const{screenWidth:e,showBlockModal:t,showHideReplyEducation:a}=this.props,{showMoreInfo:n}=this.state;if(t)return this._renderBlockSheet();if(a)return r.createElement(za.a,{onCancel:this._handleCancelHideReplyEducation,onConfirm:this._handleHideReplyThenBlock});const i=e<y.a.theme.breakpoints.small;return this._isNudgeEducationEnabled?i?r.createElement(nn.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:[Sn.container,Sn.smallBreakPointContainer,n&&Sn.noPadding],type:"bottom",withMask:!0},n?r.createElement(Ya,{hideEducation:this._hideMoreInfo,isSmallBreakPoint:!0}):this._renderInnerBody()):r.createElement(r.Fragment,null,n&&r.createElement(Ya,{hideEducation:this._hideMoreInfo}),r.createElement(m.a,{style:Sn.container},!n&&this._renderInnerBody())):r.createElement(nn.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:Sn.container,type:"center",withMask:!0},this._renderInnerBody())}}const Sn=y.a.create(e=>({container:{alignItems:"center",backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.xLarge,padding:e.spaces.medium,paddingBottom:e.spaces.xSmall},smallBreakPointContainer:{borderRadius:e.borderRadii.none},noPadding:{padding:0},headlineText:{marginBottom:e.spaces.xSmall},buttons:{marginTop:e.spaces.xSmall,width:"100%"},button:{width:"100%",marginBottom:e.spaces.small},moreInfoButton:{marginTop:e.spaces.xxSmall},spinner:{marginTop:"5px"}}));var En=Va(Tn),Rn=a("OiMc"),In=a("cHvH");class kn extends r.Component{constructor(...e){super(...e),o()(this,"state",{nudgeDismissed:!1,showBlockModal:!1,showHideReplyEducation:!1,shouldHidePopover:!1}),o()(this,"_isNudgeEducationEnabled",h.b.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),o()(this,"_renderNudge",()=>{const{conversationTreeEnabled:e,location:t,inReplyToStatus:a,nudgeId:n,nudgeType:i,onDiscard:s,screenWidth:o}=this.props,{showBlockModal:l,showHideReplyEducation:d}=this.state,c=null==a?void 0:a.conversation_id_str,h=t.state&&t.state.previousPath&&t.state.previousPath.split("/status/").slice(-1)[0].split("/")[0];return i&&n&&a&&a.id_str?r.createElement(En,{conversationId:c,conversationModule:h&&this._getConversationModule(h,e),conversationTreeEnabled:e,hidePopover:this._hidePopover,inReplyToStatusId:a.id_str,nudgeId:n,nudgeType:i,onDiscard:s,onRevise:this._handleDismissNudge,onSend:this._handleSend,recipient:a.user,screenWidth:o,setShowBlockModal:this.setShowBlockModal,setShowHideReplyEducation:this.setShowHideReplyEducation,showBlockModal:l,showHideReplyEducation:d}):null}),o()(this,"_getConversationModule",Object(st.a)((e,t)=>Object(Fa.a)({focalTweetId:e,conversationTreeEnabled:t}))),o()(this,"_handleSend",()=>{const{onSend:e}=this.props;this._handleDismissNudge(),e()}),o()(this,"_handleDismissNudge",e=>{const{clearNudgeType:t,nudgeType:a,screenWidth:n}=this.props;e&&e.stopPropagation(),this._isNudgeEducationEnabled&&n>=y.a.theme.breakpoints.small&&a&&this.setState({nudgeDismissed:!0}),t()}),o()(this,"_hidePopover",()=>{this.setState({shouldHidePopover:!0})}),o()(this,"setShowHideReplyEducation",e=>{this.setState({showHideReplyEducation:e})}),o()(this,"setShowBlockModal",e=>{this.setState({showBlockModal:e})})}render(){const{children:e,nudgeType:t,screenWidth:a}=this.props,{nudgeDismissed:n,shouldHidePopover:i}=this.state;return this._isNudgeEducationEnabled&&a>=y.a.theme.breakpoints.small&&!i?r.createElement(Rn.a,{disabled:n,onDismiss:this._handleDismissNudge,renderContent:this._renderNudge,visibilityBehavior:t?Rn.a.VISIBILITY_BEHAVIOR.forceVisible:Rn.a.VISIBILITY_BEHAVIOR.forceHidden,withArrow:!0,withFixedPosition:!0,withMask:!!t},e):r.createElement(r.Fragment,null,e,this._renderNudge())}}var Mn=e=>r.createElement(In.a,null,({screenWidth:t})=>r.createElement(kn,i()({},e,{screenWidth:t}))),Bn=a("7myi"),An=a("7nmT"),Dn=a.n(An),On=a("vbWy"),Pn=a("Rp9C"),Ln=a("k49u");const Fn=u.a.i859a9d3,Nn=u.a.a7478929,Hn=u.a.adf527d2,jn=u.a.b25c5b2a,Vn=u.a.cc85b9f5,zn=u.a.a3f10d61,Wn=u.a.d74da9b8,Un=u.a.c3ebec63,Gn=u.a.b6266b34,Kn=u.a.a59566d7,qn=u.a.g30d7ec5,$n=u.a.d484fca9,Xn=u.a.c51ba396,Yn=u.a.ef2fa90b;var Qn={defaultToast:{text:Hn},[Ln.a.OverStatusUpdateLimit]:{toast:{text:Nn,actionLabel:Fn,actionLink:"https://support.twitter.com/articles/15364"}},[Ln.a.DuplicateStatusError]:{toast:{text:jn}},[Ln.a.CurrentUserSuspended]:{toast:{text:Vn}},[Ln.a.InReplyToTweetNotFound]:{toast:{text:zn}},[Ln.a.MentionLimitInTweetExceeded]:{toast:{text:Wn}},[Ln.a.UrlLimitInTweetExceeded]:{toast:{text:Un}},[Ln.a.HashtagLimitInTweetExceeded]:{toast:{text:Gn}},[Ln.a.CashtagLimitInTweetExceeded]:{toast:{text:Kn}},[Ln.a.HashtagLengthLimitInTweetExceeded]:{toast:{text:qn}},[Ln.a.AttachmentTypesLimitInTweetExceeded]:{toast:{text:$n}},[Ln.a.StatusMalwareError]:{toast:{text:Xn,actionLabel:Fn,actionLink:"https://support.twitter.com/articles/90491"}},[Ln.a.StatusTooLongError]:{toast:{text:Yn}},showToast:!0},Jn=a("N5qz"),Zn="tweetButton",ei="tweetButtonInline",ti=a("aITJ"),ai=a("sCk0"),ni=a("4zmP"),ii=a("JYMr"),si=a("7N4s"),oi=a("rziq"),ri=a("jTgF"),li=a("3A2y"),di=a("s1N3"),ci=a("4FGy"),hi=a("+d3d"),pi=a("sXY3");const ui=u.a.dad5a4b8,mi=u.a.e65aed64,gi=u.a.d8222374,_i=u.a.j890123a,bi=u.a.bb01231c,yi=u.a.d4ab68e2,fi=u.a.d8af8a4c,xi=u.a.d09d4c05,Ci=u.a.i2209530,vi=u.a.bf9b89e4,wi=u.a.f277e949,Ti=u.a.b551cd22,Si=u.a.f026a7fa,Ei=u.a.a5d4fda0,Ri=u.a.ib067d6a,Ii=l.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style;class ki extends r.Component{constructor(e,t){super(e,t),o()(this,"_getParentKey",()=>{const{isInline:e,parentTweetId:t}=this.props;return t||(e?ta.a.homeTimeline:ta.a.modal)}),o()(this,"_updateSingleComposer",(e,t)=>{const{updateSingleComposer:a}=this.props;return a({updates:e,index:t,parentKey:this._getParentKey()})}),o()(this,"_resetDraft",()=>{const{resetDraft:e}=this.props;return e(this._getParentKey())}),o()(this,"_syncTexts",()=>{const{composerData:e}=this.props,{textMap:t}=this.state;e.forEach((e,a)=>{const n=t[e.key];"string"==typeof n&&n!==e.text&&this._updateSingleComposer({text:n},a)})}),o()(this,"_hasGif",e=>e.gifMetadata||e.media.some(e=>e.mediaFile&&e.mediaFile.isGif)),o()(this,"_hasPhoto",e=>e.media&&e.media.some(e=>e.mediaFile&&e.mediaFile.isImage)),o()(this,"_hasVideo",e=>e.media&&e.media.some(e=>e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif)),o()(this,"_handleAnimateComplete",()=>{const{activeComposerIndex:e,onHandleAppBarHeight:t}=this.props,a=Dn.a.findDOMNode(this._composerRefs[e]);if(a instanceof window.Element){const{top:e,bottom:n}=a.getBoundingClientRect(),i=Math.max(e,window.scrollY);if(i<window.pageYOffset||n>window.innerHeight){const e=t?i-t()-14:i-14,a=Math.max(e,0);window.requestAnimationFrame(()=>{Ii?window.scrollTo({top:a,left:0,behavior:"smooth"}):window.scrollTo(0,a)})}}}),o()(this,"_handleFetchTweetIfNeeded",()=>{const{createLocalApiErrorHandler:e,inReplyToStatus:t,inReplyToStatusId:a,fetchTweetIfNeeded:n,quotedStatus:i,quotedStatusId:s}=this.props;!t&&a&&n(a).catch(e(Aa.a)),!i&&s&&n(s).catch(e(Aa.a))}),o()(this,"_blockHistory",(e,t)=>{const{isInline:a}=this.props,n=!a&&/unsent/.test(e.pathname),i=!a&&!/\/compose\/tweet\/?$/.test(e.pathname);return this.shouldShowDiscardConfirmation&&"POP"===t&&i?(this.setState({showDiscardTweetConfirmation:!0}),!1):this._canSaveDraft&&n&&"PUSH"===t?this.shouldShowDiscardConfirmation?(this.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:n}),!1):(this._resetDraft(),!0):!this.shouldShowBackgroundSendConfirmation||"POP"!==t||!i||(this._cancelAllMediaUploads(),!1)}),o()(this,"_getKeyCommandHandlers",()=>{const{typeaheadActive:e}=this.state;return e?this._keyCommandHandlersForActiveTypeahead:this._keyCommandHandlers}),o()(this,"handleTweetOrRetweet",()=>{this._scribe({section:"composition",element:"send_tweet",action:"click"});if(this._areComposersValid())return this.isRetweet?this._handleRetweet():this._handleTweet()}),o()(this,"_render",e=>{var t,a;const{activeUser:n,addComposer:s,addToast:o,composeHeader:l,composerData:d,conversationControlsValue:c,conversationTreeEnabled:h,copyDataFromInlineComposerToModalComposer:p,customizePropsForSingleComposerItem:u,history:g,isInline:_,isSending:y,isSelfThreadReply:f,inReplyToStatus:x,location:C,parentTweetId:v,positionCursorAtBeginning:w,scheduledFor:T,richTextInputContext:S,typeaheadWrapper:E,userLanguage:R,windowWidth:I}=this.props,{isModal:k}=this.context,{errorMessage:M,focused:B,nudgeId:A,nudgeType:D,showDiscardTweetConfirmation:O,typeaheadActive:P,shouldDisableButton:L}=this.state,F=!k&&P,N=_?0:this.props.activeComposerIndex,H=F||_?[d[N]]:d,j=this._areComposersValid(),V=this.hasNonCompliantQuote&&this.isRetweet,z=_?m.a:ai.a,W=_?{}:{onAnimateComplete:k?void 0:this._handleAnimateComplete},U=["community","by_invitation"].includes(null==x||null==(t=x.conversation_control)?void 0:t.policy)&&(null==x||null==(a=x.conversation_control)?void 0:a.invite_via_mention);return r.createElement(m.a,{ref:e?this._setHiddenRootRef:this._setRootRef,style:[v?Mi.rootInlineReply:Mi.root,e&&Mi.hidden]},_?this._renderProgressBar():null,M&&r.createElement(m.a,{style:Mi.inlineCallout},r.createElement(ni.a,{action:M.actionLabel&&M.actionLink?{label:M.actionLabel,link:M.actionLink}:void 0,text:M.text,type:"danger"})),r.createElement(m.a,{onFocus:this._handleFocus,style:[Mi.content,v&&Mi.contentInlineReply]},x?this._renderReplyContext(e):null,l,r.createElement(z,W,H.map((t,a)=>{const l=Object(J.h)(t.scheduledFor),M=d.indexOf(t),O=u(t,a,H),P=r.createElement(Mn,{clearNudgeType:this.clearNudgeType,conversationTreeEnabled:h,inReplyToStatus:x,location:C,nudgeId:A,nudgeType:D,onDiscard:this._handleDismissComposerFromNudge,onSend:this._handleSendTweet},k||_?r.createElement(b.a,{disabled:L||!j||V,onPress:this.handleTweetOrRetweet,size:"normal",style:Mi.inlineSendButton,testID:k?Zn:ei,type:"primary"},Object(Da.a)({inReplyToStatus:!!x,isSelfThreadReply:!!f,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!l,isThread:this.isThread})):null),F=this._getSingleComposerDataWithLatestText(t);return r.createElement(m.a,{key:t.key},r.createElement(Ft,i()({addToast:o,additionalToolbarContent:P,autoFocus:!!v&&B,conversationControlsValue:c,data:F,disableAddTweet:d.length>=25,editable:!y&&!!n,hidePollAndScheduling:_&&Jn.a.isOneColumnSquishedLayout(I),history:g,index:M,isActive:M===N&&!y,isExpanded:0!==a||this._shouldBeExpanded(e),isInline:_,isInlineReply:!!v,isLast:_||M===d.length-1,isReply:!!x||!!v,isSelfThreadReply:!!f,keyCommandHandlers:this._getKeyCommandHandlers(),loggedInUser:n,onAddComposer:_?p:s,onFilesAdded:this._handleAddMediaFiles(M),onFocus:this._handleComposerFocus,onRemoveComposer:this._handleRemoveComposer,onRemoveMedia:this._handleMediaRemove,onTextChange:this._handleTextChange,onTextInputBlur:this._handleTextOnBlur(F.key,a),onTypeaheadStateChange:this._handleTypeaheadStateChange,positionCursorAtBeginning:!!w,ref:this._setComposerRef(M),richTextInputContext:S,scheduledFor:T,setActiveParentKey:this._setActiveParentKey,twitterTextConfigurationVersion:"version3",typeaheadWrapper:E,updateConversationControlsValue:this._updateConversationControlsValue,updateSingleComposer:this._updateSingleComposer,userLanguage:R,withFlexibleParticipation:U},O)))})),O?this._canSaveDraft?r.createElement(an.a,{cancelButtonLabel:yi,confirmButtonLabel:Ci,headline:fi,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:xi}):r.createElement(an.a,{confirmButtonLabel:yi,confirmButtonType:"destructive",headline:this.isThread?_i:gi,onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:bi}):null,r.createElement(m.a,{style:[y&&Mi.mask]})))}),o()(this,"_renderReplyContext",e=>{const{activeUser:t,dataSaverMode:a,excludedRecipients:n,isInline:i,isSelfThreadReply:s,inReplyToStatus:o}=this.props;if(this._shouldBeExpanded(e))return r.createElement(qt,{dataSaverMode:a,excludedRecipients:n,inReplyToStatus:o,key:n.join(),loggedInUserId:t?t.id_str:void 0,onPress:this._handleViewRecipients,shouldDisplayRepliesText:!s,showParentTweet:!i})}),o()(this,"_setRootRef",e=>{const t=Dn.a.findDOMNode(e);t&&t instanceof Element&&(this._root=t)}),o()(this,"_setHiddenRootRef",e=>{const t=Dn.a.findDOMNode(e);t&&t instanceof Element&&(this._hiddenExpandedRoot=t)}),o()(this,"_handleTweet",()=>{const{composerData:e}=this.props,{scheduledFor:t}=e[0];this.setState({errorMessage:void 0}),t?Object(J.h)(t)&&this._handleScheduleTweet():this._checkToxicAndSendTweet()}),o()(this,"_handleTweetError",(e,t)=>a=>{const{analytics:n,createLocalApiErrorHandler:i}=this.props;if(Object(ri.d)(a)&&a.code===Oa.b.CANCELED)return n.scribeAction(e),Promise.resolve();const s=Object(ri.b)(a);if(s)return this.setState({errorMessage:s}),Promise.resolve();const o=t||Object(Ma.a)(void 0,!1);i(Object.assign({},o))(a),this.setState({errorMessage:{text:Ei}})}),o()(this,"_handleScheduleTweet",()=>{const{addToast:e,composerData:t,excludedRecipients:a,inReplyToStatus:n,schedule:i}=this.props,s=this._getSingleComposerDataWithLatestText(t[0]);i({excludedRecipients:a,inReplyToStatus:n,scheduleData:s}).then(a=>{this.setState({tweetsSentOrScheduled:!0});const n=Object(J.c)(s.scheduledFor);if(n){const i=Object(J.b)(n),s=Object(J.i)(n),o=Ti({scheduleDate:i,scheduleTime:s});e({text:o,actionLink:"/compose/tweet/unsent/scheduled",actionLabel:wi}),this._scribeTweetSent(t[0],Object.assign({},a,{id_str:a.scheduled_id_str}),!0)}this._updateConvoCardState(),this._close()}).catch(this._handleTweetError("schedule_tweet_cancel"))}),o()(this,"_handleDraftTweet",()=>{const{addToast:e,composerData:t,draftTweet:a,excludedRecipients:n,inReplyToStatus:i}=this.props,s=this._getSingleComposerDataWithLatestText(t[0]);this._recordNudgeResult(ln.SaveTweetToDrafts),a({excludedRecipients:n,inReplyToStatus:i,draftData:s}).then(a=>{this.setState({showDiscardTweetConfirmation:!1}),e({text:vi,actionLink:"/compose/tweet/unsent/drafts",actionLabel:wi}),this._scribeTweetSent(t[0],Object.assign({},a,{id_str:a.draft_id_str}),!1,!0),this._updateConvoCardState(),this._close()}).catch(this._handleTweetError("draft_tweet_cancel"))}),o()(this,"_handleSendTweet",()=>{const{addToast:e,analytics:t,composeSemanticCoreId:a,conversationControlsValue:n,excludedRecipients:i,history:s,inReplyToStatus:o,isSelfThreadReply:r,location:l,activeUser:d,promotedContent:c,send:h}=this.props,{nudgeId:p}=this.state,u=this.props.composerData.map(e=>this._getSingleComposerDataWithLatestText(e)),m=Object(J.c)(u[0].scheduledFor);if(m){const t=Object(J.b)(m),a=Object(J.i)(m),n=Ti({scheduleDate:t,scheduleTime:a});return e({text:n,actionLink:"",actionLabel:wi}),void this._close()}i.length>0&&t.scribe({element:"mentions",action:"edited"}),this._conversationControlsCreationEnabled&&("community"===n?t.scribe({action:"send_community_tweet"}):"by_invitation"===n&&t.scribe({action:"send_mentioned_tweet"}));const g=u.map((e,t)=>Object.assign({},e,{pollChoices:this._composerRefs[t]?this._composerRefs[t].pollChoices:void 0,pollDuration:this._composerRefs[t]?this._composerRefs[t].pollDuration:void 0})),_=this._isNudgeTweetypieEnabled&&this._isSecondaryDegreeNudge?{nudge_enabled:!0,nudge_types:["ReviseOrBlock","ReviseOrMute","ReviseOrHideThenBlock"],nudge_testing_keyword_enabled:!0,previous_nudge_id:p}:{};h(Object.assign({},_,{sendData:g,conversationControlsValue:n,excludedRecipients:i,inReplyToStatus:o,isSelfThreadReply:r,promotedContent:c,composeSemanticCoreId:a})).then(t=>{this.setState({tweetsSentOrScheduled:!0}),t.map((e,t)=>this._scribeTweetSent(u[t],e)),t.length>1&&this._scribeThreadSent(u,t,"thread_send_success");const{onSent:a}=this.props,n=t.length>1?mi:ui;if(e({text:n,actionLink:`/${d?d.screen_name:"i"}/status/${t[0].id_str}`,actionLabel:wi}),this._isNudgeEnabled&&p){const e=t[0].id_str;this._isShowNudgeEnabled?this._recordNudgeResult(ln.SentTweet,e):this._recordNudgeResult(ln.TweetSentWithoutShowingNudge,e)}this._updateConvoCardState(),this._close(),a&&a({sentTweets:t,inReplyToStatus:o})}).catch(e=>{var a;const{sentTweets:n=[]}=e,i=Array.isArray(e.errors)&&(null==(a=e.errors[0])?void 0:a.code),o=null==e?void 0:e.url,r=null==e?void 0:e.status,d={message:e.type,event_info:i?""+i:void 0,status_code:r,url:o};if(!this._isNudgeTweetypieEnabled||439!==i)throw n.map((e,t)=>this._scribeTweetSent(u[t],e)),Object(ri.d)(e)&&e.code===Oa.b.CANCELED||t.scribe({action:"send_tweet_failure",data:d}),u.length>1&&this._scribeThreadSent(u,n,"thread_send_failure"),n.length&&s.replace({pathname:l.pathname,state:Object.assign({},Object(li.a)(l.state||{},"quotedStatus"),{inReplyToStatusId:n[n.length-1].id_str,isSelfThreadReply:!0})}),e;{var c;const t=null==(c=e.errors[0])?void 0:c.nudge,a=t.id,n=t.nudge_type,i=n.charAt(0).toUpperCase()+n.slice(1);this.setState({nudgeType:i,nudgeId:a})}}).catch(this._handleTweetError("send_tweet_cancel",Qn))}),o()(this,"_checkToxicAndSendTweet",()=>{const{activeUser:e,composerData:t,createNudge:a,inReplyToStatus:n,isSelfThreadReply:i}=this.props,{hasNudged:s}=this.state,o=n&&n.entities.user_mentions&&n.entities.user_mentions.some(({screen_name:t})=>t===(null==e?void 0:e.screen_name)),r=this._getSingleComposerDataWithLatestText(t[0]).text;this._isSecondaryDegreeNudge=!(i||!o||!a||!r),!this._isNudgeTweetypieEnabled&&this._isNudgeEnabled&&!s&&this._isSecondaryDegreeNudge?(this.setState({shouldDisableButton:!0}),this._checkToxicWithTimeout(r).then(e=>{e.showNudge||this._handleSendTweet()}).finally(()=>{this.setState({shouldDisableButton:!1})})):this._handleSendTweet()}),o()(this,"_makeTimeout",()=>new Promise((e,t)=>setTimeout(e,1500))),o()(this,"_checkToxicWithTimeout",e=>{const{inReplyToStatus:t,location:a}=this.props;return Promise.race([this._checkToxic(e),this._makeTimeout()]).then(e=>{var n,i,s,o,r;const l=null==e||null==(n=e.create_nudge)||null==(i=n.nudge)||null==(s=i.nudge_type)?void 0:s.__typename,d=null==e||null==(o=e.create_nudge)||null==(r=o.nudge)?void 0:r.id;this.setState({nudgeId:d});const c=null==t?void 0:t.user.muting,p=l===on.ReviseOrMute&&c,u=a.state&&a.state.previousPath.includes("/hidden"),m=l===on.ReviseOrHideThenBlock&&u;if(l){if(h.b.isTrue("responsive_web_second_degree_replies_nudge_show_enabled"),h.b.isTrue("responsive_web_second_degree_replies_nudge_get_enabled"),this._isShowNudgeEnabled&&!p&&!m)return this.setState({nudgeType:l,hasNudged:!0}),{showNudge:!0};this._recordNudgeAction(rn.NudgeNotShown)}return{}}).catch(()=>({}))}),o()(this,"_checkToxic",e=>{const{createNudge:t,inReplyToStatusId:a,parentTweetId:n=a,inReplyToStatus:i}=this.props;return t(e,n,null==i?void 0:i.conversation_id_str)}),o()(this,"clearNudgeType",()=>{this.setState({nudgeType:void 0})}),o()(this,"_setActiveParentKey",()=>{const{setActiveParentKey:e}=this.props;e(this._getParentKey())}),o()(this,"_scribeTweetSent",(e,t,a=!1,n=!1)=>{const i=e.scheduledTweetId?"schedule_edit_":"schedule_",s=e.draftTweetId?"draft_edit_":"draft_",o=n?s:a?i:"send_",r={items:[Pn.a.getTweetItem(t)]},l=e.pollActive&&e.pollValid,d=e.mediaMetadata&&Object.values(e.mediaMetadata).some(e=>!!e),c=this.props.inReplyToStatus||this.props.inReplyToStatusId,h=this.props.isInline?"inline_reply":"tweet_box_dialog";if(this._scribe({action:o+"tweet"},r),n||!e.draftTweetId||e.scheduledTweetId||this._scribe({action:o+"draft_tweet"},r),this.isQuoteTweet&&this._scribe({action:"retweet_with_comment"},r),c&&this._scribe({component:h,action:o+"reply"},r),l&&this._scribe({action:o+"poll_tweet"},r),d&&this._scribe({action:o+"photo_tweet_with_alt_text"},r),this._hasPhoto(e)&&this._scribe({action:o+"photo_tweet"},r),this._hasVideo(e)&&this._scribe({action:o+"video_tweet"},r),e.gifMetadata){const a=Pn.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);this._scribe({element:"remote",action:o+"gif_tweet"},{items:[a]})}else this._hasGif(e)&&this._scribe({element:"local",action:o+"gif_tweet"},r)}),o()(this,"_scribeThreadSent",(e,t,a)=>{const{inReplyToStatus:n}=this.props,i={items:[Pn.a.getSendThreadItem(e,t.length,!!n)]};this._scribe({action:a},i)}),o()(this,"_scribeRetweet",e=>{const t={items:[Pn.a.getTweetItem(e)]};this._scribe({action:"retweet"},t)}),o()(this,"_handleRetweet",()=>{const{composerData:e,createLocalApiErrorHandler:t,onSent:a,retweet:n}=this.props,i=e[0].quotedStatus;i&&(this._scribeRetweet(i),n(i.id_str,{}).then(e=>{this.setState({tweetsSentOrScheduled:!0}),this._close(),a&&a({sentTweets:e?[e]:[]})},t(On.a)))}),o()(this,"handleDismissComposer",()=>{this.shouldShowDiscardConfirmation?this.setState({showDiscardTweetConfirmation:!0}):this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()}),o()(this,"_handleDismissComposerFromNudge",()=>{this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()}),o()(this,"_cancelAllMediaUploads",()=>{this.props.composerData.forEach(e=>e.media.forEach(e=>e.uploading&&e.uploader&&e.uploader.cancel()))}),o()(this,"_handleConfirmDiscardTweet",()=>{const{analytics:e}=this.props,t=this._canSaveDraft?"draft":"send";this.setState({showDiscardTweetConfirmation:!1}),this._recordNudgeResult(ln.CancelComposer),this._close(),e.scribeAction(t+"_tweet_discard")}),o()(this,"_handleCancelDiscardTweet",()=>{this.setState({showDiscardTweetConfirmation:!1},()=>{this._restoreFocusToActiveComposer()})}),o()(this,"_restoreFocusToActiveComposer",()=>{const{activeComposerIndex:e}=this.props;void 0!==e&&this._composerRefs[e]&&this._composerRefs[e].focus()}),o()(this,"_close",()=>{const{history:e,isSending:t,onCloseComposer:a}=this.props;t||(this._resetDraft(),window.Windows&&Object(La.a)().then(({default:e})=>e.shareCompletedCallback())),this.state.navigatingToOutbox?this._canSaveDraft?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled"):a&&a()}),o()(this,"_handleComposerFocus",e=>{this._composerRefs[e]?this.props.updateActiveComposerIndex(e):setTimeout(()=>{this._restoreFocusToActiveComposer()},0)}),o()(this,"_handleFocus",()=>{const{getTweetHeight:e}=this.props,{focused:t}=this.state;t||this.setState({focused:!0},()=>{if(e&&this._hiddenExpandedRoot){const t=this._hiddenExpandedRoot.getBoundingClientRect().height+e();this._handleHeightChanged(t)}})}),o()(this,"_handleHeightChanged",e=>{const{onHeightChanged:t,onAnimationStarted:a,onAnimationEnded:n}=this.props;a&&a("none"),t&&t(e),window.requestAnimationFrame(()=>{n&&n()})}),o()(this,"_handleTypeaheadStateChange",e=>{this.setState({typeaheadActive:e})}),o()(this,"_handleRemoveComposer",()=>{const{activeComposerIndex:e,composerData:t,history:a,location:n,removeComposer:i}=this.props;0===e&&t[0].quotedStatus&&a.replace({pathname:n.pathname,state:Object(li.a)(n.state||{},"quotedStatus")}),i()}),o()(this,"_handleViewRecipients",()=>{const{excludedRecipients:e,history:t,inReplyToStatus:a}=this.props;this._setActiveParentKey(),t.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:e,inReplyToStatus:a}})}),o()(this,"_handleTextChange",(e,t)=>{const{textMap:a}=this.state,{activeComposerIndex:n,isInline:i,setValidity:s}=this.props;if(this.setState({textMap:Object.assign({},a,{[t]:e})},()=>{s&&s(this._areComposersValid())}),ti.a.isIOS()){const t=i?0:n;this._updateSingleComposer({text:e},t)}}),o()(this,"_handleTextOnBlur",Object(st.a)((e,t)=>()=>{const{textMap:a,tweetsSentOrScheduled:n}=this.state,i=a[e];"string"!=typeof i||n||this._updateSingleComposer({text:i},t)})),o()(this,"_updateConversationControlsValue",e=>{if(!this._conversationControlsCreationEnabled)return;const{updateConversationControlsValue:t}=this.props;t(e,this._getParentKey())}),o()(this,"_renderProgressBar",()=>{const{sendingProgress:e,isSending:t}=this.props;return r.createElement(ii.a,{progress:t?Math.max(e,.02):0,style:[Mi.progressBar]})}),o()(this,"_updateConvoCardState",()=>{const{convoCardData:e,updateConvoCardState:t}=this.props;if(e){const{cardId:a,nextState:n}=e;n&&a&&t(a,{cardState:n})}}),o()(this,"_attachExternalMedia",e=>t=>Promise.all(t.map(e=>Object(Ba.a)(e))).then(this._handleAddMediaFiles(e))),o()(this,"_handleAddMediaFiles",e=>t=>{const{addMedia:a,addToast:n,composerData:i,dataSaverMode:s,processMultipleMedia:o,removeMediaUpload:r,uploadMedia:l}=this.props;a(t,{location:Pa.c.Tweet}).then(t=>{const a=i[e],d=t.map(e=>e.id);if(ki._validateMedia(a,t)){const n=a.media.map(e=>e.id);this._updateSingleComposer({mediaIds:Object(di.a)(n.concat(d))},e),o(t,{onFailure:this._handleMediaRemoveFactory(e)}).then(e=>{s||l(e.map(e=>e.id),{preUpload:!0})})}else n({text:Ri}),r(d)})}),o()(this,"_handleMediaRemoveFactory",e=>t=>this._handleMediaRemove(e,t)),o()(this,"_handleMediaRemove",(e,t)=>{const{composerData:a,removeMediaUpload:n}=this.props,{media:i,mediaMetadata:s,mediaTags:o}=a[e],r=((e,...t)=>Object(ci.a)(e,t))(i.map(e=>e.id),t),l=r.length>0?o:[];this._updateSingleComposer({mediaIds:r,gifMetadata:void 0,mediaMetadata:s&&Object(li.a)(s,t.toString()),mediaTags:l},e),n(t),this.setState({errorMessage:void 0})}),o()(this,"_setComposerRef",e=>t=>{this._composerRefs[e]=t}),o()(this,"_shouldBeExpanded",e=>{const{composerData:t,parentTweetId:a}=this.props,{focused:n}=this.state;if(e||n)return!0;const i=!Object(Q.b)(this._getSingleComposerDataWithLatestText(t[0]));return!a||i}),o()(this,"_areComposersValid",()=>{const{composerData:e}=this.props;return this.isRetweet||e.every(e=>Object(Q.d)(this._getSingleComposerDataWithLatestText(e)))}),o()(this,"_areComposersEmptyOrUnchanged",()=>{const{composerData:e,prepopulatedText:t}=this.props;return e.every(e=>Object(Q.c)(this._getSingleComposerDataWithLatestText(e),t))}),o()(this,"_getSingleComposerDataWithLatestText",e=>{const{textMap:t}=this.state;return"string"==typeof t[e.key]?Object.assign({},e,{text:t[e.key]}):e}),o()(this,"_recordNudgeAction",e=>{const{recordNudgeAction:t}=this.props,{nudgeId:a}=this.state;a&&t({nudgeId:a,nudgeActionType:e})}),o()(this,"_recordNudgeResult",(e,t)=>{const{recordNudgeResult:a}=this.props,{nudgeId:n}=this.state;n&&a(t?{nudgeId:n,nudgeResultType:e,tweetId:t}:{nudgeId:n,nudgeResultType:e})}),this.state={focused:!1,showDiscardTweetConfirmation:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},this._composerRefs={},this._conversationControlsCreationEnabled=!0===h.b.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._isScrollerV3Enabled=h.b.isTrue("responsive_web_scroller_v3_enabled"),this._throttledSyncTexts=Object(hi.a)(this._syncTexts,1e3,{leading:!0,trailing:!1}),this._keyCommandHandlers={[oi.b]:this.handleTweetOrRetweet,[oi.a]:this.handleDismissComposer},this._keyCommandHandlersForActiveTypeahead={[oi.b]:this.handleTweetOrRetweet},this._isNudgeEnabled=!0===h.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_get_enabled"),this._isShowNudgeEnabled=!0===h.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_show_enabled"),this._isNudgeTweetypieEnabled=!0===h.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_tweetypie_enabled")}UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentDidMount(){const{convoCardData:e,externalMedia:t,externalMediaFiles:a,history:n,isIntentRoute:i,isInline:s,location:o,parentTweetId:r,prepopulatedText:l,setValidity:d}=this.props;if(this._unblockHistory=this.props.history.block(this._blockHistory),t.length>0&&this._attachExternalMedia(0)(t),a.length>0&&this._handleAddMediaFiles(0)(a),this._handleFetchTweetIfNeeded(),l||e&&e.cardUrl){const t=Object.assign({},null);l&&(t.text=l),e&&e.cardUrl&&(t.cardUrl=e.cardUrl),this._updateSingleComposer(t)}(l||e&&e.cardUrl||t.length>0||a.length>0)&&!i&&n.replace({query:Object(Zt.b)(o.query),search:"",pathname:o.pathname,state:Object(li.a)(Object(Zt.b)(o.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),d&&d(this._areComposersValid()),s||this._setActiveParentKey(),this._isScrollerV3Enabled&&r&&this._root&&(this._height=this._root.getBoundingClientRect().height)}componentDidUpdate(e,t){const{addToast:a,composerData:n,copyDataFromInlineReplyComposerToModalComposer:i,externalMedia:s,externalMediaFiles:o,onRef:r,parentTweetId:l,replyPressToggle:d,setValidity:c,windowWidth:h,getTweetHeight:p}=this.props,{textMap:u}=this.state;if(this._isScrollerV3Enabled&&l&&p&&this._root&&(e.composerData!==n||t.textMap!==u)){const e=this._root.getBoundingClientRect().height;if(e!==this._height){this._height=e;const t=e+p();this._handleHeightChanged(t)}}h!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==r&&e.onRef(void 0),r&&r!==e.onRef&&r(this),n.length>=25&&e.composerData.length<25&&a({text:Si}),s.length>0&&s!==e.externalMedia?this._attachExternalMedia(0)(s):o.length>0&&o!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(o),c&&!Object(Vt.a)(n,e.composerData)&&c&&c(this._areComposersValid()),d!==e.replyPressToggle&&i(l)}componentWillUnmount(){const{composerData:e,onRef:t}=this.props;this._unblockHistory&&this._unblockHistory(),t&&t(void 0),Object(pi.a)(this._composerRefs).forEach(([t,a])=>{const n=parseInt(t,10);if(a)return e[n]&&e[n].pollActive&&this._updateSingleComposer({initialPollChoices:a.pollChoices,initialPollDuration:a.pollDuration},n)}),this._syncTexts()}render(){const{parentTweetId:e}=this.props;return this._isScrollerV3Enabled&&e?r.createElement(r.Fragment,null,this._render(),this._render(!0)):this._render()}_scribe(e,t){const{analytics:a}=this.props;a.scribe(Object.assign({},e,{data:t}))}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length,a=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===a&&t}get isQuoteTweet(){const{composerData:e}=this.props,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}get hasNonCompliantQuote(){var e;const{composerData:t}=this.props;return"non_compliant"===(null==(e=t[0].quotedStatus)?void 0:e.limited_actions)}get shouldShowDiscardConfirmation(){const{isSending:e,composerData:t}=this.props,{scheduledTweetId:a}=t[0],{showDiscardTweetConfirmation:n}=this.state,i=this._areComposersEmptyOrUnchanged();return!(e||i||n||a)}get shouldShowBackgroundSendConfirmation(){const{composerData:e,isSending:t}=this.props,a=e.some(e=>e.media.some(e=>e.uploading));return t&&a}get _canSaveDraft(){const{composerData:e,isInline:t}=this.props;return!this.isThread&&!e[0].pollActive&&0===e[0].mediaTags.length&&!t}}o()(ki,"defaultProps",{customizePropsForSingleComposerItem:(e,t,a)=>({}),externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:()=>{},typeaheadWrapper:Bn.a}),o()(ki,"contextType",si.a),o()(ki,"_validateMedia",(e,t)=>{const{media:a}=e;return Object(d.c)(a.concat(t))});const Mi=y.a.create(e=>({root:{paddingBottom:e.spaces.xxSmall},rootInlineReply:{backgroundColor:e.colors.fadedGray,paddingBottom:e.componentDimensions.gutterVertical},content:{paddingVertical:e.spaces.xxSmall,backgroundColor:e.colors.cellBackground},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:Object.assign({},y.a.absoluteFillObject),inlineSendButton:{marginLeft:e.spaces.xSmall},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},hidden:{position:"absolute",visibility:"hidden",width:"100%"}}));t.a=Object(A.a)(ka(ki))},VjLy:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("ERkP"),i=a("3XMw"),s=a.n(i),o=a("feu+"),r=a("eb3s"),l=a("lUZE"),d=a("5cUs");const c=s.a.ge5067bb,h=s.a.ea626ab3,p=s.a.fc716886,u=`${s.a.f2a2a06e}\n\n${s.a.f82c0bbf}`,m=s.a.b2615c6d,g=s.a.i62a03aa,_=s.a.cfd2f35d,b=s.a.a6450e83,y=s.a.hb279a11,f=({onConfirm:e,onCancel:t,onHideReplyImpression:a=(()=>{})})=>n.createElement(o.a,{actionLabel:c,graphic:l.a,headline:p,onAction:e,onClose:t,onImpression:a,onTertiaryAction:t,subtext:u,supportUrl:"https://help.twitter.com/en/using-twitter/mentions-and-replies?lang=browser#hidden-reply",tertiaryActionLabel:_});t.b=({addTip:e,addToast:t,createLocalApiErrorHandler:a,hideReply:i,onBlock:s,onTweetDismiss:o,scribeAction:l,tips:p,tweet:u})=>{const _=!p.hide_reply_author_education,x=()=>{l({element:"moderated_replies_prompt",action:"impression"})};return{confirmation:_?{render:(e,t)=>f({onConfirm:e,onCancel:t,onHideReplyImpression:x})}:{render:(e,t)=>{const{user:{screen_name:a}}=u;return n.createElement(r.a,{cancelButtonLabel:g,confirmButtonLabel:b,confirmButtonType:"destructive",headline:m({screenName:a}),onCancel:e,onConfirm:()=>{s(),e()},text:y({screenName:a})})}},text:c,onClick:()=>{e({hide_reply_author_education:!0}),i(u.id_str,{conversation_id:u.conversation_id_str}).then(e=>{o&&o(),t({text:h})},a({showToast:!0})),l({element:"moderate_reply"})},Icon:d.a}}},Zg3A:function(e,t,a){"use strict";a("IAdD");var n=a("ERkP"),i=a("Lsrn"),s=a("k/Ka");const o=(e={})=>Object(s.a)("svg",Object.assign({},e,{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),n.createElement("g",null,n.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm8.472 9.442c-.242.19-.472.368-.63.486-.68-1.265-1.002-1.78-1.256-2.007-.163-.145-.37-.223-.78-.375-.367-.136-1.482-.55-1.65-.85-.087-.153.136-.602.23-.793.088-.177.164-.33.196-.497.123-.646-.33-1.146-.728-1.59-.066-.072-.153-.17-.23-.26.335-.12.862-.26 1.42-.384 1.95 1.448 3.26 3.704 3.428 6.272zm-9.788-7.83c.076.25.145.5.182.678-.255.15-.663.363-.96.52-.262.136-.522.273-.738.392-.247.137-.442.234-.6.313-.347.174-.598.3-.833.553-.068.073-.26.278-1.02 1.886l-1.79-.656c1.293-1.94 3.362-3.31 5.76-3.685zM12 20.5c-4.687 0-8.5-3.813-8.5-8.5 0-1.197.25-2.335.7-3.37.47.182 1.713.66 2.75 1.035-.107.336-.245.854-.26 1.333-.03.855.502 1.7.562 1.792.053.08.12.15.2.207.303.21.687.5.827.616.063.343.166 1.26.23 1.833.144 1.266.175 1.48.24 1.65.005.012.514 1.188 1.315 1.188.576-.003.673-.206 1.855-2.688.244-.512.45-.95.513-1.058.1-.144.597-.61.87-.83.55-.442.76-1.82.413-2.682-.335-.83-1.92-2.08-2.5-2.195-.17-.033-.43-.04-.953-.053-.497-.01-1.25-.028-1.536-.09-.098-.024-.314-.094-.605-.196.32-.668.627-1.28.71-1.4.05-.052.168-.112.408-.234.17-.086.383-.192.653-.34.208-.116.458-.247.71-.38 1.168-.612 1.484-.8 1.658-1.082.11-.177.263-.44-.04-1.544 1.042.027 2.038.24 2.955.61-.89.32-1.024.595-1.106.77-.367.784.256 1.475.667 1.93.096.107.24.268.32.38l-.017.036c-.234.472-.67 1.35-.196 2.194.406.72 1.384 1.13 2.437 1.52.134.05.25.092.33.126.16.208.496.79 1 1.735l.154.285c.078.14.33.505.842.505.167 0 .363-.04.59-.137.032-.013.083-.035.18-.094C19.72 17.405 16.22 20.5 12 20.5zm-3.812-9.45c.01-.285.102-.646.184-.907l.027.006c.397.09 1.037.11 1.83.13.32.006.59.008.615 0 .326.143 1.355 1 1.483 1.31.113.28.05.812-.034 1.01-.233.197-.845.735-1.085 1.078-.093.13-.212.373-.64 1.274-.133.276-.313.654-.488 1.013-.026-.225-.054-.472-.08-.686-.225-2.003-.273-2.22-.42-2.445-.05-.078-.202-.31-1.135-.973-.117-.213-.268-.564-.26-.813z"})));o.metadata={width:24,height:24},t.a=o},c0ZR:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("JtPf");const n=e=>new Promise((t,a)=>{const n=new window.XMLHttpRequest;n.responseType="blob",n.onreadystatechange=()=>{n.readyState===window.XMLHttpRequest.DONE&&(200===n.status?t(n.response):a(new Error("Unexpected status code")))},n.onerror=e=>a(e),n.ontimeout=e=>a(e),n.open("GET",e,!0),n.send()})},"p+r5":function(e,t,a){"use strict";a.d(t,"a",(function(){return R}));a("IAdD");var n=a("97Jx"),i=a.n(n),s=a("LdEA"),o=a.n(s),r=a("KEM+"),l=a.n(r),d=a("ERkP"),c=a("t62R"),h=a("3XMw"),p=a.n(h),u=a("tI3i"),m=a.n(u),g=a("oQhu"),_=a("rHpw"),b=a("aITJ"),y=a("MWbm"),f=(a("aWzz"),a("Oib4")),x=a("Lsrn"),C=a("k/Ka");const v=(e={})=>Object(C.a)("svg",Object.assign({},e,{style:[x.a.root,e.style],viewBox:"0 0 24 24"}),d.createElement("g",null,d.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm4.086 7.698L11.744 15.6s-.354.545-.416.607c-.146.146-.338.22-.53.22s-.384-.073-.53-.22l-2.7-2.704c-.293-.293-.293-.77 0-1.06.293-.294.768-.294 1.06 0l2.048 2.05 4.155-6.365c.227-.346.693-.443 1.04-.218.345.227.443.692.216 1.038z"})));v.metadata={width:24,height:24};var w=v,T=a("ioan");const S=e=>e.length,E=(e,t=S)=>t(e);class R extends d.Component{constructor(e){super(e),l()(this,"_blurOnBackspaceKeyUpForKaiOS",!1),l()(this,"_getTextInputStyle",Object(g.a)((e,t)=>[M.root,!e&&M.disabled,B.sidePadding,t?M.withLabelPadding:M.withoutLabelPadding])),l()(this,"_calculateLength",e=>E(e,this.props.calculateLength)),l()(this,"_handleBlur",e=>{const{onBlur:t}=this.props,{value:a}=e.currentTarget,n=this._calculateLength(a);this.setState({isFocused:!1,charCount:n}),t&&t(e)}),l()(this,"_handleChange",e=>{const{onChange:t}=this.props,{value:a}=e.currentTarget,n=this._calculateLength(a);this.setState({isFocused:!0,charCount:n}),t&&t(e)}),l()(this,"_handleFocus",e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t(e)}),l()(this,"_handleKeyPress",e=>{const{multiline:t,onKeyPress:a,onSubmitEditing:n}=this.props;a&&a(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!n||(e.preventDefault(),n(e))}),l()(this,"_handleKeyDown",e=>{const{onKeyDown:t}=this.props,{charCount:a}=this.state,n=0===a;b.a.isKaiOS()&&"Backspace"===e.key&&n?this._blurOnBackspaceKeyUpForKaiOS=n:t&&t(e)}),l()(this,"_handleKeyUp",e=>{const{onKeyUp:t}=this.props;b.a.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)}),l()(this,"_setTextInputRef",e=>{this._textInput=e}),l()(this,"_checkComponentPropsUsageCorrectness",e=>{const{defaultValue:t,maxLength:a,validLength:n,value:i,onChange:s}=e,o=!!s,r="string"==typeof i,l="string"==typeof t;m()(!(!l&&r&&!o),"A controlled component, a component with a value prop, must have an onChange handler. The value prop cannot be undefined."),m()(!(a&&n&&n>a),"Max length should be equal or greater than valid length."),m()(!(void 0!==a&&a<=0||void 0!==n&&n<=0),"Set editable to false instead of limiting the valid character count to 0.")}),l()(this,"_exceedsValidLength",e=>{const t=this._getMaxCharCount();return!!t&&e>t}),l()(this,"_getMaxCharCount",()=>this.props.validLength||this.props.maxLength),this._checkComponentPropsUsageCorrectness(e);const{defaultValue:t,value:a}=e;this.state={charCount:this._calculateLength(a||t||""),isFocused:!1}}componentDidUpdate(e){const{validLength:t,maxLength:a,onChange:n,value:i}=this.props,{validLength:s,maxLength:o,onChange:r,value:l}=e;s===t&&a===o&&!!n===!!r&&"string"==typeof i===("string"==typeof l)||this._checkComponentPropsUsageCorrectness(this.props)}static getDerivedStateFromProps(e,t){const{calculateLength:a,value:n}=e,i="string"==typeof n?E(n,a):0;return"string"==typeof n&&i!==t.charCount?{charCount:i}:null}render(){const{accessibilityLabel:e,editable:t,errorText:a,helperText:n,label:i,showValidationIcon:s,style:o}=this.props,{isFocused:r}=this.state,l=this._isFormInvalid(),c=[I.underline,r&&I.underlineFocused,l&&I.underlineInvalid,!t&&I.underlineDisabled];return d.createElement(y.a,{style:[B.root,!t&&B.disabled,o]},d.createElement(y.a,{accessibilityLabel:e,accessibilityRole:"label",style:[B.textInputFormStyle,c]},d.createElement(y.a,{style:B.textInputFormWrapper},i?this._renderLabel():null,this._renderTextInput()),s?this._renderValidationIcon():null),d.createElement(y.a,{style:[B.sidePadding,B.underTextInputForm]},d.createElement(y.a,{style:B.subtextWrapper},n?this._renderHelperText():null,l&&a?this._renderErrorText():null),this._getMaxCharCount()?this._renderCharCount():null))}_renderLabel(){const{label:e}=this.props,{isFocused:t}=this.state,a=t?"primary":"deepGray",n=this._isFormInvalid()?"red":a;return d.createElement(c.c,{color:n,numberOfLines:1,style:[B.sidePadding,k.root]},e)}_renderTextInput(){const e=this.props,{editable:t,Icon:a,label:n,maxLength:s}=e,r=o()(e,["accessibilityLabel","calculateLength","editable","errorText","helperText","Icon","iconStyle","invalid","label","maxLength","onBlur","onChange","onSubmitEditing","onFocus","onKeyDown","onKeyPress","onKeyUp","showValidationIcon","style","validLength"]),l=this.getValue(),h=this._calculateLength(l),p=s+l.length-h;return d.createElement(y.a,{style:M.container},a?this._renderIcon():null,d.createElement(c.c,{size:"large",style:M.wrapper},d.createElement(T.a,i()({},r,{editable:t,maxLength:s?p:void 0,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,placeholderTextColor:_.a.theme.colors.deepGray,ref:this._setTextInputRef,style:this._getTextInputStyle(t,n)}))))}_renderHelperText(){return d.createElement(y.a,{accessibilityLiveRegion:"polite"},d.createElement(c.c,{color:"deepGray",style:B.subtext},this.props.helperText))}_renderErrorText(){return d.createElement(y.a,{accessibilityLiveRegion:"assertive"},d.createElement(c.c,{color:"red",style:B.subtext},this.props.errorText))}_renderCharCount(){const{charCount:e}=this.state,t=this._getMaxCharCount(),a=this._exceedsValidLength(e),n=t&&p.a.ia24dc8c(t),i=p.a.ia24dc8c(e);return d.createElement(y.a,{accessibilityLiveRegion:"polite"},d.createElement(c.c,{color:a?"red":"deepGray",style:B.characterCounterSubtext},n?`${i}/${n}`:""))}_renderIcon(){const{Icon:e,iconStyle:t}=this.props,{isFocused:a}=this.state,n=[B.icon,a&&B.focusedIcon,t];return e&&d.createElement(e,{style:n})}_renderValidationIcon(){return this._isFormInvalid()?d.createElement(f.a,{style:[B.validationIcon,B.error]}):d.createElement(w,{style:[B.validationIcon,B.valid]})}_isFormInvalid(){const{charCount:e}=this.state;return this.props.invalid||this._exceedsValidLength(e)||!1}blur(){this._textInput&&this._textInput.blur()}getValue(){return this._textInput&&this._textInput.getValue()||""}focus(){this._textInput&&this._textInput.focus()}isValidLength(){const e=this.getValue(),t=this._calculateLength(e);return!this._exceedsValidLength(t)}}l()(R,"defaultProps",{autoComplete:"on",autoCorrect:!0,autoFocus:!1,editable:!0,invalid:!1}),R.propTypes={};const I=_.a.create(e=>({underline:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.medium,borderColor:e.colors.deepGray,borderRadius:e.borderRadii.xSmall},underlineFocused:{borderColor:e.colors.primary},underlineInvalid:{borderColor:e.colors.red},underlineDisabled:{borderColor:e.colors.transparent}})),k=_.a.create(e=>({root:{alignSelf:"flex-start",paddingTop:e.spaces.xxSmall}})),M=_.a.create(e=>({container:{flexDirection:"row",flexGrow:1,flexShrink:1,overflow:"hidden"},root:{backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,boxSizing:"border-box",color:"inherit",fontFamily:"inherit",fontSize:"inherit",paddingVertical:e.spaces.xSmall,textAlign:"inherit",outlineStyle:"none"},wrapper:{alignItems:"center",alignSelf:"flex-start",display:"flex",width:"100%"},withLabelPadding:{paddingBottom:e.spaces.xxSmall,paddingTop:e.spaces.micro},withoutLabelPadding:{paddingVertical:e.spaces.small},disabled:{color:e.colors.deepGray}})),B=_.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},textInputFormStyle:{borderRadius:e.borderWidths.medium,backgroundColor:e.colors.faintGray,flexDirection:"row"},textInputFormWrapper:{flexGrow:1,flexShrink:1},disabled:{cursor:"default",opacity:.8},sidePadding:{paddingHorizontal:e.spaces.xSmall},underTextInputForm:{flexDirection:"row"},subtextWrapper:{flexDirection:"column",flex:1,paddingRight:e.spaces.medium},subtext:{alignSelf:"flex-start",paddingTop:e.spaces.xxSmall},characterCounterSubtext:{alignSelf:"flex-end",paddingTop:e.spaces.xxSmall},focusedIcon:{color:e.colors.primary},icon:{alignSelf:"center",color:e.colors.deepGray,paddingLeft:e.spaces.xSmall},validationIcon:{alignSelf:"center",paddingRight:e.spaces.xxSmall},error:{color:e.colors.red},valid:{color:e.colors.primary}}))},pidX:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));a("DZ+c"),a("Ysgh"),a("kYxP");var n=a("3XMw"),i=a.n(n),s=a("3A2y");const o=i.a.b2e94283,r=["title","screen_name","text","url","hashtags","via"];t.a=e=>{const t=e.state||{},a=e.query||{},[n,i,s,l,d,c]=r.map(e=>t[e]||a[e]),h=[n,i&&"@"+i.toString(),s,l,d&&d.toString().split(",").map(e=>"#"+e).join(" "),c&&o({viaScreenName:c})].filter(Boolean).join(" ");return h?h+" ":void 0};const l=e=>Object(s.a)(e,r)},rziq:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n="send-tweet",i="dismiss-composer"},sCk0:function(e,t,a){"use strict";a("kYxP");var n=a("KEM+"),i=a.n(n),s=a("ERkP"),o=a("zfvc"),r=a("zrc3");const l=Object.freeze({in:"in",out:"out",static:"static"});class d extends s.Component{constructor(...e){super(...e),i()(this,"state",{isAnimating:!1,renderChildren:s.Children.toArray(this.props.children).map(e=>({status:l.static,child:e}))}),i()(this,"_handleEachAnimateComplete",()=>{const{isAnimating:e}=this.state,{onAnimateComplete:t,children:a}=this.props;e&&(t&&t(),this.setState({renderChildren:s.Children.toArray(a).map(e=>({status:l.static,child:e})),isAnimating:!1}))})}static getDerivedStateFromProps(e,t){const a=((e,t)=>{let a=0,n=0;const i=[];for(;n<e.length;){if(a>=t.length){i.push(...e.slice(n).map(e=>({child:e,status:l.out})));break}const s=t[a],o=e[n];if(s.key===o.key)i.push({child:s,status:l.static}),a+=1;else{const e=Object(r.a)(t,e=>e.key===o.key);e>=0?(i.push(...t.slice(a,e).map(e=>({child:e,status:l.in})),{child:t[e],status:l.static}),a=e+1):i.push({child:o,status:l.out})}n+=1}return a<t.length&&i.push(...t.slice(a).map(e=>({child:e,status:l.in}))),i})(t.renderChildren.map(e=>e.child),s.Children.toArray(e.children));return{renderChildren:a,isAnimating:!a.every(e=>e.status===l.static)}}render(){const{renderChildren:e}=this.state;return e.map(({status:e,child:t})=>s.createElement(o.a,{animateMount:e!==l.static,key:t.key,onAnimateComplete:this._handleEachAnimateComplete,show:e!==l.out},t))}}t.a=d},yTN1:function(e,t,a){"use strict";var n=a("KEM+"),i=a.n(n),s=a("ERkP"),o=a("3XMw"),r=a.n(o),l=a("k6Ei"),d=a("rHpw"),c=(a("aWzz"),a("+/1j")),h=a("MWbm");const p=r.a.c2fc878c,u=r.a.db11b27f;class m extends s.Component{render(){const{count:e,maxCount:t,formatNumber:a,warningCount:n}=this.props,i=t-e,o=i>=0?u({count:a(i)}):p({count:a(e-t)}),r=e>=n?s.createElement(c.a,{accessibilityLiveRegion:"polite","aria-relevant":"all",style:d.a.visuallyHidden},o):null,m=Math.min(1,1-i/t),_=e>=t?"red":e>=n?"yellow":"primary",b=s.createElement(l.a,{color:_,progress:m,size:e>=n?30:20,style:[g.progressCircle,i<=-10&&g.hide]}),y=e>=n?s.createElement(c.a,{style:[g.text,i>0?g.deepGrayColor:g.redColor]},a(i)):null;return s.createElement(h.a,{style:[g.root,g.center]},r,b,s.createElement(h.a,{style:[d.a.absoluteFill,g.center]},y))}}i()(m,"displayName","@twitter/CountdownCircle"),i()(m,"defaultProps",{formatNumber:e=>e}),m.propTypes={};const g=d.a.create(({colors:e})=>({root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:.8,minWidth:16,textAlign:"center"},deepGrayColor:{color:e.deepGray},redColor:{color:e.red}}));t.a=m},zmS9:function(e,t,a){"use strict";var n=a("ERkP"),i=a("3XMw"),s=a.n(i),o=a("J0mu"),r=a("t62R"),l=a("rHpw"),d=a("QbaN");const c=s.a.bfb895b1,h=l.a.create(e=>({icon:{fontSize:e.fontSizes.normal,paddingRight:e.spaces.xSmall,textAlignVertical:"middle"}}));t.a=({scheduledFor:e,onPress:t})=>{const a=Object(d.c)(e),i=!!a&&(Object(d.h)(e)&&!Object(d.g)(a)&&!Object(d.f)(a)),s=Boolean(t);return a&&i?n.createElement(r.c,{color:"deepGray",onPress:t,size:"small",withInteractiveStyling:s},n.createElement(o.a,{style:h.icon}),c({date:Object(d.b)(a),time:Object(d.i)(a)})):null}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~bundle.Compose~bundle.RichTextCompose~bundle.PlainTextCompose.89770665.js.map