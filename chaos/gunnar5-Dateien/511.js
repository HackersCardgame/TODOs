(window.webpackJsonp=window.webpackJsonp||[]).push([[511],{1388:function(e,t,n){"use strict";n.r(t),function(e){n(10),n(11);var i,r,a,o=n(1),s=n.n(o),c=n(0),u=n.n(c),l=n(7),d=n(425),m=n.n(d),p=n(537),h=n.n(p),f=n(17),g=n(2368),b=n(2930),v=n(1975),w=n(9),y=n(538),H=n(101),O=n(1590);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let E=Object(l.k)("loadIframe","setLoadIframe",!1)(i=Object(l.k)("iframeHeight","setIframeHeight",null)(i=Object(l.k)("customImgSize","setCustomImgSize",null)((a=r=class extends c.Component{constructor(...t){super(...t),C(this,"shouldComponentUpdate",y.a),C(this,"measurementContainer",u.a.createRef()),C(this,"updateDimensions",m()(()=>{if(!this.measurementContainer)return;const e=Object(w.a)(()=>this.measurementContainer.current.offsetWidth,0);this.props.setCustomImgSize({width:e,height:9*e/16})},100)),C(this,"messageHandler",e=>{let t=e.data;try{t=JSON.parse(t)}catch(r){return!1}const{context:n,height:i}=t;"iframe.resize"===n&&i&&this.props.setIframeHeight(i)}),C(this,"onThumbnailClick",()=>{this.props.setLoadIframe(!0)}),C(this,"renderIframe",()=>{const{iframe:e,iframeHeight:t,logTogglePlay:n,logMediaEnded:i}=this.props;return u.a.createElement(v.a,{innerHTML:e,iframeHeight:t,logTogglePlay:n,logMediaEnded:i})}),C(this,"renderThumbnail",()=>{const{customImgSize:t,variant:n}=this.props,i="video"===n||"livestream_youtube"===n;let r={minHeight:"200",overflow:"inherit"},a={minHeight:"200px"};i&&t&&(a=I({},a,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}),r=I({},r,{},t,{overflow:"hidden"}));const o={color:f.a.Color.Light,size:f.a.Size.Xxl};return u.a.createElement("figure",{ref:this.measurementContainer,title:e("{variant} thumbnail",{variant:n},"Hover value, variant is a type of media, e.g. audio."),style:{margin:0}},u.a.createElement(O.b,x({onClick:this.onThumbnailClick,isOverflowHidden:i&&t},r,{"data-tag":"media-container"}),u.a.createElement(h.a,{once:!0,offset:H.l},u.a.createElement("img",{src:this.props.thumbnailUrl,style:a,width:"100%",height:"auto",alt:""})),u.a.createElement(O.a,{className:"middle-xs center-xs"},u.a.createElement(O.c,{title:e("Start playback",void 0,"Hover text on a video")},i?u.a.createElement(g.a,o):u.a.createElement(b.a,o)))))})}componentDidMount(){const{variant:e}=this.props;"video"!==e&&"livestream_youtube"!==e||(window.addEventListener("resize",this.updateDimensions),this.updateDimensions()),window.addEventListener("message",this.messageHandler)}componentWillUnmount(){const{variant:e}=this.props;"video"!==e&&"livestream_youtube"!==e||window.removeEventListener("resize",this.updateDimensions),window.removeEventListener("message",this.messageHandler)}render(){return this.props.loadIframe?this.renderIframe():this.renderThumbnail()}},C(r,"propTypes",{variant:s.a.oneOf(["video","audio"]),iframe:s.a.string.isRequired,thumbnailUrl:s.a.string,logTogglePlay:s.a.func,logMediaEnded:s.a.func,loadIframe:s.a.bool.isRequired,setLoadIframe:s.a.func.isRequired,iframeHeight:s.a.number,setIframeHeight:s.a.func.isRequired,customImgSize:s.a.object,setCustomImgSize:s.a.func.isRequired}),i=a))||i)||i)||i;t.default=E}.call(this,n(3).default)},1590:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var i=n(6),r=n(436),a=n.n(r);const o=i.f.button.withConfig({componentId:"sc-10zv41x-0"})(["appearance:none;background:none;border:0;display:flex;width:15%;max-width:",";margin-left:auto;margin-right:auto;opacity:0.9;transition:",";&:focus{opacity:1;}"],e=>e.theme.units.getValue(10),({theme:e})=>e.transitions.default),s=i.f.div.withConfig({componentId:"sc-10zv41x-1"})(["display:flex;position:absolute;left:0px;bottom:3px;right:0px;top:0px;background:",";cursor:pointer;&:hover ","{opacity:1;}"],e=>a()(e.theme.colors.dark).alpha(.1).string(),o),c=i.f.div.withConfig({componentId:"sc-10zv41x-2"})(["",";"],e=>"\n    cursor: pointer;\n    display: block;\n    box-sizing: border-box;\n    position: relative;\n    border-radius: ".concat(e.theme.cornerRadii.default,";\n    transition: ").concat(e.theme.transitions.default,";\n    ").concat(e.height?"height: ".concat(e.height,"px;"):"","\n    ").concat(e.width?"width: ".concat(e.width,"px;"):"","\n    min-height: ").concat(e.minHeight,"px;\n    overflow: ").concat(e.overflow,";\n"))},1975:function(e,t,n){"use strict";n(10),n(49),n(115),n(11);var i=n(1),r=n.n(i),a=n(0),o=n.n(a),s=n(6),c=n(868),u=n.n(c),l=n(1505),d=n.n(l),m=n(168),p=n.n(m),h=n(209),f=n.n(h),g=n(1976),b=n(1977),v=n.n(b);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}u.a.queryString=d.a;class y extends a.Component{constructor(...e){super(...e),w(this,"IframeWrapperRef",o.a.createRef())}componentDidMount(){var e,t;const{logTogglePlay:n,logMediaEnded:i}=this.props,r=f()(e=>{n(e)},1e3),a=this.IframeWrapperRef.current.firstElementChild,o=null===a||void 0===a?void 0:null===(e=a.attributes)||void 0===e?void 0:null===(t=e.src)||void 0===t?void 0:t.value,s=o&&u.a.parse(o,!0),{hostname:c,pathname:l,_protocol:d,query:m}=s||{},h="www.youtube.com"===c,b="SoundCloud"===(null===m||void 0===m?void 0:m.display_name);if(h){const e=l.split("/").pop(),t=p()(d+"://"+c)("/embed/".concat(e),{autoplay:1,enablejsapi:1});if(o&&(a.attributes.src.value=t),a){const t=new v.a(a);t.load(e),t.on("playing",()=>{const e=t.getDuration(),i=t.getCurrentTime();n({currentTime:i,duration:e})}),t.on("paused",()=>{const e=t.getDuration(),i=t.getCurrentTime();n({currentTime:i,duration:e})}),t.on("ended",()=>{const e=t.getDuration(),n=t.getCurrentTime();i({currentTime:n,duration:e})})}}else if(a){const e=new g.Player(a),t=()=>new Promise(t=>{e.getDuration(e=>t(e))}),o=()=>new Promise(t=>{e.getCurrentTime(e=>t(e))});e.on("ready",()=>{e.on("play",async()=>{const e=await t(),i=await o();b?r({currentTime:i,duration:e}):n({currentTime:i,duration:e})}),e.on("pause",async()=>{const e=await t(),i=await o();n({currentTime:i,duration:e})}),e.on("ended",async()=>{const e=await o();i({currentTime:e})})})}}render(){const{innerHTML:e,iframeHeight:t}=this.props;return o.a.createElement(H,{dangerouslySetInnerHTML:{__html:e},iframeHeight:t,ref:this.IframeWrapperRef,"data-tag":"post-iframe-wrapper"})}}w(y,"propTypes",{iframeHeight:r.a.number,innerHTML:r.a.string.isRequired,logTogglePlay:r.a.func.isRequired,logMediaEnded:r.a.func.isRequired}),w(y,"defaultProps",{iframeHeight:null});const H=s.f.div.withConfig({componentId:"sc-9yk1xn-0"})(["transition:",";position:relative;width:100%;cursor:pointer;overflow:hidden;"," & > iframe{position:absolute;"," width:100%;height:",";}"],e=>e.theme.transitions.default,e=>e.iframeHeight?"\n            height: ".concat(e.iframeHeight,"px;\n        "):"\n            height: 0;\n            padding-bottom: 56.25%;\n        ","",e=>e.iframeHeight?"".concat(e.iframeHeight,"px"):"100%");t.a=y}}]);
//# sourceMappingURL=511.c58f478a.chunk.js.map